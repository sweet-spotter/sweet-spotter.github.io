var kC=Object.create;var md=Object.defineProperty,BC=Object.defineProperties,VC=Object.getOwnPropertyDescriptor,jC=Object.getOwnPropertyDescriptors,UC=Object.getOwnPropertyNames,Hg=Object.getOwnPropertySymbols,HC=Object.getPrototypeOf,Gg=Object.prototype.hasOwnProperty,zC=Object.prototype.propertyIsEnumerable;var zg=(e,t,n)=>t in e?md(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$=(e,t)=>{for(var n in t||={})Gg.call(t,n)&&zg(e,n,t[n]);if(Hg)for(var n of Hg(t))zC.call(t,n)&&zg(e,n,t[n]);return e},ve=(e,t)=>BC(e,jC(t));var GC=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var WC=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of UC(t))!Gg.call(e,a)&&a!==n&&md(e,a,{get:()=>t[a],enumerable:!(r=VC(t,a))||r.enumerable});return e};var $C=(e,t,n)=>(n=e!=null?kC(HC(e)):{},WC(t||!e||!e.__esModule?md(n,"default",{value:e,enumerable:!0}):n,e));var ev=GC((Lu,JE)=>{"use strict";(function(e,t){typeof Lu=="object"&&typeof JE<"u"?t(Lu):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.ZXing={}))})(Lu,function(e){"use strict";function t(y){return y==null}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,i){y.__proto__=i}||function(y,i){for(var o in i)i.hasOwnProperty(o)&&(y[o]=i[o])};function r(y,i){n(y,i);function o(){this.constructor=y}y.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function a(y,i){var o=Object.setPrototypeOf;o?o(y,i):y.__proto__=i}function l(y,i){i===void 0&&(i=y.constructor);var o=Error.captureStackTrace;o&&o(y,i)}var h=function(y){r(i,y);function i(o){var s=this.constructor,c=y.call(this,o)||this;return Object.defineProperty(c,"name",{value:s.name,enumerable:!1}),a(c,s.prototype),l(c),c}return i}(Error);let g=(()=>{class y extends h{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}return y.kind="Exception",y})(),E=(()=>{class y extends g{}return y.kind="ArgumentException",y})(),v=(()=>{class y extends g{}return y.kind="IllegalArgumentException",y})();class x{constructor(i){if(this.binarizer=i,i===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,s,c){let u=this.binarizer.getLuminanceSource().crop(i,o,s,c);return new x(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new x(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){let i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new x(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let b=(()=>{class y extends g{static getChecksumInstance(){return new y}}return y.kind="ChecksumException",y})();class O{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class T{static arraycopy(i,o,s,c,u){for(;u--;)s[c++]=i[o++]}static currentTimeMillis(){return Date.now()}}let j=(()=>{class y extends g{}return y.kind="IndexOutOfBoundsException",y})(),W=(()=>{class y extends j{constructor(o=void 0,s=void 0){super(s),this.index=o,this.message=s}}return y.kind="ArrayIndexOutOfBoundsException",y})();class H{static fill(i,o){for(let s=0,c=i.length;s<c;s++)i[s]=o}static fillWithin(i,o,s,c){H.rangeCheck(i.length,o,s);for(let u=o;u<s;u++)i[u]=c}static rangeCheck(i,o,s){if(o>s)throw new v("fromIndex("+o+") > toIndex("+s+")");if(o<0)throw new W(o);if(s>i)throw new W(s)}static asList(...i){return i}static create(i,o,s){return Array.from({length:i}).map(u=>Array.from({length:o}).fill(s))}static createInt32Array(i,o,s){return Array.from({length:i}).map(u=>Int32Array.from({length:o}).fill(s))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let s=0,c=i.length;s<c;s++)if(i[s]!==o[s])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(let s of i)o=31*o+s;return o}static fillUint8Array(i,o){for(let s=0;s!==i.length;s++)i[s]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){let s=new Uint8Array(o);return s.set(i),s}return i.slice(0,o)}static copyOfRange(i,o,s){let c=s-o,u=new Int32Array(c);return T.arraycopy(i,o,u,0,c),u}static binarySearch(i,o,s){s===void 0&&(s=H.numberComparator);let c=0,u=i.length-1;for(;c<=u;){let d=u+c>>1,f=s(o,i[d]);if(f>0)c=d+1;else if(f<0)u=d-1;else return d}return-c-1}static numberComparator(i,o){return i-o}}class U{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let s=31;return o=i<<16,o!==0&&(s-=16,i=o),o=i<<8,o!==0&&(s-=8,i=o),o=i<<4,o!==0&&(s-=4,i=o),o=i<<2,o!==0&&(s-=2,i=o),s-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}U.MIN_VALUE_32_BITS=-2147483648,U.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ye{constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=ye.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){let o=ye.makeArray(i);T.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){let o=this.size;if(i>=o)return o;let s=this.bits,c=Math.floor(i/32),u=s[c];u&=~((1<<(i&31))-1);let d=s.length;for(;u===0;){if(++c===d)return o;u=s[c]}let f=c*32+U.numberOfTrailingZeros(u);return f>o?o:f}getNextUnset(i){let o=this.size;if(i>=o)return o;let s=this.bits,c=Math.floor(i/32),u=~s[c];u&=~((1<<(i&31))-1);let d=s.length;for(;u===0;){if(++c===d)return o;u=~s[c]}let f=c*32+U.numberOfTrailingZeros(u);return f>o?o:f}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new v;if(o===i)return;o--;let s=Math.floor(i/32),c=Math.floor(o/32),u=this.bits;for(let d=s;d<=c;d++){let f=d>s?0:i&31,m=(2<<(d<c?31:o&31))-(1<<f);u[d]|=m}}clear(){let i=this.bits.length,o=this.bits;for(let s=0;s<i;s++)o[s]=0}isRange(i,o,s){if(o<i||i<0||o>this.size)throw new v;if(o===i)return!0;o--;let c=Math.floor(i/32),u=Math.floor(o/32),d=this.bits;for(let f=c;f<=u;f++){let p=f>c?0:i&31,C=(2<<(f<u?31:o&31))-(1<<p)&4294967295;if((d[f]&C)!==(s?C:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let s=o;s>0;s--)this.appendBit((i>>s-1&1)===1)}appendBitArray(i){let o=i.size;this.ensureCapacity(this.size+o);for(let s=0;s<o;s++)this.appendBit(i.get(s))}xor(i){if(this.size!==i.size)throw new v("Sizes don't match");let o=this.bits;for(let s=0,c=o.length;s<c;s++)o[s]^=i.bits[s]}toBytes(i,o,s,c){for(let u=0;u<c;u++){let d=0;for(let f=0;f<8;f++)this.get(i)&&(d|=1<<7-f),i++;o[s+u]=d}}getBitArray(){return this.bits}reverse(){let i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),s=o+1,c=this.bits;for(let u=0;u<s;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,i[o-u]=d}if(this.size!==s*32){let u=s*32-this.size,d=i[0]>>>u;for(let f=1;f<s;f++){let p=i[f];d|=p<<32-u,i[f-1]=d,d=p>>>u}i[s-1]=d}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof ye))return!1;let o=i;return this.size===o.size&&H.equals(this.bits,o.bits)}hashCode(){return 31*this.size+H.hashCode(this.bits)}toString(){let i="";for(let o=0,s=this.size;o<s;o++)(o&7)===0&&(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new ye(this.size,this.bits.slice())}}var ke=function(y){return y[y.OTHER=0]="OTHER",y[y.PURE_BARCODE=1]="PURE_BARCODE",y[y.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",y[y.TRY_HARDER=3]="TRY_HARDER",y[y.CHARACTER_SET=4]="CHARACTER_SET",y[y.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",y[y.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",y[y.ASSUME_GS1=7]="ASSUME_GS1",y[y.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",y[y.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",y[y.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",y}(ke||{}),Ce=ke;let z=(()=>{class y extends g{static getFormatInstance(){return new y}}return y.kind="FormatException",y})();var _e=function(y){return y[y.Cp437=0]="Cp437",y[y.ISO8859_1=1]="ISO8859_1",y[y.ISO8859_2=2]="ISO8859_2",y[y.ISO8859_3=3]="ISO8859_3",y[y.ISO8859_4=4]="ISO8859_4",y[y.ISO8859_5=5]="ISO8859_5",y[y.ISO8859_6=6]="ISO8859_6",y[y.ISO8859_7=7]="ISO8859_7",y[y.ISO8859_8=8]="ISO8859_8",y[y.ISO8859_9=9]="ISO8859_9",y[y.ISO8859_10=10]="ISO8859_10",y[y.ISO8859_11=11]="ISO8859_11",y[y.ISO8859_13=12]="ISO8859_13",y[y.ISO8859_14=13]="ISO8859_14",y[y.ISO8859_15=14]="ISO8859_15",y[y.ISO8859_16=15]="ISO8859_16",y[y.SJIS=16]="SJIS",y[y.Cp1250=17]="Cp1250",y[y.Cp1251=18]="Cp1251",y[y.Cp1252=19]="Cp1252",y[y.Cp1256=20]="Cp1256",y[y.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",y[y.UTF8=22]="UTF8",y[y.ASCII=23]="ASCII",y[y.Big5=24]="Big5",y[y.GB18030=25]="GB18030",y[y.EUC_KR=26]="EUC_KR",y}(_e||{});class G{constructor(i,o,s,...c){this.valueIdentifier=i,this.name=s,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=c,G.VALUE_IDENTIFIER_TO_ECI.set(i,this),G.NAME_TO_ECI.set(s,this);let u=this.values;for(let d=0,f=u.length;d!==f;d++){let p=u[d];G.VALUES_TO_ECI.set(p,this)}for(let d of c)G.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new z("incorect value");let o=G.VALUES_TO_ECI.get(i);if(o===void 0)throw new z("incorect value");return o}static getCharacterSetECIByName(i){let o=G.NAME_TO_ECI.get(i);if(o===void 0)throw new z("incorect value");return o}equals(i){if(!(i instanceof G))return!1;let o=i;return this.getName()===o.getName()}}G.VALUE_IDENTIFIER_TO_ECI=new Map,G.VALUES_TO_ECI=new Map,G.NAME_TO_ECI=new Map,G.Cp437=new G(_e.Cp437,Int32Array.from([0,2]),"Cp437"),G.ISO8859_1=new G(_e.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),G.ISO8859_2=new G(_e.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),G.ISO8859_3=new G(_e.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),G.ISO8859_4=new G(_e.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),G.ISO8859_5=new G(_e.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),G.ISO8859_6=new G(_e.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),G.ISO8859_7=new G(_e.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),G.ISO8859_8=new G(_e.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),G.ISO8859_9=new G(_e.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),G.ISO8859_10=new G(_e.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),G.ISO8859_11=new G(_e.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),G.ISO8859_13=new G(_e.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),G.ISO8859_14=new G(_e.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),G.ISO8859_15=new G(_e.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),G.ISO8859_16=new G(_e.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),G.SJIS=new G(_e.SJIS,20,"SJIS","Shift_JIS"),G.Cp1250=new G(_e.Cp1250,21,"Cp1250","windows-1250"),G.Cp1251=new G(_e.Cp1251,22,"Cp1251","windows-1251"),G.Cp1252=new G(_e.Cp1252,23,"Cp1252","windows-1252"),G.Cp1256=new G(_e.Cp1256,24,"Cp1256","windows-1256"),G.UnicodeBigUnmarked=new G(_e.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),G.UTF8=new G(_e.UTF8,26,"UTF8","UTF-8"),G.ASCII=new G(_e.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),G.Big5=new G(_e.Big5,28,"Big5"),G.GB18030=new G(_e.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),G.EUC_KR=new G(_e.EUC_KR,30,"EUC_KR","EUC-KR");let Qo=(()=>{class y extends g{}return y.kind="UnsupportedOperationException",y})();class Gt{static decode(i,o){let s=this.encodingName(o);return this.customDecoder?this.customDecoder(i,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(i,s):new TextDecoder(s).decode(i)}static shouldDecodeOnFallback(i){return!Gt.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){let s=this.encodingName(o);return this.customEncoder?this.customEncoder(i,s):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof G?i:G.getCharacterSetECIByName(i)}static decodeFallback(i,o){let s=this.encodingCharacterSet(o);if(Gt.isDecodeFallbackSupported(s)){let c="";for(let u=0,d=i.length;u<d;u++){let f=i[u].toString(16);f.length<2&&(f="0"+f),c+="%"+f}return decodeURIComponent(c)}if(s.equals(G.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new Qo(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(G.UTF8)||i.equals(G.ISO8859_1)||i.equals(G.ASCII)}static encodeFallback(i){let s=btoa(unescape(encodeURIComponent(i))).split(""),c=[];for(let u=0;u<s.length;u++)c.push(s[u].charCodeAt(0));return new Uint8Array(c)}}class ce{static castAsNonUtf8Char(i,o=null){let s=o?o.getName():this.ISO88591;return Gt.decode(new Uint8Array([i]),s)}static guessEncoding(i,o){if(o!=null&&o.get(Ce.CHARACTER_SET)!==void 0)return o.get(Ce.CHARACTER_SET).toString();let s=i.length,c=!0,u=!0,d=!0,f=0,p=0,m=0,C=0,w=0,I=0,A=0,_=0,S=0,M=0,R=0,V=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let q=0;q<s&&(c||u||d);q++){let P=i[q]&255;d&&(f>0?(P&128)===0?d=!1:f--:(P&128)!==0&&((P&64)===0?d=!1:(f++,(P&32)===0?p++:(f++,(P&16)===0?m++:(f++,(P&8)===0?C++:d=!1))))),c&&(P>127&&P<160?c=!1:P>159&&(P<192||P===215||P===247)&&R++),u&&(w>0?P<64||P===127||P>252?u=!1:w--:P===128||P===160||P>239?u=!1:P>160&&P<224?(I++,_=0,A++,A>S&&(S=A)):P>127?(w++,A=0,_++,_>M&&(M=_)):(A=0,_=0))}return d&&f>0&&(d=!1),u&&w>0&&(u=!1),d&&(V||p+m+C>0)?ce.UTF8:u&&(ce.ASSUME_SHIFT_JIS||S>=3||M>=3)?ce.SHIFT_JIS:c&&u?S===2&&I===2||R*10>=s?ce.SHIFT_JIS:ce.ISO88591:c?ce.ISO88591:u?ce.SHIFT_JIS:d?ce.UTF8:ce.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let s=-1;function c(d,f,p,m,C,w){if(d==="%%")return"%";if(o[++s]===void 0)return;d=m?parseInt(m.substr(1)):void 0;let I=C?parseInt(C.substr(1)):void 0,A;switch(w){case"s":A=o[s];break;case"c":A=o[s][0];break;case"f":A=parseFloat(o[s]).toFixed(d);break;case"p":A=parseFloat(o[s]).toPrecision(d);break;case"e":A=parseFloat(o[s]).toExponential(d);break;case"x":A=parseInt(o[s]).toString(I||16);break;case"d":A=parseFloat(parseInt(o[s],I||10).toPrecision(d)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(I);let _=parseInt(p),S=p&&p[0]+""=="0"?"0":" ";for(;A.length<_;)A=f!==void 0?A+S:S+A;return A}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(u,c)}static getBytes(i,o){return Gt.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}ce.SHIFT_JIS=G.SJIS.getName(),ce.GB2312="GB2312",ce.ISO88591=G.ISO8859_1.getName(),ce.EUC_JP="EUC_JP",ce.UTF8=G.UTF8.getName(),ce.PLATFORM_DEFAULT_ENCODING=ce.UTF8,ce.ASSUME_SHIFT_JIS=!1;class Ue{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=ce.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,s){for(let c=o;o<o+s;c++)this.append(i[c]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class yt{constructor(i,o,s,c){if(this.width=i,this.height=o,this.rowSize=s,this.bits=c,o==null&&(o=i),this.height=o,i<1||o<1)throw new v("Both dimensions must be greater than 0");s==null&&(s=Math.floor((i+31)/32)),this.rowSize=s,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){let o=i.length,s=i[0].length,c=new yt(s,o);for(let u=0;u<o;u++){let d=i[u];for(let f=0;f<s;f++)d[f]&&c.set(f,u)}return c}static parseFromString(i,o,s){if(i===null)throw new v("stringRepresentation cannot be null");let c=new Array(i.length),u=0,d=0,f=-1,p=0,m=0;for(;m<i.length;)if(i.charAt(m)===`
`||i.charAt(m)==="\r"){if(u>d){if(f===-1)f=u-d;else if(u-d!==f)throw new v("row lengths do not match");d=u,p++}m++}else if(i.substring(m,m+o.length)===o)m+=o.length,c[u]=!0,u++;else if(i.substring(m,m+s.length)===s)m+=s.length,c[u]=!1,u++;else throw new v("illegal character encountered: "+i.substring(m));if(u>d){if(f===-1)f=u-d;else if(u-d!==f)throw new v("row lengths do not match");p++}let C=new yt(f,p);for(let w=0;w<u;w++)c[w]&&C.set(Math.floor(w%f),Math.floor(w/f));return C}get(i,o){let s=o*this.rowSize+Math.floor(i/32);return(this.bits[s]>>>(i&31)&1)!==0}set(i,o){let s=o*this.rowSize+Math.floor(i/32);this.bits[s]|=1<<(i&31)&4294967295}unset(i,o){let s=o*this.rowSize+Math.floor(i/32);this.bits[s]&=~(1<<(i&31)&4294967295)}flip(i,o){let s=o*this.rowSize+Math.floor(i/32);this.bits[s]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new v("input matrix dimensions do not match");let o=new ye(Math.floor(this.width/32)+1),s=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){let f=u*s,p=i.getRow(u,o).getBitArray();for(let m=0;m<s;m++)c[f+m]^=p[m]}}clear(){let i=this.bits,o=i.length;for(let s=0;s<o;s++)i[s]=0}setRegion(i,o,s,c){if(o<0||i<0)throw new v("Left and top must be nonnegative");if(c<1||s<1)throw new v("Height and width must be at least 1");let u=i+s,d=o+c;if(d>this.height||u>this.width)throw new v("The region must fit inside the matrix");let f=this.rowSize,p=this.bits;for(let m=o;m<d;m++){let C=m*f;for(let w=i;w<u;w++)p[C+Math.floor(w/32)]|=1<<(w&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new ye(this.width):o.clear();let s=this.rowSize,c=this.bits,u=i*s;for(let d=0;d<s;d++)o.setBulk(d*32,c[u+d]);return o}setRow(i,o){T.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){let i=this.getWidth(),o=this.getHeight(),s=new ye(i),c=new ye(i);for(let u=0,d=Math.floor((o+1)/2);u<d;u++)s=this.getRow(u,s),c=this.getRow(o-1-u,c),s.reverse(),c.reverse(),this.setRow(u,c),this.setRow(o-1-u,s)}getEnclosingRectangle(){let i=this.width,o=this.height,s=this.rowSize,c=this.bits,u=i,d=o,f=-1,p=-1;for(let m=0;m<o;m++)for(let C=0;C<s;C++){let w=c[m*s+C];if(w!==0){if(m<d&&(d=m),m>p&&(p=m),C*32<u){let I=0;for(;(w<<31-I&4294967295)===0;)I++;C*32+I<u&&(u=C*32+I)}if(C*32+31>f){let I=31;for(;!(w>>>I);)I--;C*32+I>f&&(f=C*32+I)}}}return f<u||p<d?null:Int32Array.from([u,d,f-u+1,p-d+1])}getTopLeftOnBit(){let i=this.rowSize,o=this.bits,s=0;for(;s<o.length&&o[s]===0;)s++;if(s===o.length)return null;let c=s/i,u=s%i*32,d=o[s],f=0;for(;(d<<31-f&4294967295)===0;)f++;return u+=f,Int32Array.from([u,c])}getBottomRightOnBit(){let i=this.rowSize,o=this.bits,s=o.length-1;for(;s>=0&&o[s]===0;)s--;if(s<0)return null;let c=Math.floor(s/i),u=Math.floor(s%i)*32,d=o[s],f=31;for(;!(d>>>f);)f--;return u+=f,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof yt))return!1;let o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&H.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+H.hashCode(this.bits),i}toString(i="X ",o="  ",s=`
`){return this.buildToString(i,o,s)}buildToString(i,o,s){let c=new Ue;for(let u=0,d=this.height;u<d;u++){for(let f=0,p=this.width;f<p;f++)c.append(this.get(f,u)?i:o);c.append(s)}return c.toString()}clone(){return new yt(this.width,this.height,this.rowSize,this.bits.slice())}}let L=(()=>{class y extends g{static getNotFoundInstance(){return new y}}return y.kind="NotFoundException",y})();class Et extends O{constructor(i){super(i),this.luminances=Et.EMPTY,this.buckets=new Int32Array(Et.LUMINANCE_BUCKETS)}getBlackRow(i,o){let s=this.getLuminanceSource(),c=s.getWidth();o==null||o.getSize()<c?o=new ye(c):o.clear(),this.initArrays(c);let u=s.getRow(i,this.luminances),d=this.buckets;for(let p=0;p<c;p++)d[(u[p]&255)>>Et.LUMINANCE_SHIFT]++;let f=Et.estimateBlackPoint(d);if(c<3)for(let p=0;p<c;p++)(u[p]&255)<f&&o.set(p);else{let p=u[0]&255,m=u[1]&255;for(let C=1;C<c-1;C++){let w=u[C+1]&255;(m*4-p-w)/2<f&&o.set(C),p=m,m=w}}return o}getBlackMatrix(){let i=this.getLuminanceSource(),o=i.getWidth(),s=i.getHeight(),c=new yt(o,s);this.initArrays(o);let u=this.buckets;for(let p=1;p<5;p++){let m=Math.floor(s*p/5),C=i.getRow(m,this.luminances),w=Math.floor(o*4/5);for(let I=Math.floor(o/5);I<w;I++){let A=C[I]&255;u[A>>Et.LUMINANCE_SHIFT]++}}let d=Et.estimateBlackPoint(u),f=i.getMatrix();for(let p=0;p<s;p++){let m=p*o;for(let C=0;C<o;C++)(f[m+C]&255)<d&&c.set(C,p)}return c}createBinarizer(i){return new Et(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));let o=this.buckets;for(let s=0;s<Et.LUMINANCE_BUCKETS;s++)o[s]=0}static estimateBlackPoint(i){let o=i.length,s=0,c=0,u=0;for(let C=0;C<o;C++)i[C]>u&&(c=C,u=i[C]),i[C]>s&&(s=i[C]);let d=0,f=0;for(let C=0;C<o;C++){let w=C-c,I=i[C]*w*w;I>f&&(d=C,f=I)}if(c>d){let C=c;c=d,d=C}if(d-c<=o/16)throw new L;let p=d-1,m=-1;for(let C=d-1;C>c;C--){let w=C-c,I=w*w*(d-C)*(s-i[C]);I>m&&(p=C,m=I)}return p<<Et.LUMINANCE_SHIFT}}Et.LUMINANCE_BITS=5,Et.LUMINANCE_SHIFT=8-Et.LUMINANCE_BITS,Et.LUMINANCE_BUCKETS=1<<Et.LUMINANCE_BITS,Et.EMPTY=Uint8ClampedArray.from([0]);class ge extends Et{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let i=this.getLuminanceSource(),o=i.getWidth(),s=i.getHeight();if(o>=ge.MINIMUM_DIMENSION&&s>=ge.MINIMUM_DIMENSION){let c=i.getMatrix(),u=o>>ge.BLOCK_SIZE_POWER;(o&ge.BLOCK_SIZE_MASK)!==0&&u++;let d=s>>ge.BLOCK_SIZE_POWER;(s&ge.BLOCK_SIZE_MASK)!==0&&d++;let f=ge.calculateBlackPoints(c,u,d,o,s),p=new yt(o,s);ge.calculateThresholdForBlock(c,u,d,o,s,f,p),this.matrix=p}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new ge(i)}static calculateThresholdForBlock(i,o,s,c,u,d,f){let p=u-ge.BLOCK_SIZE,m=c-ge.BLOCK_SIZE;for(let C=0;C<s;C++){let w=C<<ge.BLOCK_SIZE_POWER;w>p&&(w=p);let I=ge.cap(C,2,s-3);for(let A=0;A<o;A++){let _=A<<ge.BLOCK_SIZE_POWER;_>m&&(_=m);let S=ge.cap(A,2,o-3),M=0;for(let V=-2;V<=2;V++){let q=d[I+V];M+=q[S-2]+q[S-1]+q[S]+q[S+1]+q[S+2]}let R=M/25;ge.thresholdBlock(i,_,w,R,c,f)}}}static cap(i,o,s){return i<o?o:i>s?s:i}static thresholdBlock(i,o,s,c,u,d){for(let f=0,p=s*u+o;f<ge.BLOCK_SIZE;f++,p+=u)for(let m=0;m<ge.BLOCK_SIZE;m++)(i[p+m]&255)<=c&&d.set(o+m,s+f)}static calculateBlackPoints(i,o,s,c,u){let d=u-ge.BLOCK_SIZE,f=c-ge.BLOCK_SIZE,p=new Array(s);for(let m=0;m<s;m++){p[m]=new Int32Array(o);let C=m<<ge.BLOCK_SIZE_POWER;C>d&&(C=d);for(let w=0;w<o;w++){let I=w<<ge.BLOCK_SIZE_POWER;I>f&&(I=f);let A=0,_=255,S=0;for(let R=0,V=C*c+I;R<ge.BLOCK_SIZE;R++,V+=c){for(let q=0;q<ge.BLOCK_SIZE;q++){let P=i[V+q]&255;A+=P,P<_&&(_=P),P>S&&(S=P)}if(S-_>ge.MIN_DYNAMIC_RANGE)for(R++,V+=c;R<ge.BLOCK_SIZE;R++,V+=c)for(let q=0;q<ge.BLOCK_SIZE;q++)A+=i[V+q]&255}let M=A>>ge.BLOCK_SIZE_POWER*2;if(S-_<=ge.MIN_DYNAMIC_RANGE&&(M=_/2,m>0&&w>0)){let R=(p[m-1][w]+2*p[m][w-1]+p[m-1][w-1])/4;_<R&&(M=R)}p[m][w]=M}}return p}}ge.BLOCK_SIZE_POWER=3,ge.BLOCK_SIZE=1<<ge.BLOCK_SIZE_POWER,ge.BLOCK_SIZE_MASK=ge.BLOCK_SIZE-1,ge.MINIMUM_DIMENSION=ge.BLOCK_SIZE*5,ge.MIN_DYNAMIC_RANGE=24;class Ko{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,s,c){throw new Qo("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Qo("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Qo("This luminance source does not support rotation by 45 degrees.")}toString(){let i=new Uint8ClampedArray(this.width),o=new Ue;for(let s=0;s<this.height;s++){let c=this.getRow(s,i);for(let u=0;u<this.width;u++){let d=c[u]&255,f;d<64?f="#":d<128?f="+":d<192?f=".":f=" ",o.append(f)}o.append(`
`)}return o.toString()}}class Dr extends Ko{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){let s=this.delegate.getRow(i,o),c=this.getWidth();for(let u=0;u<c;u++)s[u]=255-(s[u]&255);return s}getMatrix(){let i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(o);for(let c=0;c<o;c++)s[c]=255-(i[c]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,s,c){return new Dr(this.delegate.crop(i,o,s,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Dr(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Dr(this.delegate.rotateCounterClockwise45())}}class Ar extends Ko{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=Ar.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){let o=i.getContext("2d").getImageData(0,0,i.width,i.height);return Ar.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,s){let c=new Uint8ClampedArray(o*s);for(let u=0,d=0,f=i.length;u<f;u+=4,d++){let p;if(i[u+3]===0)p=255;else{let C=i[u],w=i[u+1],I=i[u+2];p=306*C+601*w+117*I+512>>10}c[d]=p}return c}getRow(i,o){if(i<0||i>=this.getHeight())throw new v("Requested row is outside the image: "+i);let s=this.getWidth(),c=i*s;return o===null?o=this.buffer.slice(c,c+s):(o.length<s&&(o=new Uint8ClampedArray(s)),o.set(this.buffer.slice(c,c+s))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,s,c){return super.crop(i,o,s,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){let o=this.getTempCanvasElement(),s=o.getContext("2d"),c=i*Ar.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),p=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return o.width=f,o.height=p,s.translate(f/2,p/2),s.rotate(c),s.drawImage(this.canvas,u/-2,d/-2),this.buffer=Ar.makeBufferFromCanvasImageData(o),this}invert(){return new Dr(this)}}Ar.DEGREE_TO_RADIANS=Math.PI/180;class gg{constructor(i,o,s){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var kt=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(y,i,o,s){function c(u){return u instanceof o?u:new o(function(d){d(u)})}return new(o||(o=Promise))(function(u,d){function f(C){try{m(s.next(C))}catch(w){d(w)}}function p(C){try{m(s.throw(C))}catch(w){d(w)}}function m(C){C.done?u(C.value):c(C.value).then(f,p)}m((s=s.apply(y,i||[])).next())})};class si{constructor(i,o=500,s){this.reader=i,this.timeBetweenScansMillis=o,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return kt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(let s of i){let c=s.kind==="video"?"videoinput":s.kind;if(c!=="videoinput")continue;let u=s.deviceId||s.id,d=s.label||`Video device ${o.length+1}`,f=s.groupId,p={deviceId:u,label:d,kind:c,groupId:f};o.push(p)}return o})}getVideoInputDevices(){return kt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new gg(o.deviceId,o.label))})}findDeviceById(i){return kt(this,void 0,void 0,function*(){let o=yield this.listVideoInputDevices();return o?o.find(s=>s.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return kt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return kt(this,void 0,void 0,function*(){this.reset();let s;i?s={deviceId:{exact:i}}:s={facingMode:"environment"};let c={video:s};return yield this.decodeOnceFromConstraints(c,o)})}decodeOnceFromConstraints(i,o){return kt(this,void 0,void 0,function*(){let s=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(s,o)})}decodeOnceFromStream(i,o){return kt(this,void 0,void 0,function*(){this.reset();let s=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(i,o,s){return kt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,s)})}decodeFromVideoDevice(i,o,s){return kt(this,void 0,void 0,function*(){let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};let u={video:c};return yield this.decodeFromConstraints(u,o,s)})}decodeFromConstraints(i,o,s){return kt(this,void 0,void 0,function*(){let c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(c,o,s)})}decodeFromStream(i,o,s){return kt(this,void 0,void 0,function*(){this.reset();let c=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(c,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return kt(this,void 0,void 0,function*(){let s=this.prepareVideoElement(o);return this.addVideoSource(s,i),this.videoElement=s,this.stream=i,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(i){return new Promise((o,s)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return kt(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){let s=document.getElementById(i);if(!s)throw new E(`element with id '${i}' not found`);if(s.nodeName.toLowerCase()!==o.toLowerCase())throw new E(`element with id '${i}' must be an ${o} element`);return s}decodeFromImage(i,o){if(!i&&!o)throw new E("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new E("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,s){if(i===void 0&&o===void 0)throw new E("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,s):this.decodeFromVideoElementContinuously(i,s)}decodeFromImageElement(i){if(!i)throw new E("An image element must be provided.");this.reset();let o=this.prepareImageElement(i);this.imageElement=o;let s;return this.isImageLoaded(o)?s=this.decodeOnce(o,!1,!0):s=this._decodeOnLoadImage(o),s}decodeFromVideoElement(i){let o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){let s=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(s,o)}_decodeFromVideoElementSetup(i){if(!i)throw new E("A video element must be provided.");this.reset();let o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new E("An URL must be provided.");this.reset();let o=this.prepareImageElement();this.imageElement=o;let s=this._decodeOnLoadImage(o);return o.src=i,s}decodeFromVideoUrl(i){if(!i)throw new E("An URL must be provided.");this.reset();let o=this.prepareVideoElement(),s=this.decodeFromVideoElement(o);return o.src=i,s}decodeFromVideoUrlContinuously(i,o){if(!i)throw new E("An URL must be provided.");this.reset();let s=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(s,o);return s.src=i,c}_decodeOnLoadImage(i){return new Promise((o,s)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,s),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return kt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return kt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,s=!0){this._stopAsyncDecode=!1;let c=(u,d)=>{if(this._stopAsyncDecode){d(new L("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let f=this.decode(i);u(f)}catch(f){let p=o&&f instanceof L,C=(f instanceof b||f instanceof z)&&s;if(p||C)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(f)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(i,o){this._stopContinuousDecode=!1;let s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let c=this.decode(i);o(c,null),setTimeout(s,this.timeBetweenScansMillis)}catch(c){o(null,c);let u=c instanceof b||c instanceof z,d=c instanceof L;(u||d)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(i){let o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,s){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,s=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){let o=this.getCaptureCanvasContext(i);this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);let s=this.getCaptureCanvas(i),c=new Ar(s),u=new ge(c);return new x(u)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){let s=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){let o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let o=document.createElement("canvas"),s,c;return typeof i<"u"&&(i instanceof HTMLVideoElement?(s=i.videoWidth,c=i.videoHeight):i instanceof HTMLImageElement&&(s=i.naturalWidth||i.width,c=i.naturalHeight||i.height)),o.style.width=s+"px",o.style.height=c+"px",o.width=s,o.height=c,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Bt{constructor(i,o,s=o==null?0:8*o.length,c,u,d=T.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=s,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=i,this.rawBytes=o,s==null?this.numBits=o==null?0:8*o.length:this.numBits=s,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=T.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){let o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){let s=new Array(o.length+i.length);T.arraycopy(o,0,s,0,o.length),T.arraycopy(i,0,s,o.length,i.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var mg=function(y){return y[y.AZTEC=0]="AZTEC",y[y.CODABAR=1]="CODABAR",y[y.CODE_39=2]="CODE_39",y[y.CODE_93=3]="CODE_93",y[y.CODE_128=4]="CODE_128",y[y.DATA_MATRIX=5]="DATA_MATRIX",y[y.EAN_8=6]="EAN_8",y[y.EAN_13=7]="EAN_13",y[y.ITF=8]="ITF",y[y.MAXICODE=9]="MAXICODE",y[y.PDF_417=10]="PDF_417",y[y.QR_CODE=11]="QR_CODE",y[y.RSS_14=12]="RSS_14",y[y.RSS_EXPANDED=13]="RSS_EXPANDED",y[y.UPC_A=14]="UPC_A",y[y.UPC_E=15]="UPC_E",y[y.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",y}(mg||{}),re=mg,yg=function(y){return y[y.OTHER=0]="OTHER",y[y.ORIENTATION=1]="ORIENTATION",y[y.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",y[y.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",y[y.ISSUE_NUMBER=4]="ISSUE_NUMBER",y[y.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",y[y.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",y[y.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",y[y.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",y[y.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",y[y.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",y}(yg||{}),vt=yg;class Jo{constructor(i,o,s,c,u=-1,d=-1){this.rawBytes=i,this.text=o,this.byteSegments=s,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class es{exp(i){return this.expTable[i]}log(i){if(i===0)throw new v;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class Wt{constructor(i,o){if(o.length===0)throw new v;this.field=i;let s=o.length;if(s>1&&o[0]===0){let c=1;for(;c<s&&o[c]===0;)c++;c===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-c),T.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);let o=this.coefficients,s;if(i===1){s=0;for(let d=0,f=o.length;d!==f;d++){let p=o[d];s=es.addOrSubtract(s,p)}return s}s=o[0];let c=o.length,u=this.field;for(let d=1;d<c;d++)s=es.addOrSubtract(u.multiply(i,s),o[d]);return s}addOrSubtract(i){if(!this.field.equals(i.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,s=i.coefficients;if(o.length>s.length){let d=o;o=s,s=d}let c=new Int32Array(s.length),u=s.length-o.length;T.arraycopy(s,0,c,0,u);for(let d=u;d<s.length;d++)c[d]=es.addOrSubtract(o[d-u],s[d]);return new Wt(this.field,c)}multiply(i){if(!this.field.equals(i.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();let o=this.coefficients,s=o.length,c=i.coefficients,u=c.length,d=new Int32Array(s+u-1),f=this.field;for(let p=0;p<s;p++){let m=o[p];for(let C=0;C<u;C++)d[p+C]=es.addOrSubtract(d[p+C],f.multiply(m,c[C]))}return new Wt(f,d)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;let o=this.coefficients.length,s=this.field,c=new Int32Array(o),u=this.coefficients;for(let d=0;d<o;d++)c[d]=s.multiply(u[d],i);return new Wt(s,c)}multiplyByMonomial(i,o){if(i<0)throw new v;if(o===0)return this.field.getZero();let s=this.coefficients,c=s.length,u=new Int32Array(c+i),d=this.field;for(let f=0;f<c;f++)u[f]=d.multiply(s[f],o);return new Wt(d,u)}divide(i){if(!this.field.equals(i.field))throw new v("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new v("Divide by 0");let o=this.field,s=o.getZero(),c=this,u=i.getCoefficient(i.getDegree()),d=o.inverse(u);for(;c.getDegree()>=i.getDegree()&&!c.isZero();){let f=c.getDegree()-i.getDegree(),p=o.multiply(c.getCoefficient(c.getDegree()),d),m=i.multiplyByMonomial(f,p),C=o.buildMonomial(f,p);s=s.addOrSubtract(C),c=c.addOrSubtract(m)}return[s,c]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let s=this.getCoefficient(o);if(s!==0){if(s<0?(i+=" - ",s=-s):i.length>0&&(i+=" + "),o===0||s!==1){let c=this.field.log(s);c===0?i+="1":c===1?i+="a":(i+="a^",i+=c)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}let Yu=(()=>{class y extends g{}return y.kind="ArithmeticException",y})();class Oe extends es{constructor(i,o,s){super(),this.primitive=i,this.size=o,this.generatorBase=s;let c=new Int32Array(o),u=1;for(let f=0;f<o;f++)c[f]=u,u*=2,u>=o&&(u^=i,u&=o-1);this.expTable=c;let d=new Int32Array(o);for(let f=0;f<o-1;f++)d[c[f]]=f;this.logTable=d,this.zero=new Wt(this,Int32Array.from([0])),this.one=new Wt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new v;if(o===0)return this.zero;let s=new Int32Array(i+1);return s[0]=o,new Wt(this,s)}inverse(i){if(i===0)throw new Yu;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+U.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Oe.AZTEC_DATA_12=new Oe(4201,4096,1),Oe.AZTEC_DATA_10=new Oe(1033,1024,1),Oe.AZTEC_DATA_6=new Oe(67,64,1),Oe.AZTEC_PARAM=new Oe(19,16,1),Oe.QR_CODE_FIELD_256=new Oe(285,256,0),Oe.DATA_MATRIX_FIELD_256=new Oe(301,256,1),Oe.AZTEC_DATA_8=Oe.DATA_MATRIX_FIELD_256,Oe.MAXICODE_FIELD_64=Oe.AZTEC_DATA_6;let ts=(()=>{class y extends g{}return y.kind="ReedSolomonException",y})(),tr=(()=>{class y extends g{}return y.kind="IllegalStateException",y})();class ns{constructor(i){this.field=i}decode(i,o){let s=this.field,c=new Wt(s,i),u=new Int32Array(o),d=!0;for(let A=0;A<o;A++){let _=c.evaluateAt(s.exp(A+s.getGeneratorBase()));u[u.length-1-A]=_,_!==0&&(d=!1)}if(d)return;let f=new Wt(s,u),p=this.runEuclideanAlgorithm(s.buildMonomial(o,1),f,o),m=p[0],C=p[1],w=this.findErrorLocations(m),I=this.findErrorMagnitudes(C,w);for(let A=0;A<w.length;A++){let _=i.length-1-s.log(w[A]);if(_<0)throw new ts("Bad error location");i[_]=Oe.addOrSubtract(i[_],I[A])}}runEuclideanAlgorithm(i,o,s){if(i.getDegree()<o.getDegree()){let A=i;i=o,o=A}let c=this.field,u=i,d=o,f=c.getZero(),p=c.getOne();for(;d.getDegree()>=(s/2|0);){let A=u,_=f;if(u=d,f=p,u.isZero())throw new ts("r_{i-1} was zero");d=A;let S=c.getZero(),M=u.getCoefficient(u.getDegree()),R=c.inverse(M);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let V=d.getDegree()-u.getDegree(),q=c.multiply(d.getCoefficient(d.getDegree()),R);S=S.addOrSubtract(c.buildMonomial(V,q)),d=d.addOrSubtract(u.multiplyByMonomial(V,q))}if(p=S.multiply(f).addOrSubtract(_),d.getDegree()>=u.getDegree())throw new tr("Division algorithm failed to reduce polynomial?")}let m=p.getCoefficient(0);if(m===0)throw new ts("sigmaTilde(0) was zero");let C=c.inverse(m),w=p.multiplyScalar(C),I=d.multiplyScalar(C);return[w,I]}findErrorLocations(i){let o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);let s=new Int32Array(o),c=0,u=this.field;for(let d=1;d<u.getSize()&&c<o;d++)i.evaluateAt(d)===0&&(s[c]=u.inverse(d),c++);if(c!==o)throw new ts("Error locator degree does not match number of roots");return s}findErrorMagnitudes(i,o){let s=o.length,c=new Int32Array(s),u=this.field;for(let d=0;d<s;d++){let f=u.inverse(o[d]),p=1;for(let m=0;m<s;m++)if(d!==m){let C=u.multiply(o[m],f),w=(C&1)===0?C|1:C&-2;p=u.multiply(p,w)}c[d]=u.multiply(i.evaluateAt(f),u.inverse(p)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],f))}return c}}var Rt=function(y){return y[y.UPPER=0]="UPPER",y[y.LOWER=1]="LOWER",y[y.MIXED=2]="MIXED",y[y.DIGIT=3]="DIGIT",y[y.PUNCT=4]="PUNCT",y[y.BINARY=5]="BINARY",y}(Rt||{});let qu=(()=>{class y{decode(o){this.ddata=o;let s=o.getBits(),c=this.extractBits(s),u=this.correctBits(c),d=y.convertBoolArrayToByteArray(u),f=y.getEncodedData(u),p=new Jo(d,f,null,null);return p.setNumBits(u.length),p}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let s=o.length,c=Rt.UPPER,u=Rt.UPPER,d="",f=0;for(;f<s;)if(u===Rt.BINARY){if(s-f<5)break;let p=y.readCode(o,f,5);if(f+=5,p===0){if(s-f<11)break;p=y.readCode(o,f,11)+31,f+=11}for(let m=0;m<p;m++){if(s-f<8){f=s;break}let C=y.readCode(o,f,8);d+=ce.castAsNonUtf8Char(C),f+=8}u=c}else{let p=u===Rt.DIGIT?4:5;if(s-f<p)break;let m=y.readCode(o,f,p);f+=p;let C=y.getCharacter(u,m);C.startsWith("CTRL_")?(c=u,u=y.getTable(C.charAt(5)),C.charAt(6)==="L"&&(c=u)):(d+=C,u=c)}return d}static getTable(o){switch(o){case"L":return Rt.LOWER;case"P":return Rt.PUNCT;case"M":return Rt.MIXED;case"D":return Rt.DIGIT;case"B":return Rt.BINARY;case"U":default:return Rt.UPPER}}static getCharacter(o,s){switch(o){case Rt.UPPER:return y.UPPER_TABLE[s];case Rt.LOWER:return y.LOWER_TABLE[s];case Rt.MIXED:return y.MIXED_TABLE[s];case Rt.PUNCT:return y.PUNCT_TABLE[s];case Rt.DIGIT:return y.DIGIT_TABLE[s];default:throw new tr("Bad table")}}correctBits(o){let s,c;this.ddata.getNbLayers()<=2?(c=6,s=Oe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,s=Oe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,s=Oe.AZTEC_DATA_10):(c=12,s=Oe.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=o.length/c;if(d<u)throw new z;let f=o.length%c,p=new Int32Array(d);for(let A=0;A<d;A++,f+=c)p[A]=y.readCode(o,f,c);try{new ns(s).decode(p,d-u)}catch(A){throw new z(A)}let m=(1<<c)-1,C=0;for(let A=0;A<u;A++){let _=p[A];if(_===0||_===m)throw new z;(_===1||_===m-1)&&C++}let w=new Array(u*c-C),I=0;for(let A=0;A<u;A++){let _=p[A];if(_===1||_===m-1)w.fill(_>1,I,I+c-1),I+=c-1;else for(let S=c-1;S>=0;--S)w[I++]=(_&1<<S)!==0}return w}extractBits(o){let s=this.ddata.isCompact(),c=this.ddata.getNbLayers(),u=(s?11:14)+c*4,d=new Int32Array(u),f=new Array(this.totalBitsInLayer(c,s));if(s)for(let p=0;p<d.length;p++)d[p]=p;else{let p=u+1+2*U.truncDivision(U.truncDivision(u,2)-1,15),m=u/2,C=U.truncDivision(p,2);for(let w=0;w<m;w++){let I=w+U.truncDivision(w,15);d[m-w-1]=C-I-1,d[m+w]=C+I+1}}for(let p=0,m=0;p<c;p++){let C=(c-p)*4+(s?9:12),w=p*2,I=u-1-w;for(let A=0;A<C;A++){let _=A*2;for(let S=0;S<2;S++)f[m+_+S]=o.get(d[w+S],d[w+A]),f[m+2*C+_+S]=o.get(d[w+A],d[I-S]),f[m+4*C+_+S]=o.get(d[I-S],d[I-A]),f[m+6*C+_+S]=o.get(d[I-A],d[w+S])}m+=C*8}return f}static readCode(o,s,c){let u=0;for(let d=s;d<s+c;d++)u<<=1,o[d]&&(u|=1);return u}static readByte(o,s){let c=o.length-s;return c>=8?y.readCode(o,s,8):y.readCode(o,s,c)<<8-c}static convertBoolArrayToByteArray(o){let s=new Uint8Array((o.length+7)/8);for(let c=0;c<s.length;c++)s[c]=y.readByte(o,8*c);return s}totalBitsInLayer(o,s){return((s?88:112)+16*o)*o}}return y.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],y.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],y.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],y.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],y.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],y})();class Ne{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,s,c){let u=i-s,d=o-c;return Math.sqrt(u*u+d*d)}static sum(i){let o=0;for(let s=0,c=i.length;s!==c;s++){let u=i[s];o+=u}return o}}class Ba{static floatToIntBits(i){return i}}Ba.MAX_VALUE=Number.MAX_SAFE_INTEGER;class J{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof J){let o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*Ba.floatToIntBits(this.x)+Ba.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){let o=this.distance(i[0],i[1]),s=this.distance(i[1],i[2]),c=this.distance(i[0],i[2]),u,d,f;if(s>=o&&s>=c?(d=i[0],u=i[1],f=i[2]):c>=s&&c>=o?(d=i[1],u=i[0],f=i[2]):(d=i[2],u=i[0],f=i[1]),this.crossProductZ(u,d,f)<0){let p=u;u=f,f=p}i[0]=u,i[1]=d,i[2]=f}static distance(i,o){return Ne.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,s){let c=o.x,u=o.y;return(s.x-c)*(i.y-u)-(s.y-u)*(i.x-c)}}class Va{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Eg extends Va{constructor(i,o,s,c,u){super(i,o),this.compact=s,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let ja=(()=>{class y{constructor(o,s,c,u){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),s==null&&(s=y.INIT_SIZE),c==null&&(c=o.getWidth()/2|0),u==null&&(u=o.getHeight()/2|0);let d=s/2|0;if(this.leftInit=c-d,this.rightInit=c+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new L}detect(){let o=this.leftInit,s=this.rightInit,c=this.upInit,u=this.downInit,d=!1,f=!0,p=!1,m=!1,C=!1,w=!1,I=!1,A=this.width,_=this.height;for(;f;){f=!1;let S=!0;for(;(S||!m)&&s<A;)S=this.containsBlackPoint(c,u,s,!1),S?(s++,f=!0,m=!0):m||s++;if(s>=A){d=!0;break}let M=!0;for(;(M||!C)&&u<_;)M=this.containsBlackPoint(o,s,u,!0),M?(u++,f=!0,C=!0):C||u++;if(u>=_){d=!0;break}let R=!0;for(;(R||!w)&&o>=0;)R=this.containsBlackPoint(c,u,o,!1),R?(o--,f=!0,w=!0):w||o--;if(o<0){d=!0;break}let V=!0;for(;(V||!I)&&c>=0;)V=this.containsBlackPoint(o,s,c,!0),V?(c--,f=!0,I=!0):I||c--;if(c<0){d=!0;break}f&&(p=!0)}if(!d&&p){let S=s-o,M=null;for(let P=1;M===null&&P<S;P++)M=this.getBlackPointOnSegment(o,u-P,o+P,u);if(M==null)throw new L;let R=null;for(let P=1;R===null&&P<S;P++)R=this.getBlackPointOnSegment(o,c+P,o+P,c);if(R==null)throw new L;let V=null;for(let P=1;V===null&&P<S;P++)V=this.getBlackPointOnSegment(s,c+P,s-P,c);if(V==null)throw new L;let q=null;for(let P=1;q===null&&P<S;P++)q=this.getBlackPointOnSegment(s,u-P,s-P,u);if(q==null)throw new L;return this.centerEdges(q,M,V,R)}else throw new L}getBlackPointOnSegment(o,s,c,u){let d=Ne.round(Ne.distance(o,s,c,u)),f=(c-o)/d,p=(u-s)/d,m=this.image;for(let C=0;C<d;C++){let w=Ne.round(o+C*f),I=Ne.round(s+C*p);if(m.get(w,I))return new J(w,I)}return null}centerEdges(o,s,c,u){let d=o.getX(),f=o.getY(),p=s.getX(),m=s.getY(),C=c.getX(),w=c.getY(),I=u.getX(),A=u.getY(),_=y.CORR;return d<this.width/2?[new J(I-_,A+_),new J(p+_,m+_),new J(C-_,w-_),new J(d+_,f-_)]:[new J(I+_,A+_),new J(p+_,m-_),new J(C-_,w+_),new J(d-_,f-_)]}containsBlackPoint(o,s,c,u){let d=this.image;if(u){for(let f=o;f<=s;f++)if(d.get(f,c))return!0}else for(let f=o;f<=s;f++)if(d.get(c,f))return!0;return!1}}return y.INIT_SIZE=10,y.CORR=1,y})();class Zu{static checkAndNudgePoints(i,o){let s=i.getWidth(),c=i.getHeight(),u=!0;for(let d=0;d<o.length&&u;d+=2){let f=Math.floor(o[d]),p=Math.floor(o[d+1]);if(f<-1||f>s||p<-1||p>c)throw new L;u=!1,f===-1?(o[d]=0,u=!0):f===s&&(o[d]=s-1,u=!0),p===-1?(o[d+1]=0,u=!0):p===c&&(o[d+1]=c-1,u=!0)}u=!0;for(let d=o.length-2;d>=0&&u;d-=2){let f=Math.floor(o[d]),p=Math.floor(o[d+1]);if(f<-1||f>s||p<-1||p>c)throw new L;u=!1,f===-1?(o[d]=0,u=!0):f===s&&(o[d]=s-1,u=!0),p===-1?(o[d+1]=0,u=!0):p===c&&(o[d+1]=c-1,u=!0)}}}class bn{constructor(i,o,s,c,u,d,f,p,m){this.a11=i,this.a21=o,this.a31=s,this.a12=c,this.a22=u,this.a32=d,this.a13=f,this.a23=p,this.a33=m}static quadrilateralToQuadrilateral(i,o,s,c,u,d,f,p,m,C,w,I,A,_,S,M){let R=bn.quadrilateralToSquare(i,o,s,c,u,d,f,p);return bn.squareToQuadrilateral(m,C,w,I,A,_,S,M).times(R)}transformPoints(i){let o=i.length,s=this.a11,c=this.a12,u=this.a13,d=this.a21,f=this.a22,p=this.a23,m=this.a31,C=this.a32,w=this.a33;for(let I=0;I<o;I+=2){let A=i[I],_=i[I+1],S=u*A+p*_+w;i[I]=(s*A+d*_+m)/S,i[I+1]=(c*A+f*_+C)/S}}transformPointsWithValues(i,o){let s=this.a11,c=this.a12,u=this.a13,d=this.a21,f=this.a22,p=this.a23,m=this.a31,C=this.a32,w=this.a33,I=i.length;for(let A=0;A<I;A++){let _=i[A],S=o[A],M=u*_+p*S+w;i[A]=(s*_+d*S+m)/M,o[A]=(c*_+f*S+C)/M}}static squareToQuadrilateral(i,o,s,c,u,d,f,p){let m=i-s+u-f,C=o-c+d-p;if(m===0&&C===0)return new bn(s-i,u-s,i,c-o,d-c,o,0,0,1);{let w=s-u,I=f-u,A=c-d,_=p-d,S=w*_-I*A,M=(m*_-I*C)/S,R=(w*C-m*A)/S;return new bn(s-i+M*s,f-i+R*f,i,c-o+M*c,p-o+R*p,o,M,R,1)}}static quadrilateralToSquare(i,o,s,c,u,d,f,p){return bn.squareToQuadrilateral(i,o,s,c,u,d,f,p).buildAdjoint()}buildAdjoint(){return new bn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new bn(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class vg extends Zu{sampleGrid(i,o,s,c,u,d,f,p,m,C,w,I,A,_,S,M,R,V,q){let P=bn.quadrilateralToQuadrilateral(c,u,d,f,p,m,C,w,I,A,_,S,M,R,V,q);return this.sampleGridWithTransform(i,o,s,P)}sampleGridWithTransform(i,o,s,c){if(o<=0||s<=0)throw new L;let u=new yt(o,s),d=new Float32Array(2*o);for(let f=0;f<s;f++){let p=d.length,m=f+.5;for(let C=0;C<p;C+=2)d[C]=C/2+.5,d[C+1]=m;c.transformPoints(d),Zu.checkAndNudgePoints(i,d);try{for(let C=0;C<p;C+=2)i.get(Math.floor(d[C]),Math.floor(d[C+1]))&&u.set(C/2,f)}catch{throw new L}}return u}}class br{static setGridSampler(i){br.gridSampler=i}static getInstance(){return br.gridSampler}}br.gridSampler=new vg;class Vt{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new J(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Cg{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),s=this.getBullsEyeCorners(o);if(i){let d=s[0];s[0]=s[2],s[2]=d}this.extractParameters(s);let c=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),u=this.getMatrixCornerPoints(s);return new Eg(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new L;let o=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(s,o);let c=0;for(let d=0;d<4;d++){let f=s[(this.shift+d)%4];this.compact?(c<<=7,c+=f>>1&127):(c<<=10,c+=(f>>2&992)+(f>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(i,o){let s=0;i.forEach((c,u,d)=>{let f=(c>>o-2<<1)+(c&1);s=(s<<3)+f}),s=((s&1)<<11)+(s>>1);for(let c=0;c<4;c++)if(U.bitCount(s^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new L}getCorrectedParameterData(i,o){let s,c;o?(s=7,c=2):(s=10,c=4);let u=s-c,d=new Int32Array(s);for(let p=s-1;p>=0;--p)d[p]=i&15,i>>=4;try{new ns(Oe.AZTEC_PARAM).decode(d,u)}catch{throw new L}let f=0;for(let p=0;p<c;p++)f=(f<<4)+d[p];return f}getBullsEyeCorners(i){let o=i,s=i,c=i,u=i,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let w=this.getFirstDifferent(o,d,1,-1),I=this.getFirstDifferent(s,d,1,1),A=this.getFirstDifferent(c,d,-1,1),_=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let S=this.distancePoint(_,w)*this.nbCenterLayers/(this.distancePoint(u,o)*(this.nbCenterLayers+2));if(S<.75||S>1.25||!this.isWhiteOrBlackRectangle(w,I,A,_))break}o=w,s=I,c=A,u=_,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new L;this.compact=this.nbCenterLayers===5;let f=new J(o.getX()+.5,o.getY()-.5),p=new J(s.getX()+.5,s.getY()+.5),m=new J(c.getX()-.5,c.getY()+.5),C=new J(u.getX()-.5,u.getY()-.5);return this.expandSquare([f,p,m,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,s,c;try{let f=new ja(this.image).detect();i=f[0],o=f[1],s=f[2],c=f[3]}catch{let p=this.image.getWidth()/2,m=this.image.getHeight()/2;i=this.getFirstDifferent(new Vt(p+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Vt(p+7,m+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new Vt(p-7,m+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Vt(p-7,m-7),!1,-1,-1).toResultPoint()}let u=Ne.round((i.getX()+c.getX()+o.getX()+s.getX())/4),d=Ne.round((i.getY()+c.getY()+o.getY()+s.getY())/4);try{let f=new ja(this.image,15,u,d).detect();i=f[0],o=f[1],s=f[2],c=f[3]}catch{i=this.getFirstDifferent(new Vt(u+7,d-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Vt(u+7,d+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new Vt(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Vt(u-7,d-7),!1,-1,-1).toResultPoint()}return u=Ne.round((i.getX()+c.getX()+o.getX()+s.getX())/4),d=Ne.round((i.getY()+c.getY()+o.getY()+s.getY())/4),new Vt(u,d)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,s,c,u){let d=br.getInstance(),f=this.getDimension(),p=f/2-this.nbCenterLayers,m=f/2+this.nbCenterLayers;return d.sampleGrid(i,f,f,p,p,m,p,m,m,p,m,o.getX(),o.getY(),s.getX(),s.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(i,o,s){let c=0,u=this.distanceResultPoint(i,o),d=u/s,f=i.getX(),p=i.getY(),m=d*(o.getX()-i.getX())/u,C=d*(o.getY()-i.getY())/u;for(let w=0;w<s;w++)this.image.get(Ne.round(f+w*m),Ne.round(p+w*C))&&(c|=1<<s-w-1);return c}isWhiteOrBlackRectangle(i,o,s,c){let u=3;i=new Vt(i.getX()-u,i.getY()+u),o=new Vt(o.getX()-u,o.getY()-u),s=new Vt(s.getX()+u,s.getY()-u),c=new Vt(c.getX()+u,c.getY()+u);let d=this.getColor(c,i);if(d===0)return!1;let f=this.getColor(i,o);return f!==d||(f=this.getColor(o,s),f!==d)?!1:(f=this.getColor(s,c),f===d)}getColor(i,o){let s=this.distancePoint(i,o),c=(o.getX()-i.getX())/s,u=(o.getY()-i.getY())/s,d=0,f=i.getX(),p=i.getY(),m=this.image.get(i.getX(),i.getY()),C=Math.ceil(s);for(let I=0;I<C;I++)f+=c,p+=u,this.image.get(Ne.round(f),Ne.round(p))!==m&&d++;let w=d/s;return w>.1&&w<.9?0:w<=.1===m?1:-1}getFirstDifferent(i,o,s,c){let u=i.getX()+s,d=i.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===o;)u+=s,d+=c;for(u-=s,d-=c;this.isValid(u,d)&&this.image.get(u,d)===o;)u+=s;for(u-=s;this.isValid(u,d)&&this.image.get(u,d)===o;)d+=c;return d-=c,new Vt(u,d)}expandSquare(i,o,s){let c=s/(2*o),u=i[0].getX()-i[2].getX(),d=i[0].getY()-i[2].getY(),f=(i[0].getX()+i[2].getX())/2,p=(i[0].getY()+i[2].getY())/2,m=new J(f+c*u,p+c*d),C=new J(f-c*u,p-c*d);u=i[1].getX()-i[3].getX(),d=i[1].getY()-i[3].getY(),f=(i[1].getX()+i[3].getX())/2,p=(i[1].getY()+i[3].getY())/2;let w=new J(f+c*u,p+c*d),I=new J(f-c*u,p-c*d);return[m,w,C,I]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=Ne.round(i.getX()),s=Ne.round(i.getY());return this.isValid(o,s)}distancePoint(i,o){return Ne.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return Ne.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(U.truncDivision(this.nbLayers-4,8)+1)+15}}class Ua{decode(i,o=null){let s=null,c=new Cg(i.getBlackMatrix()),u=null,d=null;try{let C=c.detectMirror(!1);u=C.getPoints(),this.reportFoundResultPoints(o,u),d=new qu().decode(C)}catch(C){s=C}if(d==null)try{let C=c.detectMirror(!0);u=C.getPoints(),this.reportFoundResultPoints(o,u),d=new qu().decode(C)}catch(C){throw s??C}let f=new Bt(d.getText(),d.getRawBytes(),d.getNumBits(),u,re.AZTEC,T.currentTimeMillis()),p=d.getByteSegments();p!=null&&f.putMetadata(vt.BYTE_SEGMENTS,p);let m=d.getECLevel();return m!=null&&f.putMetadata(vt.ERROR_CORRECTION_LEVEL,m),f}reportFoundResultPoints(i,o){if(i!=null){let s=i.get(Ce.NEED_RESULT_POINT_CALLBACK);s!=null&&o.forEach((c,u,d)=>{s.foundPossibleResultPoint(c)})}}reset(){}}class Qv extends si{constructor(i=500){super(new Ua,i)}}class it{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(Ce.TRY_HARDER)===!0&&i.isRotateSupported()){let u=i.rotateCounterClockwise(),d=this.doDecode(u,o),f=d.getResultMetadata(),p=270;f!==null&&f.get(vt.ORIENTATION)===!0&&(p=p+f.get(vt.ORIENTATION)%360),d.putMetadata(vt.ORIENTATION,p);let m=d.getResultPoints();if(m!==null){let C=u.getHeight();for(let w=0;w<m.length;w++)m[w]=new J(C-m[w].getY()-1,m[w].getX())}return d}else throw new L}}reset(){}doDecode(i,o){let s=i.getWidth(),c=i.getHeight(),u=new ye(s),d=o&&o.get(Ce.TRY_HARDER)===!0,f=Math.max(1,c>>(d?8:5)),p;d?p=c:p=15;let m=Math.trunc(c/2);for(let C=0;C<p;C++){let w=Math.trunc((C+1)/2),I=(C&1)===0,A=m+f*(I?w:-w);if(A<0||A>=c)break;try{u=i.getBlackRow(A,u)}catch{continue}for(let _=0;_<2;_++){if(_===1&&(u.reverse(),o&&o.get(Ce.NEED_RESULT_POINT_CALLBACK)===!0)){let S=new Map;o.forEach((M,R)=>S.set(R,M)),S.delete(Ce.NEED_RESULT_POINT_CALLBACK),o=S}try{let S=this.decodeRow(A,u,o);if(_===1){S.putMetadata(vt.ORIENTATION,180);let M=S.getResultPoints();M!==null&&(M[0]=new J(s-M[0].getX()-1,M[0].getY()),M[1]=new J(s-M[1].getX()-1,M[1].getY()))}return S}catch{}}}throw new L}static recordPattern(i,o,s){let c=s.length;for(let m=0;m<c;m++)s[m]=0;let u=i.getSize();if(o>=u)throw new L;let d=!i.get(o),f=0,p=o;for(;p<u;){if(i.get(p)!==d)s[f]++;else{if(++f===c)break;s[f]=1,d=!d}p++}if(!(f===c||f===c-1&&p===u))throw new L}static recordPatternInReverse(i,o,s){let c=s.length,u=i.get(o);for(;o>0&&c>=0;)i.get(--o)!==u&&(c--,u=!u);if(c>=0)throw new L;it.recordPattern(i,o+1,s)}static patternMatchVariance(i,o,s){let c=i.length,u=0,d=0;for(let m=0;m<c;m++)u+=i[m],d+=o[m];if(u<d)return Number.POSITIVE_INFINITY;let f=u/d;s*=f;let p=0;for(let m=0;m<c;m++){let C=i[m],w=o[m]*f,I=C>w?C-w:w-C;if(I>s)return Number.POSITIVE_INFINITY;p+=I}return p/u}}class Y extends it{static findStartPattern(i){let o=i.getSize(),s=i.getNextSet(0),c=0,u=Int32Array.from([0,0,0,0,0,0]),d=s,f=!1,p=6;for(let m=s;m<o;m++)if(i.get(m)!==f)u[c]++;else{if(c===p-1){let C=Y.MAX_AVG_VARIANCE,w=-1;for(let I=Y.CODE_START_A;I<=Y.CODE_START_C;I++){let A=it.patternMatchVariance(u,Y.CODE_PATTERNS[I],Y.MAX_INDIVIDUAL_VARIANCE);A<C&&(C=A,w=I)}if(w>=0&&i.isRange(Math.max(0,d-(m-d)/2),d,!1))return Int32Array.from([d,m,w]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,f=!f}throw new L}static decodeCode(i,o,s){it.recordPattern(i,s,o);let c=Y.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<Y.CODE_PATTERNS.length;d++){let f=Y.CODE_PATTERNS[d],p=this.patternMatchVariance(o,f,Y.MAX_INDIVIDUAL_VARIANCE);p<c&&(c=p,u=d)}if(u>=0)return u;throw new L}decodeRow(i,o,s){let c=s&&s.get(Ce.ASSUME_GS1)===!0,u=Y.findStartPattern(o),d=u[2],f=0,p=new Uint8Array(20);p[f++]=d;let m;switch(d){case Y.CODE_START_A:m=Y.CODE_CODE_A;break;case Y.CODE_START_B:m=Y.CODE_CODE_B;break;case Y.CODE_START_C:m=Y.CODE_CODE_C;break;default:throw new z}let C=!1,w=!1,I="",A=u[0],_=u[1],S=Int32Array.from([0,0,0,0,0,0]),M=0,R=0,V=d,q=0,P=!0,we=!1,de=!1;for(;!C;){let no=w;switch(w=!1,M=R,R=Y.decodeCode(o,S,_),p[f++]=R,R!==Y.CODE_STOP&&(P=!0),R!==Y.CODE_STOP&&(q++,V+=q*R),A=_,_+=S.reduce((PC,LC)=>PC+LC,0),R){case Y.CODE_START_A:case Y.CODE_START_B:case Y.CODE_START_C:throw new z}switch(m){case Y.CODE_CODE_A:if(R<64)de===we?I+=String.fromCharCode(32+R):I+=String.fromCharCode(32+R+128),de=!1;else if(R<96)de===we?I+=String.fromCharCode(R-64):I+=String.fromCharCode(R+64),de=!1;else switch(R!==Y.CODE_STOP&&(P=!1),R){case Y.CODE_FNC_1:c&&(I.length===0?I+="]C1":I+="");break;case Y.CODE_FNC_2:case Y.CODE_FNC_3:break;case Y.CODE_FNC_4_A:!we&&de?(we=!0,de=!1):we&&de?(we=!1,de=!1):de=!0;break;case Y.CODE_SHIFT:w=!0,m=Y.CODE_CODE_B;break;case Y.CODE_CODE_B:m=Y.CODE_CODE_B;break;case Y.CODE_CODE_C:m=Y.CODE_CODE_C;break;case Y.CODE_STOP:C=!0;break}break;case Y.CODE_CODE_B:if(R<96)de===we?I+=String.fromCharCode(32+R):I+=String.fromCharCode(32+R+128),de=!1;else switch(R!==Y.CODE_STOP&&(P=!1),R){case Y.CODE_FNC_1:c&&(I.length===0?I+="]C1":I+="");break;case Y.CODE_FNC_2:case Y.CODE_FNC_3:break;case Y.CODE_FNC_4_B:!we&&de?(we=!0,de=!1):we&&de?(we=!1,de=!1):de=!0;break;case Y.CODE_SHIFT:w=!0,m=Y.CODE_CODE_A;break;case Y.CODE_CODE_A:m=Y.CODE_CODE_A;break;case Y.CODE_CODE_C:m=Y.CODE_CODE_C;break;case Y.CODE_STOP:C=!0;break}break;case Y.CODE_CODE_C:if(R<100)R<10&&(I+="0"),I+=R;else switch(R!==Y.CODE_STOP&&(P=!1),R){case Y.CODE_FNC_1:c&&(I.length===0?I+="]C1":I+="");break;case Y.CODE_CODE_A:m=Y.CODE_CODE_A;break;case Y.CODE_CODE_B:m=Y.CODE_CODE_B;break;case Y.CODE_STOP:C=!0;break}break}no&&(m=m===Y.CODE_CODE_A?Y.CODE_CODE_B:Y.CODE_CODE_A)}let Yt=_-A;if(_=o.getNextUnset(_),!o.isRange(_,Math.min(o.getSize(),_+(_-A)/2),!1))throw new L;if(V-=q*M,V%103!==M)throw new b;let Nn=I.length;if(Nn===0)throw new L;Nn>0&&P&&(m===Y.CODE_CODE_C?I=I.substring(0,Nn-2):I=I.substring(0,Nn-1));let qt=(u[1]+u[0])/2,Ge=A+Yt/2,_t=p.length,sn=new Uint8Array(_t);for(let no=0;no<_t;no++)sn[no]=p[no];let to=[new J(qt,i),new J(Ge,i)];return new Bt(I,sn,0,to,re.CODE_128,new Date().getTime())}}Y.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Y.MAX_AVG_VARIANCE=.25,Y.MAX_INDIVIDUAL_VARIANCE=.7,Y.CODE_SHIFT=98,Y.CODE_CODE_C=99,Y.CODE_CODE_B=100,Y.CODE_CODE_A=101,Y.CODE_FNC_1=102,Y.CODE_FNC_2=97,Y.CODE_FNC_3=96,Y.CODE_FNC_4_A=101,Y.CODE_FNC_4_B=100,Y.CODE_START_A=103,Y.CODE_START_B=104,Y.CODE_START_C=105,Y.CODE_STOP=106;let Xu=(()=>{class y extends it{constructor(o=!1,s=!1){super(),this.usingCheckDigit=o,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,s,c){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=y.findAsteriskPattern(s,u),f=s.getNextSet(d[1]),p=s.getSize(),m,C;do{y.recordPattern(s,f,u);let M=y.toNarrowWidePattern(u);if(M<0)throw new L;m=y.patternToChar(M),this.decodeRowResult+=m,C=f;for(let R of u)f+=R;f=s.getNextSet(f)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let w=0;for(let M of u)w+=M;let I=f-C-w;if(f!==p&&I*2<w)throw new L;if(this.usingCheckDigit){let M=this.decodeRowResult.length-1,R=0;for(let V=0;V<M;V++)R+=y.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(V));if(this.decodeRowResult.charAt(M)!==y.ALPHABET_STRING.charAt(R%43))throw new b;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new L;let A;this.extendedMode?A=y.decodeExtended(this.decodeRowResult):A=this.decodeRowResult;let _=(d[1]+d[0])/2,S=C+w/2;return new Bt(A,null,0,[new J(_,o),new J(S,o)],re.CODE_39,new Date().getTime())}static findAsteriskPattern(o,s){let c=o.getSize(),u=o.getNextSet(0),d=0,f=u,p=!1,m=s.length;for(let C=u;C<c;C++)if(o.get(C)!==p)s[d]++;else{if(d===m-1){if(this.toNarrowWidePattern(s)===y.ASTERISK_ENCODING&&o.isRange(Math.max(0,f-Math.floor((C-f)/2)),f,!1))return[f,C];f+=s[0]+s[1],s.copyWithin(0,2,2+d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,p=!p}throw new L}static toNarrowWidePattern(o){let s=o.length,c=0,u;do{let d=2147483647;for(let m of o)m<d&&m>c&&(d=m);c=d,u=0;let f=0,p=0;for(let m=0;m<s;m++){let C=o[m];C>c&&(p|=1<<s-1-m,u++,f+=C)}if(u===3){for(let m=0;m<s&&u>0;m++){let C=o[m];if(C>c&&(u--,C*2>=f))return-1}return p}}while(u>3);return-1}static patternToChar(o){for(let s=0;s<y.CHARACTER_ENCODINGS.length;s++)if(y.CHARACTER_ENCODINGS[s]===o)return y.ALPHABET_STRING.charAt(s);if(o===y.ASTERISK_ENCODING)return"*";throw new L}static decodeExtended(o){let s=o.length,c="";for(let u=0;u<s;u++){let d=o.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let f=o.charAt(u+1),p="\0";switch(d){case"+":if(f>="A"&&f<="Z")p=String.fromCharCode(f.charCodeAt(0)+32);else throw new z;break;case"$":if(f>="A"&&f<="Z")p=String.fromCharCode(f.charCodeAt(0)-64);else throw new z;break;case"%":if(f>="A"&&f<="E")p=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")p=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")p=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")p=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")p="\0";else if(f==="V")p="@";else if(f==="W")p="`";else if(f==="X"||f==="Y"||f==="Z")p="\x7F";else throw new z;break;case"/":if(f>="A"&&f<="O")p=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")p=":";else throw new z;break}c+=p,u++}else c+=d}return c}}return y.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",y.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],y.ASTERISK_ENCODING=148,y})();class He extends it{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,s){let c=this.decodeStart(o),u=this.decodeEnd(o),d=new Ue;He.decodeMiddle(o,c[1],u[0],d);let f=d.toString(),p=null;s!=null&&(p=s.get(Ce.ALLOWED_LENGTHS)),p==null&&(p=He.DEFAULT_ALLOWED_LENGTHS);let m=f.length,C=!1,w=0;for(let _ of p){if(m===_){C=!0;break}_>w&&(w=_)}if(!C&&m>w&&(C=!0),!C)throw new z;let I=[new J(c[1],i),new J(u[0],i)];return new Bt(f,null,0,I,re.ITF,new Date().getTime())}static decodeMiddle(i,o,s,c){let u=new Int32Array(10),d=new Int32Array(5),f=new Int32Array(5);for(u.fill(0),d.fill(0),f.fill(0);o<s;){it.recordPattern(i,o,u);for(let m=0;m<5;m++){let C=2*m;d[m]=u[C],f[m]=u[C+1]}let p=He.decodeDigit(d);c.append(p.toString()),p=this.decodeDigit(f),c.append(p.toString()),u.forEach(function(m){o+=m})}}decodeStart(i){let o=He.skipWhiteSpace(i),s=He.findGuardPattern(i,o,He.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(i,s[0]),s}validateQuietZone(i,o){let s=this.narrowLineWidth*10;s=s<o?s:o;for(let c=o-1;s>0&&c>=0&&!i.get(c);c--)s--;if(s!==0)throw new L}static skipWhiteSpace(i){let o=i.getSize(),s=i.getNextSet(0);if(s===o)throw new L;return s}decodeEnd(i){i.reverse();try{let o=He.skipWhiteSpace(i),s;try{s=He.findGuardPattern(i,o,He.END_PATTERN_REVERSED[0])}catch(u){u instanceof L&&(s=He.findGuardPattern(i,o,He.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,s[0]);let c=s[0];return s[0]=i.getSize()-s[1],s[1]=i.getSize()-c,s}finally{i.reverse()}}static findGuardPattern(i,o,s){let c=s.length,u=new Int32Array(c),d=i.getSize(),f=!1,p=0,m=o;u.fill(0);for(let C=o;C<d;C++)if(i.get(C)!==f)u[p]++;else{if(p===c-1){if(it.patternMatchVariance(u,s,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE)return[m,C];m+=u[0]+u[1],T.arraycopy(u,2,u,0,p-1),u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,f=!f}throw new L}static decodeDigit(i){let o=He.MAX_AVG_VARIANCE,s=-1,c=He.PATTERNS.length;for(let u=0;u<c;u++){let d=He.PATTERNS[u],f=it.patternMatchVariance(i,d,He.MAX_INDIVIDUAL_VARIANCE);f<o?(o=f,s=u):f===o&&(s=-1)}if(s>=0)return s%10;throw new L}}He.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],He.MAX_AVG_VARIANCE=.38,He.MAX_INDIVIDUAL_VARIANCE=.5,He.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],He.START_PATTERN=Int32Array.from([1,1,1,1]),He.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ke extends it{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,s,c=0,u=Int32Array.from([0,0,0]);for(;!o;){u=Int32Array.from([0,0,0]),s=Ke.findGuardPattern(i,c,!1,this.START_END_PATTERN,u);let d=s[0];c=s[1];let f=d-(c-d);f>=0&&(o=i.isRange(f,d,!1))}return s}static checkChecksum(i){return Ke.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let s=parseInt(i.charAt(o-1),10);return Ke.getStandardUPCEANChecksum(i.substring(0,o-1))===s}static getStandardUPCEANChecksum(i){let o=i.length,s=0;for(let c=o-1;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new z;s+=u}s*=3;for(let c=o-2;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new z;s+=u}return(1e3-s)%10}static decodeEnd(i,o){return Ke.findGuardPattern(i,o,!1,Ke.START_END_PATTERN,new Int32Array(Ke.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,s,c){return this.findGuardPattern(i,o,s,c,new Int32Array(c.length))}static findGuardPattern(i,o,s,c,u){let d=i.getSize();o=s?i.getNextUnset(o):i.getNextSet(o);let f=0,p=o,m=c.length,C=s;for(let w=o;w<d;w++)if(i.get(w)!==C)u[f]++;else{if(f===m-1){if(it.patternMatchVariance(u,c,Ke.MAX_INDIVIDUAL_VARIANCE)<Ke.MAX_AVG_VARIANCE)return Int32Array.from([p,w]);p+=u[0]+u[1];let I=u.slice(2,u.length-1);for(let A=0;A<f-1;A++)u[A]=I[A];u[f-1]=0,u[f]=0,f--}else f++;u[f]=1,C=!C}throw new L}static decodeDigit(i,o,s,c){this.recordPattern(i,s,o);let u=this.MAX_AVG_VARIANCE,d=-1,f=c.length;for(let p=0;p<f;p++){let m=c[p],C=it.patternMatchVariance(o,m,Ke.MAX_INDIVIDUAL_VARIANCE);C<u&&(u=C,d=p)}if(d>=0)return d;throw new L}}Ke.MAX_AVG_VARIANCE=.48,Ke.MAX_INDIVIDUAL_VARIANCE=.7,Ke.START_END_PATTERN=Int32Array.from([1,1,1]),Ke.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ke.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ke.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class rs{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,s){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(o,s,c),d=c.toString(),f=rs.parseExtensionString(d),p=[new J((s[0]+s[1])/2,i),new J(u,i)],m=new Bt(d,null,0,p,re.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&m.putAllMetadata(f),m}decodeMiddle(i,o,s){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=o[1],f=0;for(let m=0;m<5&&d<u;m++){let C=Ke.decodeDigit(i,c,d,Ke.L_AND_G_PATTERNS);s+=String.fromCharCode(48+C%10);for(let w of c)d+=w;C>=10&&(f|=1<<4-m),m!==4&&(d=i.getNextSet(d),d=i.getNextUnset(d))}if(s.length!==5)throw new L;let p=this.determineCheckDigit(f);if(rs.extensionChecksum(s.toString())!==p)throw new L;return d}static extensionChecksum(i){let o=i.length,s=0;for(let c=o-2;c>=0;c-=2)s+=i.charAt(c).charCodeAt(0)-48;s*=3;for(let c=o-1;c>=0;c-=2)s+=i.charAt(c).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new L}static parseExtensionString(i){if(i.length!==5)return null;let o=rs.parseExtension5String(i);return o==null?null:new Map([[vt.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="\xA3";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let s=parseInt(i.substring(1)),c=(s/100).toString(),u=s%100,d=u<10?"0"+u:u.toString();return o+c+"."+d}}class Qu{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,s){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(o,s,c),d=c.toString(),f=Qu.parseExtensionString(d),p=[new J((s[0]+s[1])/2,i),new J(u,i)],m=new Bt(d,null,0,p,re.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&m.putAllMetadata(f),m}decodeMiddle(i,o,s){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=o[1],f=0;for(let p=0;p<2&&d<u;p++){let m=Ke.decodeDigit(i,c,d,Ke.L_AND_G_PATTERNS);s+=String.fromCharCode(48+m%10);for(let C of c)d+=C;m>=10&&(f|=1<<1-p),p!==1&&(d=i.getNextSet(d),d=i.getNextUnset(d))}if(s.length!==2)throw new L;if(parseInt(s.toString())%4!==f)throw new L;return d}static parseExtensionString(i){return i.length!==2?null:new Map([[vt.ISSUE_NUMBER,parseInt(i)]])}}class wg{static decodeRow(i,o,s){let c=Ke.findGuardPattern(o,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new rs().decodeRow(i,o,c)}catch{return new Qu().decodeRow(i,o,c)}}}wg.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Fe extends Ke{constructor(){super(),this.decodeRowStringBuffer="",Fe.L_AND_G_PATTERNS=Fe.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=Fe.L_PATTERNS[i-10],s=new Int32Array(o.length);for(let c=0;c<o.length;c++)s[c]=o[o.length-c-1];Fe.L_AND_G_PATTERNS[i]=s}}decodeRow(i,o,s){let c=Fe.findStartGuardPattern(o),u=s==null?null:s.get(Ce.NEED_RESULT_POINT_CALLBACK);if(u!=null){let P=new J((c[0]+c[1])/2,i);u.foundPossibleResultPoint(P)}let d=this.decodeMiddle(o,c,this.decodeRowStringBuffer),f=d.rowOffset,p=d.resultString;if(u!=null){let P=new J(f,i);u.foundPossibleResultPoint(P)}let m=this.decodeEnd(o,f);if(u!=null){let P=new J((m[0]+m[1])/2,i);u.foundPossibleResultPoint(P)}let C=m[1],w=C+(C-m[0]);if(w>=o.getSize()||!o.isRange(C,w,!1))throw new L;let I=p.toString();if(I.length<8)throw new z;if(!Fe.checkChecksum(I))throw new b;let A=(c[1]+c[0])/2,_=(m[1]+m[0])/2,S=this.getBarcodeFormat(),M=[new J(A,i),new J(_,i)],R=new Bt(I,null,0,M,S,new Date().getTime()),V=0;try{let P=wg.decodeRow(i,o,m[1]);R.putMetadata(vt.UPC_EAN_EXTENSION,P.getText()),R.putAllMetadata(P.getResultMetadata()),R.addResultPoints(P.getResultPoints()),V=P.getText().length}catch{}let q=s==null?null:s.get(Ce.ALLOWED_EAN_EXTENSIONS);if(q!=null){let P=!1;for(let we in q)if(V.toString()===we){P=!0;break}if(!P)throw new L}return R}decodeEnd(i,o){return Fe.findGuardPattern(i,o,!1,Fe.START_END_PATTERN,new Int32Array(Fe.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return Fe.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let s=parseInt(i.charAt(o-1),10);return Fe.getStandardUPCEANChecksum(i.substring(0,o-1))===s}static getStandardUPCEANChecksum(i){let o=i.length,s=0;for(let c=o-1;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new z;s+=u}s*=3;for(let c=o-2;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new z;s+=u}return(1e3-s)%10}}let Ha=(()=>{class y extends Fe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,s,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),f=s[1],p=0;for(let C=0;C<6&&f<d;C++){let w=Fe.decodeDigit(o,u,f,Fe.L_AND_G_PATTERNS);c+=String.fromCharCode(48+w%10);for(let I of u)f+=I;w>=10&&(p|=1<<5-C)}c=y.determineFirstDigit(c,p),f=Fe.findGuardPattern(o,f,!0,Fe.MIDDLE_PATTERN,new Int32Array(Fe.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&f<d;C++){let w=Fe.decodeDigit(o,u,f,Fe.L_PATTERNS);c+=String.fromCharCode(48+w);for(let I of u)f+=I}return{rowOffset:f,resultString:c}}getBarcodeFormat(){return re.EAN_13}static determineFirstDigit(o,s){for(let c=0;c<10;c++)if(s===this.FIRST_DIGIT_ENCODINGS[c])return o=String.fromCharCode(48+c)+o,o;throw new L}}return y.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],y})();class xg extends Fe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,s){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=o[1];for(let p=0;p<4&&d<u;p++){let m=Fe.decodeDigit(i,c,d,Fe.L_PATTERNS);s+=String.fromCharCode(48+m);for(let C of c)d+=C}d=Fe.findGuardPattern(i,d,!0,Fe.MIDDLE_PATTERN,new Int32Array(Fe.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<4&&d<u;p++){let m=Fe.decodeDigit(i,c,d,Fe.L_PATTERNS);s+=String.fromCharCode(48+m);for(let C of c)d+=C}return{rowOffset:d,resultString:s}}getBarcodeFormat(){return re.EAN_8}}class Ig extends Fe{constructor(){super(...arguments),this.ean13Reader=new Ha}getBarcodeFormat(){return re.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,s))}decodeMiddle(i,o,s){return this.ean13Reader.decodeMiddle(i,o,s)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let s=new Bt(o.substring(1),null,null,i.getResultPoints(),re.UPC_A);return i.getResultMetadata()!=null&&s.putAllMetadata(i.getResultMetadata()),s}else throw new L}reset(){this.ean13Reader.reset()}}class _n extends Fe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,s){let c=this.decodeMiddleCounters.map(m=>m);c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=o[1],f=0;for(let m=0;m<6&&d<u;m++){let C=_n.decodeDigit(i,c,d,_n.L_AND_G_PATTERNS);s+=String.fromCharCode(48+C%10);for(let w of c)d+=w;C>=10&&(f|=1<<5-m)}let p=_n.determineNumSysAndCheckDigit(s,f);return{rowOffset:d,resultString:p}}decodeEnd(i,o){return _n.findGuardPatternWithoutCounters(i,o,!0,_n.MIDDLE_END_PATTERN)}checkChecksum(i){return Fe.checkChecksum(_n.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let s=0;s<=1;s++)for(let c=0;c<10;c++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][c]){let u=String.fromCharCode(48+s),d=String.fromCharCode(48+c);return u+i+d}throw L.getNotFoundInstance()}getBarcodeFormat(){return re.UPC_E}static convertUPCEtoUPCA(i){let o=i.slice(1,7).split("").map(u=>u.charCodeAt(0)),s=new Ue;s.append(i.charAt(0));let c=o[5];switch(c){case 0:case 1:case 2:s.appendChars(o,0,2),s.append(c),s.append("0000"),s.appendChars(o,2,3);break;case 3:s.appendChars(o,0,3),s.append("00000"),s.appendChars(o,3,2);break;case 4:s.appendChars(o,0,4),s.append("00000"),s.append(o[4]);break;default:s.appendChars(o,0,5),s.append("0000"),s.append(c);break}return i.length>=8&&s.append(i.charAt(7)),s.toString()}}_n.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_n.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ku extends it{constructor(i){super();let o=i==null?null:i.get(Ce.POSSIBLE_FORMATS),s=[];t(o)?(s.push(new Ha),s.push(new Ig),s.push(new xg),s.push(new _n)):(o.indexOf(re.EAN_13)>-1&&s.push(new Ha),o.indexOf(re.UPC_A)>-1&&s.push(new Ig),o.indexOf(re.EAN_8)>-1&&s.push(new xg),o.indexOf(re.UPC_E)>-1&&s.push(new _n)),this.readers=s}decodeRow(i,o,s){for(let c of this.readers)try{let u=c.decodeRow(i,o,s),d=u.getBarcodeFormat()===re.EAN_13&&u.getText().charAt(0)==="0",f=s==null?null:s.get(Ce.POSSIBLE_FORMATS),p=f==null||f.includes(re.UPC_A);if(d&&p){let m=u.getRawBytes(),C=new Bt(u.getText().substring(1),m,m?m.length:null,u.getResultPoints(),re.UPC_A);return C.putAllMetadata(u.getResultMetadata()),C}return u}catch{}throw new L}reset(){for(let i of this.readers)i.reset()}}let ai=(()=>{class y extends it{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,s){for(let c=0;c<s.length;c++)if(it.patternMatchVariance(o,s[c],y.MAX_INDIVIDUAL_VARIANCE)<y.MAX_AVG_VARIANCE)return c;throw new L}static count(o){return Ne.sum(new Int32Array(o))}static increment(o,s){let c=0,u=s[0];for(let d=1;d<o.length;d++)s[d]>u&&(u=s[d],c=d);o[c]++}static decrement(o,s){let c=0,u=s[0];for(let d=1;d<o.length;d++)s[d]<u&&(u=s[d],c=d);o[c]--}static isFinderPattern(o){let s=o[0]+o[1],c=s+o[2]+o[3],u=s/c;if(u>=y.MIN_FINDER_PATTERN_RATIO&&u<=y.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let p of o)p>f&&(f=p),p<d&&(d=p);return f<10*d}return!1}}return y.MAX_AVG_VARIANCE=.2,y.MAX_INDIVIDUAL_VARIANCE=.45,y.MIN_FINDER_PATTERN_RATIO=9.5/12,y.MAX_FINDER_PATTERN_RATIO=12.5/14,y})();class Zi{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Zi))return!1;let o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class za{constructor(i,o,s,c,u){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new J(s,u)),this.resultPoints.push(new J(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof za))return!1;let o=i;return this.value===o.value}hashCode(){return this.value}}class Vn{constructor(){}static getRSSvalue(i,o,s){let c=0;for(let p of i)c+=p;let u=0,d=0,f=i.length;for(let p=0;p<f-1;p++){let m;for(m=1,d|=1<<p;m<i[p];m++,d&=~(1<<p)){let C=Vn.combins(c-m-1,f-p-2);if(s&&d===0&&c-m-(f-p-1)>=f-p-1&&(C-=Vn.combins(c-m-(f-p),f-p-2)),f-p-1>1){let w=0;for(let I=c-m-(f-p-2);I>o;I--)w+=Vn.combins(c-m-I-1,f-p-3);C-=w*(f-1-p)}else c-m>o&&C--;u+=C}c-=m}return u}static combins(i,o){let s,c;i-o>o?(c=o,s=i-o):(c=i-o,s=o);let u=1,d=1;for(let f=i;f>s;f--)u*=f,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class Kv{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let s=12*o,c=new ye(s),u=0,f=i[0].getRightChar().getValue();for(let p=11;p>=0;--p)(f&1<<p)!=0&&c.set(u),u++;for(let p=1;p<i.length;++p){let m=i[p],C=m.getLeftChar().getValue();for(let w=11;w>=0;--w)(C&1<<w)!=0&&c.set(u),u++;if(m.getRightChar()!=null){let w=m.getRightChar().getValue();for(let I=11;I>=0;--I)(w&1<<I)!=0&&c.set(u),u++}}return c}}class ci{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ju{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}let Sn=(()=>{class y extends Ju{constructor(o,s){super(o),this.value=s}getValue(){return this.value}isFNC1(){return this.value===y.FNC1}}return y.FNC1="$",y})();class li extends Ju{constructor(i,o,s){super(i),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let Xi=(()=>{class y extends Ju{constructor(o,s,c){if(super(o),s<0||s>10||c<0||c>10)throw new z;this.firstDigit=s,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===y.FNC1}isSecondDigitFNC1(){return this.secondDigit===y.FNC1}isAnyFNC1(){return this.firstDigit===y.FNC1||this.secondDigit===y.FNC1}}return y.FNC1=10,y})();class X{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new L;let o=i.substring(0,2);for(let u of X.TWO_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===X.VARIABLE_LENGTH?X.processVariableAI(2,u[2],i):X.processFixedAI(2,u[1],i);if(i.length<3)throw new L;let s=i.substring(0,3);for(let u of X.THREE_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===X.VARIABLE_LENGTH?X.processVariableAI(3,u[2],i):X.processFixedAI(3,u[1],i);for(let u of X.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===X.VARIABLE_LENGTH?X.processVariableAI(4,u[2],i):X.processFixedAI(4,u[1],i);if(i.length<4)throw new L;let c=i.substring(0,4);for(let u of X.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===X.VARIABLE_LENGTH?X.processVariableAI(4,u[2],i):X.processFixedAI(4,u[1],i);throw new L}static processFixedAI(i,o,s){if(s.length<i)throw new L;let c=s.substring(0,i);if(s.length<i+o)throw new L;let u=s.substring(i,i+o),d=s.substring(i+o),f="("+c+")"+u,p=X.parseFieldsInGeneralPurpose(d);return p==null?f:f+p}static processVariableAI(i,o,s){let c=s.substring(0,i),u;s.length<i+o?u=s.length:u=i+o;let d=s.substring(i,u),f=s.substring(u),p="("+c+")"+d,m=X.parseFieldsInGeneralPurpose(f);return m==null?p:p+m}}X.VARIABLE_LENGTH=[],X.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",X.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",X.VARIABLE_LENGTH,20],["22",X.VARIABLE_LENGTH,29],["30",X.VARIABLE_LENGTH,8],["37",X.VARIABLE_LENGTH,8],["90",X.VARIABLE_LENGTH,30],["91",X.VARIABLE_LENGTH,30],["92",X.VARIABLE_LENGTH,30],["93",X.VARIABLE_LENGTH,30],["94",X.VARIABLE_LENGTH,30],["95",X.VARIABLE_LENGTH,30],["96",X.VARIABLE_LENGTH,30],["97",X.VARIABLE_LENGTH,3],["98",X.VARIABLE_LENGTH,30],["99",X.VARIABLE_LENGTH,30]],X.THREE_DIGIT_DATA_LENGTH=[["240",X.VARIABLE_LENGTH,30],["241",X.VARIABLE_LENGTH,30],["242",X.VARIABLE_LENGTH,6],["250",X.VARIABLE_LENGTH,30],["251",X.VARIABLE_LENGTH,30],["253",X.VARIABLE_LENGTH,17],["254",X.VARIABLE_LENGTH,20],["400",X.VARIABLE_LENGTH,30],["401",X.VARIABLE_LENGTH,30],["402",17],["403",X.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",X.VARIABLE_LENGTH,20],["421",X.VARIABLE_LENGTH,15],["422",3],["423",X.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],X.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",X.VARIABLE_LENGTH,15],["391",X.VARIABLE_LENGTH,18],["392",X.VARIABLE_LENGTH,15],["393",X.VARIABLE_LENGTH,18],["703",X.VARIABLE_LENGTH,30]],X.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",X.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",X.VARIABLE_LENGTH,20],["8003",X.VARIABLE_LENGTH,30],["8004",X.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",X.VARIABLE_LENGTH,30],["8008",X.VARIABLE_LENGTH,12],["8018",18],["8020",X.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",X.VARIABLE_LENGTH,70],["8200",X.VARIABLE_LENGTH,70]];class Qi{constructor(i){this.buffer=new Ue,this.information=i}decodeAllCodes(i,o){let s=o,c=null;do{let u=this.decodeGeneralPurposeField(s,c),d=X.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&i.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,s===u.getNewPosition())break;s=u.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(i,4);return u===0?new Xi(this.information.getSize(),Xi.FNC1,Xi.FNC1):new Xi(this.information.getSize(),u-1,Xi.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),s=(o-8)/11,c=(o-8)%11;return new Xi(i+7,s,c)}extractNumericValueFromBitArray(i,o){return Qi.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,s){let c=0;for(let u=0;u<s;++u)i.get(o+u)&&(c|=1<<s-u-1);return c}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new li(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new li(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let s=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(s!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new li(this.current.getPosition(),this.buffer.toString()):o=new li(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new ci(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new li(this.current.getPosition(),this.buffer.toString());return new ci(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ci(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new li(this.current.getPosition(),this.buffer.toString());return new ci(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ci(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new li(this.current.getPosition(),this.buffer.toString());return new ci(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ci(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,7);if(s>=64&&s<116)return!0;if(i+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,8);return c>=232&&c<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new Sn(i+5,Sn.FNC1);if(o>=5&&o<15)return new Sn(i+5,"0"+(o-5));let s=this.extractNumericValueFromBitArray(i,7);if(s>=64&&s<90)return new Sn(i+7,""+(s+1));if(s>=90&&s<116)return new Sn(i+7,""+(s+7));let c=this.extractNumericValueFromBitArray(i,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new z}return new Sn(i+8,u)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,6);return s>=16&&s<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new Sn(i+5,Sn.FNC1);if(o>=5&&o<15)return new Sn(i+5,"0"+(o-5));let s=this.extractNumericValueFromBitArray(i,6);if(s>=32&&s<58)return new Sn(i+6,""+(s+33));let c;switch(s){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new tr("Decoding invalid alphanumeric value: "+s)}return new Sn(i+6,c)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class ed{constructor(i){this.information=i,this.generalDecoder=new Qi(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Tn=(()=>{class y extends ed{constructor(o){super(o)}encodeCompressedGtin(o,s){o.append("(01)");let c=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,s,c)}encodeCompressedGtinWithoutAI(o,s,c){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);d/100===0&&o.append("0"),d/10===0&&o.append("0"),o.append(d)}y.appendCheckDigit(o,c)}static appendCheckDigit(o,s){let c=0;for(let u=0;u<13;u++){let d=o.charAt(u+s).charCodeAt(0)-48;c+=(u&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),o.append(c)}}return y.GTIN_SIZE=40,y})(),Jv=(()=>{class y extends Tn{constructor(o){super(o)}parseInformation(){let o=new Ue;o.append("(01)");let s=o.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(y.HEADER_SIZE,4);return o.append(c),this.encodeCompressedGtinWithoutAI(o,y.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(o,y.HEADER_SIZE+44)}}return y.HEADER_SIZE=4,y})(),eC=(()=>{class y extends ed{constructor(o){super(o)}parseInformation(){let o=new Ue;return this.getGeneralDecoder().decodeAllCodes(o,y.HEADER_SIZE)}}return y.HEADER_SIZE=5,y})();class Ga extends Tn{constructor(i){super(i)}encodeCompressedWeight(i,o,s){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,s);this.addWeightCode(i,c);let u=this.checkWeight(c),d=1e5;for(let f=0;f<5;++f)u/d===0&&i.append("0"),d/=10;i.append(u)}}let Dg=(()=>{class y extends Ga{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=y.HEADER_SIZE+Ga.GTIN_SIZE+y.WEIGHT_SIZE)throw new L;let o=new Ue;return this.encodeCompressedGtin(o,y.HEADER_SIZE),this.encodeCompressedWeight(o,y.HEADER_SIZE+Ga.GTIN_SIZE,y.WEIGHT_SIZE),o.toString()}}return y.HEADER_SIZE=5,y.WEIGHT_SIZE=15,y})();class tC extends Dg{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class nC extends Dg{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}let rC=(()=>{class y extends Tn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<y.HEADER_SIZE+Tn.GTIN_SIZE)throw new L;let o=new Ue;this.encodeCompressedGtin(o,y.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(y.HEADER_SIZE+Tn.GTIN_SIZE,y.LAST_DIGIT_SIZE);o.append("(392"),o.append(s),o.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(y.HEADER_SIZE+Tn.GTIN_SIZE+y.LAST_DIGIT_SIZE,null);return o.append(c.getNewString()),o.toString()}}return y.HEADER_SIZE=8,y.LAST_DIGIT_SIZE=2,y})(),iC=(()=>{class y extends Tn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<y.HEADER_SIZE+Tn.GTIN_SIZE)throw new L;let o=new Ue;this.encodeCompressedGtin(o,y.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(y.HEADER_SIZE+Tn.GTIN_SIZE,y.LAST_DIGIT_SIZE);o.append("(393"),o.append(s),o.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(y.HEADER_SIZE+Tn.GTIN_SIZE+y.LAST_DIGIT_SIZE,y.FIRST_THREE_DIGITS_SIZE);c/100==0&&o.append("0"),c/10==0&&o.append("0"),o.append(c);let u=this.getGeneralDecoder().decodeGeneralPurposeField(y.HEADER_SIZE+Tn.GTIN_SIZE+y.LAST_DIGIT_SIZE+y.FIRST_THREE_DIGITS_SIZE,null);return o.append(u.getNewString()),o.toString()}}return y.HEADER_SIZE=8,y.LAST_DIGIT_SIZE=2,y.FIRST_THREE_DIGITS_SIZE=10,y})(),_r=(()=>{class y extends Ga{constructor(o,s,c){super(o),this.dateCode=c,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=y.HEADER_SIZE+y.GTIN_SIZE+y.WEIGHT_SIZE+y.DATE_SIZE)throw new L;let o=new Ue;return this.encodeCompressedGtin(o,y.HEADER_SIZE),this.encodeCompressedWeight(o,y.HEADER_SIZE+y.GTIN_SIZE,y.WEIGHT_SIZE),this.encodeCompressedDate(o,y.HEADER_SIZE+y.GTIN_SIZE+y.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,s){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,y.DATE_SIZE);if(c==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let u=c%32;c/=32;let d=c%12+1;c/=12;let f=c;f/10==0&&o.append("0"),o.append(f),d/10==0&&o.append("0"),o.append(d),u/10==0&&o.append("0"),o.append(u)}addWeightCode(o,s){o.append("("),o.append(this.firstAIdigits),o.append(s/1e5),o.append(")")}checkWeight(o){return o%1e5}}return y.HEADER_SIZE=8,y.WEIGHT_SIZE=20,y.DATE_SIZE=16,y})();function Ag(y){try{if(y.get(1))return new Jv(y);if(!y.get(2))return new eC(y);switch(Qi.extractNumericValueFromBitArray(y,1,4)){case 4:return new tC(y);case 5:return new nC(y)}switch(Qi.extractNumericValueFromBitArray(y,1,5)){case 12:return new rC(y);case 13:return new iC(y)}switch(Qi.extractNumericValueFromBitArray(y,1,7)){case 56:return new _r(y,"310","11");case 57:return new _r(y,"320","11");case 58:return new _r(y,"310","13");case 59:return new _r(y,"320","13");case 60:return new _r(y,"310","15");case 61:return new _r(y,"320","15");case 62:return new _r(y,"310","17");case 63:return new _r(y,"320","17")}}catch(i){throw console.log(i),new tr("unknown decoder: "+y)}}class Sr{constructor(i,o,s,c){this.leftchar=i,this.rightchar=o,this.finderpattern=s,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof Sr?Sr.equalsOrNull(i.leftchar,o.leftchar)&&Sr.equalsOrNull(i.rightchar,o.rightchar)&&Sr.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:Sr.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class td{constructor(i,o,s){this.pairs=i,this.rowNumber=o,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof td?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let s;return i.forEach((c,u)=>{o.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(s=!0)})}),s}}class k extends ai{constructor(i){super(...arguments),this.pairs=new Array(k.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,s){this.pairs.length=0,this.startFromEven=!1;try{return k.constructResult(this.decodeRow2pairs(i,o))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,k.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(u){if(u instanceof L){if(!this.pairs.length)throw new L;s=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(i,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new L}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let s=o;s<this.rows.length;s++){let c=this.rows[s];this.pairs.length=0;for(let d of i)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!k.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(i);u.push(c);try{return this.checkRows(u,s+1)}catch(d){this.verbose&&console.log(d)}}throw new L}static isValidSequence(i){for(let o of k.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let s=!0;for(let c=0;c<i.length;c++)if(i[c].getFinderPattern().getValue()!=o[c]){s=!1;break}if(s)return!0}return!1}storeRow(i,o){let s=0,c=!1,u=!1;for(;s<this.rows.length;){let d=this.rows[s];if(d.getRowNumber()>i){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),s++}u||c||k.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new td(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let s of o)if(s.getPairs().length!==i.length){for(let c of s.getPairs())for(let u of i)if(Sr.equals(c,u))break}}static isPartialRow(i,o){for(let s of o){let c=!0;for(let u of i){let d=!1;for(let f of s.getPairs())if(u.equals(f)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=Kv.buildBitArray(i),c=Ag(o).parseInformation(),u=i[0].getFinderPattern().getResultPoints(),d=i[i.length-1].getFinderPattern().getResultPoints(),f=[u[0],u[1],d[0],d[1]];return new Bt(c,null,null,f,re.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),s=i.getRightChar();if(s==null)return!1;let c=s.getChecksumPortion(),u=2;for(let f=1;f<this.pairs.size();++f){let p=this.pairs.get(f);c+=p.getLeftChar().getChecksumPortion(),u++;let m=p.getRightChar();m!=null&&(c+=m.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==o.getValue()}static getNextSecondBar(i,o){let s;return i.get(o)?(s=i.getNextUnset(o),s=i.getNextSet(s)):(s=i.getNextSet(o),s=i.getNextUnset(s)),s}retrieveNextPair(i,o,s){let c=o.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,f=-1;do this.findNextPair(i,o,f),u=this.parseFoundFinderPattern(i,s,c),u==null?f=k.getNextSecondBar(i,this.startEnd[0]):d=!1;while(d);let p=this.decodeDataCharacter(i,u,c,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new L;let m;try{m=this.decodeDataCharacter(i,u,c,!1)}catch(C){m=null,this.verbose&&console.log(C)}return new Sr(p,m,u,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,s){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d;s>=0?d=s:this.isEmptyPair(o)?d=0:d=o[o.length-1].getFinderPattern().getStartEnd()[1];let f=o.length%2!=0;this.startFromEven&&(f=!f);let p=!1;for(;d<u&&(p=!i.get(d),!!p);)d++;let m=0,C=d;for(let w=d;w<u;w++)if(i.get(w)!=p)c[m]++;else{if(m==3){if(f&&k.reverseCounters(c),k.isFinderPattern(c)){this.startEnd[0]=C,this.startEnd[1]=w;return}f&&k.reverseCounters(c),C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,m--}else m++;c[m]=1,p=!p}throw new L}static reverseCounters(i){let o=i.length;for(let s=0;s<o/2;++s){let c=i[s];i[s]=i[o-s-1],i[o-s-1]=c}}parseFoundFinderPattern(i,o,s){let c,u,d;if(s){let m=this.startEnd[0]-1;for(;m>=0&&!i.get(m);)m--;m++,c=this.startEnd[0]-m,u=m,d=this.startEnd[1]}else u=this.startEnd[0],d=i.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let f=this.getDecodeFinderCounters();T.arraycopy(f,0,f,1,f.length-1),f[0]=c;let p;try{p=this.parseFinderValue(f,k.FINDER_PATTERNS)}catch{return null}return new za(p,[u,d],u,d,o)}decodeDataCharacter(i,o,s,c){let u=this.getDataCharacterCounters();for(let Ge=0;Ge<u.length;Ge++)u[Ge]=0;if(c)k.recordPatternInReverse(i,o.getStartEnd()[0],u);else{k.recordPattern(i,o.getStartEnd()[1],u);for(let Ge=0,_t=u.length-1;Ge<_t;Ge++,_t--){let sn=u[Ge];u[Ge]=u[_t],u[_t]=sn}}let d=17,f=Ne.sum(new Int32Array(u))/d,p=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(f-p)/p>.3)throw new L;let m=this.getOddCounts(),C=this.getEvenCounts(),w=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let Ge=0;Ge<u.length;Ge++){let _t=1*u[Ge]/f,sn=_t+.5;if(sn<1){if(_t<.3)throw new L;sn=1}else if(sn>8){if(_t>8.7)throw new L;sn=8}let to=Ge/2;(Ge&1)==0?(m[to]=sn,w[to]=_t-sn):(C[to]=sn,I[to]=_t-sn)}this.adjustOddEvenCounts(d);let A=4*o.getValue()+(s?0:2)+(c?0:1)-1,_=0,S=0;for(let Ge=m.length-1;Ge>=0;Ge--){if(k.isNotA1left(o,s,c)){let _t=k.WEIGHTS[A][2*Ge];S+=m[Ge]*_t}_+=m[Ge]}let M=0;for(let Ge=C.length-1;Ge>=0;Ge--)if(k.isNotA1left(o,s,c)){let _t=k.WEIGHTS[A][2*Ge+1];M+=C[Ge]*_t}let R=S+M;if((_&1)!=0||_>13||_<4)throw new L;let V=(13-_)/2,q=k.SYMBOL_WIDEST[V],P=9-q,we=Vn.getRSSvalue(m,q,!0),de=Vn.getRSSvalue(C,P,!1),Yt=k.EVEN_TOTAL_SUBSET[V],Nn=k.GSUM[V],qt=we*Yt+de+Nn;return new Zi(qt,R)}static isNotA1left(i,o,s){return!(i.getValue()==0&&o&&s)}adjustOddEvenCounts(i){let o=Ne.sum(new Int32Array(this.getOddCounts())),s=Ne.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;o>13?u=!0:o<4&&(c=!0);let d=!1,f=!1;s>13?f=!0:s<4&&(d=!0);let p=o+s-i,m=(o&1)==1,C=(s&1)==0;if(p==1)if(m){if(C)throw new L;u=!0}else{if(!C)throw new L;f=!0}else if(p==-1)if(m){if(C)throw new L;c=!0}else{if(!C)throw new L;d=!0}else if(p==0){if(m){if(!C)throw new L;o<s?(c=!0,f=!0):(u=!0,d=!0)}else if(C)throw new L}else throw new L;if(c){if(u)throw new L;k.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&k.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(f)throw new L;k.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&k.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}k.SYMBOL_WIDEST=[7,5,4,3,1],k.EVEN_TOTAL_SUBSET=[4,20,52,104,204],k.GSUM=[0,348,1388,2948,3988],k.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],k.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],k.FINDER_PAT_A=0,k.FINDER_PAT_B=1,k.FINDER_PAT_C=2,k.FINDER_PAT_D=3,k.FINDER_PAT_E=4,k.FINDER_PAT_F=5,k.FINDER_PATTERN_SEQUENCES=[[k.FINDER_PAT_A,k.FINDER_PAT_A],[k.FINDER_PAT_A,k.FINDER_PAT_B,k.FINDER_PAT_B],[k.FINDER_PAT_A,k.FINDER_PAT_C,k.FINDER_PAT_B,k.FINDER_PAT_D],[k.FINDER_PAT_A,k.FINDER_PAT_E,k.FINDER_PAT_B,k.FINDER_PAT_D,k.FINDER_PAT_C],[k.FINDER_PAT_A,k.FINDER_PAT_E,k.FINDER_PAT_B,k.FINDER_PAT_D,k.FINDER_PAT_D,k.FINDER_PAT_F],[k.FINDER_PAT_A,k.FINDER_PAT_E,k.FINDER_PAT_B,k.FINDER_PAT_D,k.FINDER_PAT_E,k.FINDER_PAT_F,k.FINDER_PAT_F],[k.FINDER_PAT_A,k.FINDER_PAT_A,k.FINDER_PAT_B,k.FINDER_PAT_B,k.FINDER_PAT_C,k.FINDER_PAT_C,k.FINDER_PAT_D,k.FINDER_PAT_D],[k.FINDER_PAT_A,k.FINDER_PAT_A,k.FINDER_PAT_B,k.FINDER_PAT_B,k.FINDER_PAT_C,k.FINDER_PAT_C,k.FINDER_PAT_D,k.FINDER_PAT_E,k.FINDER_PAT_E],[k.FINDER_PAT_A,k.FINDER_PAT_A,k.FINDER_PAT_B,k.FINDER_PAT_B,k.FINDER_PAT_C,k.FINDER_PAT_C,k.FINDER_PAT_D,k.FINDER_PAT_E,k.FINDER_PAT_F,k.FINDER_PAT_F],[k.FINDER_PAT_A,k.FINDER_PAT_A,k.FINDER_PAT_B,k.FINDER_PAT_B,k.FINDER_PAT_C,k.FINDER_PAT_D,k.FINDER_PAT_D,k.FINDER_PAT_E,k.FINDER_PAT_E,k.FINDER_PAT_F,k.FINDER_PAT_F]],k.MAX_PAIRS=11;class oC extends Zi{constructor(i,o,s){super(i,o),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Je extends ai{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,s){let c=this.decodePair(o,!1,i,s);Je.addOrTally(this.possibleLeftPairs,c),o.reverse();let u=this.decodePair(o,!0,i,s);Je.addOrTally(this.possibleRightPairs,u),o.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&Je.checkChecksum(d,f))return Je.constructResult(d,f)}throw new L}static addOrTally(i,o){if(o==null)return;let s=!1;for(let c of i)if(c.getValue()===o.getValue()){c.incrementCount(),s=!0;break}s||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let s=4537077*i.getValue()+o.getValue(),c=new String(s).toString(),u=new Ue;for(let m=13-c.length;m>0;m--)u.append("0");u.append(c);let d=0;for(let m=0;m<13;m++){let C=u.charAt(m).charCodeAt(0)-48;d+=(m&1)===0?3*C:C}d=10-d%10,d===10&&(d=0),u.append(d.toString());let f=i.getFinderPattern().getResultPoints(),p=o.getFinderPattern().getResultPoints();return new Bt(u.toString(),null,0,[f[0],f[1],p[0],p[1]],re.RSS_14,new Date().getTime())}static checkChecksum(i,o){let s=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,c=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,s===c}decodePair(i,o,s,c){try{let u=this.findFinderPattern(i,o),d=this.parseFoundFinderPattern(i,s,o,u),f=c==null?null:c.get(Ce.NEED_RESULT_POINT_CALLBACK);if(f!=null){let C=(u[0]+u[1])/2;o&&(C=i.getSize()-1-C),f.foundPossibleResultPoint(new J(C,s))}let p=this.decodeDataCharacter(i,d,!0),m=this.decodeDataCharacter(i,d,!1);return new oC(1597*p.getValue()+m.getValue(),p.getChecksumPortion()+4*m.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(i,o,s){let c=this.getDataCharacterCounters();for(let M=0;M<c.length;M++)c[M]=0;if(s)it.recordPatternInReverse(i,o.getStartEnd()[0],c);else{it.recordPattern(i,o.getStartEnd()[1]+1,c);for(let M=0,R=c.length-1;M<R;M++,R--){let V=c[M];c[M]=c[R],c[R]=V}}let u=s?16:15,d=Ne.sum(new Int32Array(c))/u,f=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let M=0;M<c.length;M++){let R=c[M]/d,V=Math.floor(R+.5);V<1?V=1:V>8&&(V=8);let q=Math.floor(M/2);(M&1)===0?(f[q]=V,m[q]=R-V):(p[q]=V,C[q]=R-V)}this.adjustOddEvenCounts(s,u);let w=0,I=0;for(let M=f.length-1;M>=0;M--)I*=9,I+=f[M],w+=f[M];let A=0,_=0;for(let M=p.length-1;M>=0;M--)A*=9,A+=p[M],_+=p[M];let S=I+3*A;if(s){if((w&1)!==0||w>12||w<4)throw new L;let M=(12-w)/2,R=Je.OUTSIDE_ODD_WIDEST[M],V=9-R,q=Vn.getRSSvalue(f,R,!1),P=Vn.getRSSvalue(p,V,!0),we=Je.OUTSIDE_EVEN_TOTAL_SUBSET[M],de=Je.OUTSIDE_GSUM[M];return new Zi(q*we+P+de,S)}else{if((_&1)!==0||_>10||_<4)throw new L;let M=(10-_)/2,R=Je.INSIDE_ODD_WIDEST[M],V=9-R,q=Vn.getRSSvalue(f,R,!0),P=Vn.getRSSvalue(p,V,!1),we=Je.INSIDE_ODD_TOTAL_SUBSET[M],de=Je.INSIDE_GSUM[M];return new Zi(P*we+q+de,S)}}findFinderPattern(i,o){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let c=i.getSize(),u=!1,d=0;for(;d<c&&(u=!i.get(d),o!==u);)d++;let f=0,p=d;for(let m=d;m<c;m++)if(i.get(m)!==u)s[f]++;else{if(f===3){if(ai.isFinderPattern(s))return[p,m];p+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,u=!u}throw new L}parseFoundFinderPattern(i,o,s,c){let u=i.get(c[0]),d=c[0]-1;for(;d>=0&&u!==i.get(d);)d--;d++;let f=c[0]-d,p=this.getDecodeFinderCounters(),m=new Int32Array(p.length);T.arraycopy(p,0,m,1,p.length-1),m[0]=f;let C=this.parseFinderValue(m,Je.FINDER_PATTERNS),w=d,I=c[1];return s&&(w=i.getSize()-1-w,I=i.getSize()-1-I),new za(C,[d,c[1]],w,I,o)}adjustOddEvenCounts(i,o){let s=Ne.sum(new Int32Array(this.getOddCounts())),c=Ne.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,f=!1,p=!1;i?(s>12?d=!0:s<4&&(u=!0),c>12?p=!0:c<4&&(f=!0)):(s>11?d=!0:s<5&&(u=!0),c>10?p=!0:c<4&&(f=!0));let m=s+c-o,C=(s&1)===(i?1:0),w=(c&1)===1;if(m===1)if(C){if(w)throw new L;d=!0}else{if(!w)throw new L;p=!0}else if(m===-1)if(C){if(w)throw new L;u=!0}else{if(!w)throw new L;f=!0}else if(m===0){if(C){if(!w)throw new L;s<c?(u=!0,p=!0):(d=!0,f=!0)}else if(w)throw new L}else throw new L;if(u){if(d)throw new L;ai.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&ai.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new L;ai.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&ai.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Je.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Je.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Je.OUTSIDE_GSUM=[0,161,961,2015,2715],Je.INSIDE_GSUM=[0,336,1036,1516],Je.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Je.INSIDE_ODD_WIDEST=[2,4,6,8],Je.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ki extends it{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;let s=i?i.get(Ce.POSSIBLE_FORMATS):null,c=i&&i.get(Ce.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(re.EAN_13)||s.includes(re.UPC_A)||s.includes(re.EAN_8)||s.includes(re.UPC_E))&&this.readers.push(new Ku(i)),s.includes(re.CODE_39)&&this.readers.push(new Xu(c)),s.includes(re.CODE_128)&&this.readers.push(new Y),s.includes(re.ITF)&&this.readers.push(new He),s.includes(re.RSS_14)&&this.readers.push(new Je),s.includes(re.RSS_EXPANDED)&&this.readers.push(new k(this.verbose))):(this.readers.push(new Ku(i)),this.readers.push(new Xu),this.readers.push(new Ku(i)),this.readers.push(new Y),this.readers.push(new He),this.readers.push(new Je),this.readers.push(new k(this.verbose)))}decodeRow(i,o,s){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(i,o,s)}catch{}throw new L}reset(){this.readers.forEach(i=>i.reset())}}class sC extends si{constructor(i=500,o){super(new Ki(o),i,o)}}class Be{constructor(i,o,s){this.ecCodewords=i,this.ecBlocks=[o],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Pe{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class be{constructor(i,o,s,c,u,d){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=s,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let f=0,p=d.getECCodewords(),m=d.getECBlocks();for(let C of m)f+=C.getCount()*(C.getDataCodewords()+p);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if((i&1)!==0||(o&1)!==0)throw new z;for(let s of be.VERSIONS)if(s.symbolSizeRows===i&&s.symbolSizeColumns===o)return s;throw new z}toString(){return""+this.versionNumber}static buildVersions(){return[new be(1,10,10,8,8,new Be(5,new Pe(1,3))),new be(2,12,12,10,10,new Be(7,new Pe(1,5))),new be(3,14,14,12,12,new Be(10,new Pe(1,8))),new be(4,16,16,14,14,new Be(12,new Pe(1,12))),new be(5,18,18,16,16,new Be(14,new Pe(1,18))),new be(6,20,20,18,18,new Be(18,new Pe(1,22))),new be(7,22,22,20,20,new Be(20,new Pe(1,30))),new be(8,24,24,22,22,new Be(24,new Pe(1,36))),new be(9,26,26,24,24,new Be(28,new Pe(1,44))),new be(10,32,32,14,14,new Be(36,new Pe(1,62))),new be(11,36,36,16,16,new Be(42,new Pe(1,86))),new be(12,40,40,18,18,new Be(48,new Pe(1,114))),new be(13,44,44,20,20,new Be(56,new Pe(1,144))),new be(14,48,48,22,22,new Be(68,new Pe(1,174))),new be(15,52,52,24,24,new Be(42,new Pe(2,102))),new be(16,64,64,14,14,new Be(56,new Pe(2,140))),new be(17,72,72,16,16,new Be(36,new Pe(4,92))),new be(18,80,80,18,18,new Be(48,new Pe(4,114))),new be(19,88,88,20,20,new Be(56,new Pe(4,144))),new be(20,96,96,22,22,new Be(68,new Pe(4,174))),new be(21,104,104,24,24,new Be(56,new Pe(6,136))),new be(22,120,120,18,18,new Be(68,new Pe(6,175))),new be(23,132,132,20,20,new Be(62,new Pe(8,163))),new be(24,144,144,22,22,new Be(62,new Pe(8,156),new Pe(2,155))),new be(25,8,18,6,16,new Be(7,new Pe(1,5))),new be(26,8,32,6,14,new Be(11,new Pe(1,10))),new be(27,12,26,10,24,new Be(14,new Pe(1,16))),new be(28,12,36,10,16,new Be(18,new Pe(1,22))),new be(29,16,36,14,16,new Be(24,new Pe(1,32))),new be(30,16,48,14,22,new Be(28,new Pe(1,49)))]}}be.VERSIONS=be.buildVersions();class nd{constructor(i){let o=i.getHeight();if(o<8||o>144||(o&1)!==0)throw new z;this.version=nd.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new yt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){let o=i.getHeight(),s=i.getWidth();return be.getVersionForDimensions(o,s)}readCodewords(){let i=new Int8Array(this.version.getTotalCodewords()),o=0,s=4,c=0,u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth(),f=!1,p=!1,m=!1,C=!1;do if(s===u&&c===0&&!f)i[o++]=this.readCorner1(u,d)&255,s-=2,c+=2,f=!0;else if(s===u-2&&c===0&&(d&3)!==0&&!p)i[o++]=this.readCorner2(u,d)&255,s-=2,c+=2,p=!0;else if(s===u+4&&c===2&&(d&7)===0&&!m)i[o++]=this.readCorner3(u,d)&255,s-=2,c+=2,m=!0;else if(s===u-2&&c===0&&(d&7)===4&&!C)i[o++]=this.readCorner4(u,d)&255,s-=2,c+=2,C=!0;else{do s<u&&c>=0&&!this.readMappingMatrix.get(c,s)&&(i[o++]=this.readUtah(s,c,u,d)&255),s-=2,c+=2;while(s>=0&&c<d);s+=1,c+=3;do s>=0&&c<d&&!this.readMappingMatrix.get(c,s)&&(i[o++]=this.readUtah(s,c,u,d)&255),s+=2,c-=2;while(s<u&&c>=0);s+=3,c+=1}while(s<u||c<d);if(o!==this.version.getTotalCodewords())throw new z;return i}readModule(i,o,s,c){return i<0&&(i+=s,o+=4-(s+4&7)),o<0&&(o+=c,i+=4-(c+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,s,c){let u=0;return this.readModule(i-2,o-2,s,c)&&(u|=1),u<<=1,this.readModule(i-2,o-1,s,c)&&(u|=1),u<<=1,this.readModule(i-1,o-2,s,c)&&(u|=1),u<<=1,this.readModule(i-1,o-1,s,c)&&(u|=1),u<<=1,this.readModule(i-1,o,s,c)&&(u|=1),u<<=1,this.readModule(i,o-2,s,c)&&(u|=1),u<<=1,this.readModule(i,o-1,s,c)&&(u|=1),u<<=1,this.readModule(i,o,s,c)&&(u|=1),u}readCorner1(i,o){let s=0;return this.readModule(i-1,0,i,o)&&(s|=1),s<<=1,this.readModule(i-1,1,i,o)&&(s|=1),s<<=1,this.readModule(i-1,2,i,o)&&(s|=1),s<<=1,this.readModule(0,o-2,i,o)&&(s|=1),s<<=1,this.readModule(0,o-1,i,o)&&(s|=1),s<<=1,this.readModule(1,o-1,i,o)&&(s|=1),s<<=1,this.readModule(2,o-1,i,o)&&(s|=1),s<<=1,this.readModule(3,o-1,i,o)&&(s|=1),s}readCorner2(i,o){let s=0;return this.readModule(i-3,0,i,o)&&(s|=1),s<<=1,this.readModule(i-2,0,i,o)&&(s|=1),s<<=1,this.readModule(i-1,0,i,o)&&(s|=1),s<<=1,this.readModule(0,o-4,i,o)&&(s|=1),s<<=1,this.readModule(0,o-3,i,o)&&(s|=1),s<<=1,this.readModule(0,o-2,i,o)&&(s|=1),s<<=1,this.readModule(0,o-1,i,o)&&(s|=1),s<<=1,this.readModule(1,o-1,i,o)&&(s|=1),s}readCorner3(i,o){let s=0;return this.readModule(i-1,0,i,o)&&(s|=1),s<<=1,this.readModule(i-1,o-1,i,o)&&(s|=1),s<<=1,this.readModule(0,o-3,i,o)&&(s|=1),s<<=1,this.readModule(0,o-2,i,o)&&(s|=1),s<<=1,this.readModule(0,o-1,i,o)&&(s|=1),s<<=1,this.readModule(1,o-3,i,o)&&(s|=1),s<<=1,this.readModule(1,o-2,i,o)&&(s|=1),s<<=1,this.readModule(1,o-1,i,o)&&(s|=1),s}readCorner4(i,o){let s=0;return this.readModule(i-3,0,i,o)&&(s|=1),s<<=1,this.readModule(i-2,0,i,o)&&(s|=1),s<<=1,this.readModule(i-1,0,i,o)&&(s|=1),s<<=1,this.readModule(0,o-2,i,o)&&(s|=1),s<<=1,this.readModule(0,o-1,i,o)&&(s|=1),s<<=1,this.readModule(1,o-1,i,o)&&(s|=1),s<<=1,this.readModule(2,o-1,i,o)&&(s|=1),s<<=1,this.readModule(3,o-1,i,o)&&(s|=1),s}extractDataRegion(i){let o=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new v("Dimension of bitMatrix must match the version size");let c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=o/c|0,f=s/u|0,p=d*c,m=f*u,C=new yt(m,p);for(let w=0;w<d;++w){let I=w*c;for(let A=0;A<f;++A){let _=A*u;for(let S=0;S<c;++S){let M=w*(c+2)+1+S,R=I+S;for(let V=0;V<u;++V){let q=A*(u+2)+1+V;if(i.get(q,M)){let P=_+V;C.set(P,R)}}}}}return C}}class rd{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){let s=o.getECBlocks(),c=0,u=s.getECBlocks();for(let S of u)c+=S.getCount();let d=new Array(c),f=0;for(let S of u)for(let M=0;M<S.getCount();M++){let R=S.getDataCodewords(),V=s.getECCodewords()+R;d[f++]=new rd(R,new Uint8Array(V))}let m=d[0].codewords.length-s.getECCodewords(),C=m-1,w=0;for(let S=0;S<C;S++)for(let M=0;M<f;M++)d[M].codewords[S]=i[w++];let I=o.getVersionNumber()===24,A=I?8:f;for(let S=0;S<A;S++)d[S].codewords[m-1]=i[w++];let _=d[0].codewords.length;for(let S=m;S<_;S++)for(let M=0;M<f;M++){let R=I?(M+8)%f:M,V=I&&R>7?S-1:S;d[R].codewords[V]=i[w++]}if(w!==i.length)throw new v;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class id{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new v(""+i);let o=0,s=this.bitOffset,c=this.byteOffset,u=this.bytes;if(s>0){let d=8-s,f=i<d?i:d,p=d-f,m=255>>8-f<<p;o=(u[c]&m)>>p,i-=f,s+=f,s===8&&(s=0,c++)}if(i>0){for(;i>=8;)o=o<<8|u[c]&255,c++,i-=8;if(i>0){let d=8-i,f=255>>d<<d;o=o<<i|(u[c]&f)>>d,s+=i}}return this.bitOffset=s,this.byteOffset=c,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ct=function(y){return y[y.PAD_ENCODE=0]="PAD_ENCODE",y[y.ASCII_ENCODE=1]="ASCII_ENCODE",y[y.C40_ENCODE=2]="C40_ENCODE",y[y.TEXT_ENCODE=3]="TEXT_ENCODE",y[y.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",y[y.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",y[y.BASE256_ENCODE=6]="BASE256_ENCODE",y}(Ct||{});class Tr{static decode(i){let o=new id(i),s=new Ue,c=new Ue,u=new Array,d=Ct.ASCII_ENCODE;do if(d===Ct.ASCII_ENCODE)d=this.decodeAsciiSegment(o,s,c);else{switch(d){case Ct.C40_ENCODE:this.decodeC40Segment(o,s);break;case Ct.TEXT_ENCODE:this.decodeTextSegment(o,s);break;case Ct.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,s);break;case Ct.EDIFACT_ENCODE:this.decodeEdifactSegment(o,s);break;case Ct.BASE256_ENCODE:this.decodeBase256Segment(o,s,u);break;default:throw new z}d=Ct.ASCII_ENCODE}while(d!==Ct.PAD_ENCODE&&o.available()>0);return c.length()>0&&s.append(c.toString()),new Jo(i,s.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(i,o,s){let c=!1;do{let u=i.readBits(8);if(u===0)throw new z;if(u<=128)return c&&(u+=128),o.append(String.fromCharCode(u-1)),Ct.ASCII_ENCODE;if(u===129)return Ct.PAD_ENCODE;if(u<=229){let d=u-130;d<10&&o.append("0"),o.append(""+d)}else switch(u){case 230:return Ct.C40_ENCODE;case 231:return Ct.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:o.append("[)>05"),s.insert(0,"");break;case 237:o.append("[)>06"),s.insert(0,"");break;case 238:return Ct.ANSIX12_ENCODE;case 239:return Ct.TEXT_ENCODE;case 240:return Ct.EDIFACT_ENCODE;case 241:break;default:if(u!==254||i.available()!==0)throw new z;break}}while(i.available()>0);return Ct.ASCII_ENCODE}static decodeC40Segment(i,o){let s=!1,c=[],u=0;do{if(i.available()===8)return;let d=i.readBits(8);if(d===254)return;this.parseTwoBytes(d,i.readBits(8),c);for(let f=0;f<3;f++){let p=c[f];switch(u){case 0:if(p<3)u=p+1;else if(p<this.C40_BASIC_SET_CHARS.length){let m=this.C40_BASIC_SET_CHARS[p];s?(o.append(String.fromCharCode(m.charCodeAt(0)+128)),s=!1):o.append(m)}else throw new z;break;case 1:s?(o.append(String.fromCharCode(p+128)),s=!1):o.append(String.fromCharCode(p)),u=0;break;case 2:if(p<this.C40_SHIFT2_SET_CHARS.length){let m=this.C40_SHIFT2_SET_CHARS[p];s?(o.append(String.fromCharCode(m.charCodeAt(0)+128)),s=!1):o.append(m)}else switch(p){case 27:o.append("");break;case 30:s=!0;break;default:throw new z}u=0;break;case 3:s?(o.append(String.fromCharCode(p+224)),s=!1):o.append(String.fromCharCode(p+96)),u=0;break;default:throw new z}}}while(i.available()>0)}static decodeTextSegment(i,o){let s=!1,c=[],u=0;do{if(i.available()===8)return;let d=i.readBits(8);if(d===254)return;this.parseTwoBytes(d,i.readBits(8),c);for(let f=0;f<3;f++){let p=c[f];switch(u){case 0:if(p<3)u=p+1;else if(p<this.TEXT_BASIC_SET_CHARS.length){let m=this.TEXT_BASIC_SET_CHARS[p];s?(o.append(String.fromCharCode(m.charCodeAt(0)+128)),s=!1):o.append(m)}else throw new z;break;case 1:s?(o.append(String.fromCharCode(p+128)),s=!1):o.append(String.fromCharCode(p)),u=0;break;case 2:if(p<this.TEXT_SHIFT2_SET_CHARS.length){let m=this.TEXT_SHIFT2_SET_CHARS[p];s?(o.append(String.fromCharCode(m.charCodeAt(0)+128)),s=!1):o.append(m)}else switch(p){case 27:o.append("");break;case 30:s=!0;break;default:throw new z}u=0;break;case 3:if(p<this.TEXT_SHIFT3_SET_CHARS.length){let m=this.TEXT_SHIFT3_SET_CHARS[p];s?(o.append(String.fromCharCode(m.charCodeAt(0)+128)),s=!1):o.append(m),u=0}else throw new z;break;default:throw new z}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){let s=[];do{if(i.available()===8)return;let c=i.readBits(8);if(c===254)return;this.parseTwoBytes(c,i.readBits(8),s);for(let u=0;u<3;u++){let d=s[u];switch(d){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(d<14)o.append(String.fromCharCode(d+44));else if(d<40)o.append(String.fromCharCode(d+51));else throw new z;break}}}while(i.available()>0)}static parseTwoBytes(i,o,s){let c=(i<<8)+o-1,u=Math.floor(c/1600);s[0]=u,c-=u*1600,u=Math.floor(c/40),s[1]=u,s[2]=c-u*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let s=0;s<4;s++){let c=i.readBits(6);if(c===31){let u=8-i.getBitOffset();u!==8&&i.readBits(u);return}(c&32)===0&&(c|=64),o.append(String.fromCharCode(c))}}while(i.available()>0)}static decodeBase256Segment(i,o,s){let c=1+i.getByteOffset(),u=this.unrandomize255State(i.readBits(8),c++),d;if(u===0?d=i.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(i.readBits(8),c++),d<0)throw new z;let f=new Uint8Array(d);for(let p=0;p<d;p++){if(i.available()<8)throw new z;f[p]=this.unrandomize255State(i.readBits(8),c++)}s.push(f);try{o.append(Gt.decode(f,ce.ISO88591))}catch(p){throw new tr("Platform does not support required encoding: "+p.message)}}static unrandomize255State(i,o){let s=149*o%255+1,c=i-s;return c>=0?c:c+256}}Tr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Tr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Tr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Tr.TEXT_SHIFT2_SET_CHARS=Tr.C40_SHIFT2_SET_CHARS,Tr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"];class aC{constructor(){this.rsDecoder=new ns(Oe.DATA_MATRIX_FIELD_256)}decode(i){let o=new nd(i),s=o.getVersion(),c=o.readCodewords(),u=rd.getDataBlocks(c,s),d=0;for(let m of u)d+=m.getNumDataCodewords();let f=new Uint8Array(d),p=u.length;for(let m=0;m<p;m++){let C=u[m],w=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(w,I);for(let A=0;A<I;A++)f[A*p+m]=w[A]}return Tr.decode(f)}correctErrors(i,o){let s=new Int32Array(i);try{this.rsDecoder.decode(s,i.length-o)}catch{throw new b}for(let c=0;c<o;c++)i[c]=s[c]}}class nt{constructor(i){this.image=i,this.rectangleDetector=new ja(this.image)}detect(){let i=this.rectangleDetector.detect(),o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new L;o=this.shiftToModuleCenter(o);let s=o[0],c=o[1],u=o[2],d=o[3],f=this.transitionsBetween(s,d)+1,p=this.transitionsBetween(u,d)+1;(f&1)===1&&(f+=1),(p&1)===1&&(p+=1),4*f<7*p&&4*p<7*f&&(f=p=Math.max(f,p));let m=nt.sampleGrid(this.image,s,c,u,d,f,p);return new Va(m,[s,c,u,d])}static shiftPoint(i,o,s){let c=(o.getX()-i.getX())/(s+1),u=(o.getY()-i.getY())/(s+1);return new J(i.getX()+c,i.getY()+u)}static moveAway(i,o,s){let c=i.getX(),u=i.getY();return c<o?c-=1:c+=1,u<s?u-=1:u+=1,new J(c,u)}detectSolid1(i){let o=i[0],s=i[1],c=i[3],u=i[2],d=this.transitionsBetween(o,s),f=this.transitionsBetween(s,c),p=this.transitionsBetween(c,u),m=this.transitionsBetween(u,o),C=d,w=[u,o,s,c];return C>f&&(C=f,w[0]=o,w[1]=s,w[2]=c,w[3]=u),C>p&&(C=p,w[0]=s,w[1]=c,w[2]=u,w[3]=o),C>m&&(w[0]=c,w[1]=u,w[2]=o,w[3]=s),w}detectSolid2(i){let o=i[0],s=i[1],c=i[2],u=i[3],d=this.transitionsBetween(o,u),f=nt.shiftPoint(s,c,(d+1)*4),p=nt.shiftPoint(c,s,(d+1)*4),m=this.transitionsBetween(f,o),C=this.transitionsBetween(p,u);return m<C?(i[0]=o,i[1]=s,i[2]=c,i[3]=u):(i[0]=s,i[1]=c,i[2]=u,i[3]=o),i}correctTopRight(i){let o=i[0],s=i[1],c=i[2],u=i[3],d=this.transitionsBetween(o,u),f=this.transitionsBetween(s,u),p=nt.shiftPoint(o,s,(f+1)*4),m=nt.shiftPoint(c,s,(d+1)*4);d=this.transitionsBetween(p,u),f=this.transitionsBetween(m,u);let C=new J(u.getX()+(c.getX()-s.getX())/(d+1),u.getY()+(c.getY()-s.getY())/(d+1)),w=new J(u.getX()+(o.getX()-s.getX())/(f+1),u.getY()+(o.getY()-s.getY())/(f+1));if(!this.isValid(C))return this.isValid(w)?w:null;if(!this.isValid(w))return C;let I=this.transitionsBetween(p,C)+this.transitionsBetween(m,C),A=this.transitionsBetween(p,w)+this.transitionsBetween(m,w);return I>A?C:w}shiftToModuleCenter(i){let o=i[0],s=i[1],c=i[2],u=i[3],d=this.transitionsBetween(o,u)+1,f=this.transitionsBetween(c,u)+1,p=nt.shiftPoint(o,s,f*4),m=nt.shiftPoint(c,s,d*4);d=this.transitionsBetween(p,u)+1,f=this.transitionsBetween(m,u)+1,(d&1)===1&&(d+=1),(f&1)===1&&(f+=1);let C=(o.getX()+s.getX()+c.getX()+u.getX())/4,w=(o.getY()+s.getY()+c.getY()+u.getY())/4;o=nt.moveAway(o,C,w),s=nt.moveAway(s,C,w),c=nt.moveAway(c,C,w),u=nt.moveAway(u,C,w);let I,A;return p=nt.shiftPoint(o,s,f*4),p=nt.shiftPoint(p,u,d*4),I=nt.shiftPoint(s,o,f*4),I=nt.shiftPoint(I,c,d*4),m=nt.shiftPoint(c,u,f*4),m=nt.shiftPoint(m,s,d*4),A=nt.shiftPoint(u,c,f*4),A=nt.shiftPoint(A,o,d*4),[p,I,m,A]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,s,c,u,d,f){return br.getInstance().sampleGrid(i,d,f,.5,.5,d-.5,.5,d-.5,f-.5,.5,f-.5,o.getX(),o.getY(),u.getX(),u.getY(),c.getX(),c.getY(),s.getX(),s.getY())}transitionsBetween(i,o){let s=Math.trunc(i.getX()),c=Math.trunc(i.getY()),u=Math.trunc(o.getX()),d=Math.trunc(o.getY()),f=Math.abs(d-c)>Math.abs(u-s);if(f){let S=s;s=c,c=S,S=u,u=d,d=S}let p=Math.abs(u-s),m=Math.abs(d-c),C=-p/2,w=c<d?1:-1,I=s<u?1:-1,A=0,_=this.image.get(f?c:s,f?s:c);for(let S=s,M=c;S!==u;S+=I){let R=this.image.get(f?M:S,f?S:M);if(R!==_&&(A++,_=R),C+=m,C>0){if(M===d)break;M+=w,C-=p}}return A}}let Wa=(()=>{class y{constructor(){this.decoder=new aC}decode(o,s=null){let c,u;if(s!=null&&s.has(Ce.PURE_BARCODE)){let C=y.extractPureBits(o.getBlackMatrix());c=this.decoder.decode(C),u=y.NO_POINTS}else{let C=new nt(o.getBlackMatrix()).detect();c=this.decoder.decode(C.getBits()),u=C.getPoints()}let d=c.getRawBytes(),f=new Bt(c.getText(),d,8*d.length,u,re.DATA_MATRIX,T.currentTimeMillis()),p=c.getByteSegments();p!=null&&f.putMetadata(vt.BYTE_SEGMENTS,p);let m=c.getECLevel();return m!=null&&f.putMetadata(vt.ERROR_CORRECTION_LEVEL,m),f}reset(){}static extractPureBits(o){let s=o.getTopLeftOnBit(),c=o.getBottomRightOnBit();if(s==null||c==null)throw new L;let u=this.moduleSize(s,o),d=s[1],f=c[1],p=s[0],C=(c[0]-p+1)/u,w=(f-d+1)/u;if(C<=0||w<=0)throw new L;let I=u/2;d+=I,p+=I;let A=new yt(C,w);for(let _=0;_<w;_++){let S=d+_*u;for(let M=0;M<C;M++)o.get(p+M*u,S)&&A.set(M,_)}return A}static moduleSize(o,s){let c=s.getWidth(),u=o[0],d=o[1];for(;u<c&&s.get(u,d);)u++;if(u===c)throw new L;let f=u-o[0];if(f===0)throw new L;return f}}return y.NO_POINTS=[],y})();class cC extends si{constructor(i=500){super(new Wa,i)}}var is=function(y){return y[y.L=0]="L",y[y.M=1]="M",y[y.Q=2]="Q",y[y.H=3]="H",y}(is||{});class Ye{constructor(i,o,s){this.value=i,this.stringValue=o,this.bits=s,Ye.FOR_BITS.set(s,this),Ye.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Ye.L;case"M":return Ye.M;case"Q":return Ye.Q;case"H":return Ye.H;default:throw new E(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Ye))return!1;let o=i;return this.value===o.value}static forBits(i){if(i<0||i>=Ye.FOR_BITS.size)throw new v;return Ye.FOR_BITS.get(i)}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.L=new Ye(is.L,"L",1),Ye.M=new Ye(is.M,"M",0),Ye.Q=new Ye(is.Q,"Q",3),Ye.H=new Ye(is.H,"H",2);class Ot{constructor(i){this.errorCorrectionLevel=Ye.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return U.bitCount(i^o)}static decodeFormatInformation(i,o){let s=Ot.doDecodeFormatInformation(i,o);return s!==null?s:Ot.doDecodeFormatInformation(i^Ot.FORMAT_INFO_MASK_QR,o^Ot.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let s=Number.MAX_SAFE_INTEGER,c=0;for(let u of Ot.FORMAT_INFO_DECODE_LOOKUP){let d=u[0];if(d===i||d===o)return new Ot(u[1]);let f=Ot.numBitsDiffering(i,d);f<s&&(c=u[1],s=f),i!==o&&(f=Ot.numBitsDiffering(o,d),f<s&&(c=u[1],s=f))}return s<=3?new Ot(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Ot))return!1;let o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Ot.FORMAT_INFO_MASK_QR=21522,Ot.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class N{constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0,o=this.ecBlocks;for(let s of o)i+=s.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class D{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ee{constructor(i,o,...s){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=s;let c=0,u=s[0].getECCodewordsPerBlock(),d=s[0].getECBlocks();for(let f of d)c+=f.getCount()*(f.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new z;try{return this.getVersionForNumber((i-17)/4)}catch{throw new z}}static getVersionForNumber(i){if(i<1||i>40)throw new v;return ee.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,s=0;for(let c=0;c<ee.VERSION_DECODE_INFO.length;c++){let u=ee.VERSION_DECODE_INFO[c];if(u===i)return ee.getVersionForNumber(c+7);let d=Ot.numBitsDiffering(i,u);d<o&&(s=c+7,o=d)}return o<=3?ee.getVersionForNumber(s):null}buildFunctionPattern(){let i=this.getDimensionForVersion(),o=new yt(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);let s=this.alignmentPatternCenters.length;for(let c=0;c<s;c++){let u=this.alignmentPatternCenters[c]-2;for(let d=0;d<s;d++)c===0&&(d===0||d===s-1)||c===s-1&&d===0||o.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}ee.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ee.VERSIONS=[new ee(1,new Int32Array(0),new N(7,new D(1,19)),new N(10,new D(1,16)),new N(13,new D(1,13)),new N(17,new D(1,9))),new ee(2,Int32Array.from([6,18]),new N(10,new D(1,34)),new N(16,new D(1,28)),new N(22,new D(1,22)),new N(28,new D(1,16))),new ee(3,Int32Array.from([6,22]),new N(15,new D(1,55)),new N(26,new D(1,44)),new N(18,new D(2,17)),new N(22,new D(2,13))),new ee(4,Int32Array.from([6,26]),new N(20,new D(1,80)),new N(18,new D(2,32)),new N(26,new D(2,24)),new N(16,new D(4,9))),new ee(5,Int32Array.from([6,30]),new N(26,new D(1,108)),new N(24,new D(2,43)),new N(18,new D(2,15),new D(2,16)),new N(22,new D(2,11),new D(2,12))),new ee(6,Int32Array.from([6,34]),new N(18,new D(2,68)),new N(16,new D(4,27)),new N(24,new D(4,19)),new N(28,new D(4,15))),new ee(7,Int32Array.from([6,22,38]),new N(20,new D(2,78)),new N(18,new D(4,31)),new N(18,new D(2,14),new D(4,15)),new N(26,new D(4,13),new D(1,14))),new ee(8,Int32Array.from([6,24,42]),new N(24,new D(2,97)),new N(22,new D(2,38),new D(2,39)),new N(22,new D(4,18),new D(2,19)),new N(26,new D(4,14),new D(2,15))),new ee(9,Int32Array.from([6,26,46]),new N(30,new D(2,116)),new N(22,new D(3,36),new D(2,37)),new N(20,new D(4,16),new D(4,17)),new N(24,new D(4,12),new D(4,13))),new ee(10,Int32Array.from([6,28,50]),new N(18,new D(2,68),new D(2,69)),new N(26,new D(4,43),new D(1,44)),new N(24,new D(6,19),new D(2,20)),new N(28,new D(6,15),new D(2,16))),new ee(11,Int32Array.from([6,30,54]),new N(20,new D(4,81)),new N(30,new D(1,50),new D(4,51)),new N(28,new D(4,22),new D(4,23)),new N(24,new D(3,12),new D(8,13))),new ee(12,Int32Array.from([6,32,58]),new N(24,new D(2,92),new D(2,93)),new N(22,new D(6,36),new D(2,37)),new N(26,new D(4,20),new D(6,21)),new N(28,new D(7,14),new D(4,15))),new ee(13,Int32Array.from([6,34,62]),new N(26,new D(4,107)),new N(22,new D(8,37),new D(1,38)),new N(24,new D(8,20),new D(4,21)),new N(22,new D(12,11),new D(4,12))),new ee(14,Int32Array.from([6,26,46,66]),new N(30,new D(3,115),new D(1,116)),new N(24,new D(4,40),new D(5,41)),new N(20,new D(11,16),new D(5,17)),new N(24,new D(11,12),new D(5,13))),new ee(15,Int32Array.from([6,26,48,70]),new N(22,new D(5,87),new D(1,88)),new N(24,new D(5,41),new D(5,42)),new N(30,new D(5,24),new D(7,25)),new N(24,new D(11,12),new D(7,13))),new ee(16,Int32Array.from([6,26,50,74]),new N(24,new D(5,98),new D(1,99)),new N(28,new D(7,45),new D(3,46)),new N(24,new D(15,19),new D(2,20)),new N(30,new D(3,15),new D(13,16))),new ee(17,Int32Array.from([6,30,54,78]),new N(28,new D(1,107),new D(5,108)),new N(28,new D(10,46),new D(1,47)),new N(28,new D(1,22),new D(15,23)),new N(28,new D(2,14),new D(17,15))),new ee(18,Int32Array.from([6,30,56,82]),new N(30,new D(5,120),new D(1,121)),new N(26,new D(9,43),new D(4,44)),new N(28,new D(17,22),new D(1,23)),new N(28,new D(2,14),new D(19,15))),new ee(19,Int32Array.from([6,30,58,86]),new N(28,new D(3,113),new D(4,114)),new N(26,new D(3,44),new D(11,45)),new N(26,new D(17,21),new D(4,22)),new N(26,new D(9,13),new D(16,14))),new ee(20,Int32Array.from([6,34,62,90]),new N(28,new D(3,107),new D(5,108)),new N(26,new D(3,41),new D(13,42)),new N(30,new D(15,24),new D(5,25)),new N(28,new D(15,15),new D(10,16))),new ee(21,Int32Array.from([6,28,50,72,94]),new N(28,new D(4,116),new D(4,117)),new N(26,new D(17,42)),new N(28,new D(17,22),new D(6,23)),new N(30,new D(19,16),new D(6,17))),new ee(22,Int32Array.from([6,26,50,74,98]),new N(28,new D(2,111),new D(7,112)),new N(28,new D(17,46)),new N(30,new D(7,24),new D(16,25)),new N(24,new D(34,13))),new ee(23,Int32Array.from([6,30,54,78,102]),new N(30,new D(4,121),new D(5,122)),new N(28,new D(4,47),new D(14,48)),new N(30,new D(11,24),new D(14,25)),new N(30,new D(16,15),new D(14,16))),new ee(24,Int32Array.from([6,28,54,80,106]),new N(30,new D(6,117),new D(4,118)),new N(28,new D(6,45),new D(14,46)),new N(30,new D(11,24),new D(16,25)),new N(30,new D(30,16),new D(2,17))),new ee(25,Int32Array.from([6,32,58,84,110]),new N(26,new D(8,106),new D(4,107)),new N(28,new D(8,47),new D(13,48)),new N(30,new D(7,24),new D(22,25)),new N(30,new D(22,15),new D(13,16))),new ee(26,Int32Array.from([6,30,58,86,114]),new N(28,new D(10,114),new D(2,115)),new N(28,new D(19,46),new D(4,47)),new N(28,new D(28,22),new D(6,23)),new N(30,new D(33,16),new D(4,17))),new ee(27,Int32Array.from([6,34,62,90,118]),new N(30,new D(8,122),new D(4,123)),new N(28,new D(22,45),new D(3,46)),new N(30,new D(8,23),new D(26,24)),new N(30,new D(12,15),new D(28,16))),new ee(28,Int32Array.from([6,26,50,74,98,122]),new N(30,new D(3,117),new D(10,118)),new N(28,new D(3,45),new D(23,46)),new N(30,new D(4,24),new D(31,25)),new N(30,new D(11,15),new D(31,16))),new ee(29,Int32Array.from([6,30,54,78,102,126]),new N(30,new D(7,116),new D(7,117)),new N(28,new D(21,45),new D(7,46)),new N(30,new D(1,23),new D(37,24)),new N(30,new D(19,15),new D(26,16))),new ee(30,Int32Array.from([6,26,52,78,104,130]),new N(30,new D(5,115),new D(10,116)),new N(28,new D(19,47),new D(10,48)),new N(30,new D(15,24),new D(25,25)),new N(30,new D(23,15),new D(25,16))),new ee(31,Int32Array.from([6,30,56,82,108,134]),new N(30,new D(13,115),new D(3,116)),new N(28,new D(2,46),new D(29,47)),new N(30,new D(42,24),new D(1,25)),new N(30,new D(23,15),new D(28,16))),new ee(32,Int32Array.from([6,34,60,86,112,138]),new N(30,new D(17,115)),new N(28,new D(10,46),new D(23,47)),new N(30,new D(10,24),new D(35,25)),new N(30,new D(19,15),new D(35,16))),new ee(33,Int32Array.from([6,30,58,86,114,142]),new N(30,new D(17,115),new D(1,116)),new N(28,new D(14,46),new D(21,47)),new N(30,new D(29,24),new D(19,25)),new N(30,new D(11,15),new D(46,16))),new ee(34,Int32Array.from([6,34,62,90,118,146]),new N(30,new D(13,115),new D(6,116)),new N(28,new D(14,46),new D(23,47)),new N(30,new D(44,24),new D(7,25)),new N(30,new D(59,16),new D(1,17))),new ee(35,Int32Array.from([6,30,54,78,102,126,150]),new N(30,new D(12,121),new D(7,122)),new N(28,new D(12,47),new D(26,48)),new N(30,new D(39,24),new D(14,25)),new N(30,new D(22,15),new D(41,16))),new ee(36,Int32Array.from([6,24,50,76,102,128,154]),new N(30,new D(6,121),new D(14,122)),new N(28,new D(6,47),new D(34,48)),new N(30,new D(46,24),new D(10,25)),new N(30,new D(2,15),new D(64,16))),new ee(37,Int32Array.from([6,28,54,80,106,132,158]),new N(30,new D(17,122),new D(4,123)),new N(28,new D(29,46),new D(14,47)),new N(30,new D(49,24),new D(10,25)),new N(30,new D(24,15),new D(46,16))),new ee(38,Int32Array.from([6,32,58,84,110,136,162]),new N(30,new D(4,122),new D(18,123)),new N(28,new D(13,46),new D(32,47)),new N(30,new D(48,24),new D(14,25)),new N(30,new D(42,15),new D(32,16))),new ee(39,Int32Array.from([6,26,54,82,110,138,166]),new N(30,new D(20,117),new D(4,118)),new N(28,new D(40,47),new D(7,48)),new N(30,new D(43,24),new D(22,25)),new N(30,new D(10,15),new D(67,16))),new ee(40,Int32Array.from([6,30,58,86,114,142,170]),new N(30,new D(19,118),new D(6,119)),new N(28,new D(18,47),new D(31,48)),new N(30,new D(34,24),new D(34,25)),new N(30,new D(20,15),new D(61,16)))];var Dt=function(y){return y[y.DATA_MASK_000=0]="DATA_MASK_000",y[y.DATA_MASK_001=1]="DATA_MASK_001",y[y.DATA_MASK_010=2]="DATA_MASK_010",y[y.DATA_MASK_011=3]="DATA_MASK_011",y[y.DATA_MASK_100=4]="DATA_MASK_100",y[y.DATA_MASK_101=5]="DATA_MASK_101",y[y.DATA_MASK_110=6]="DATA_MASK_110",y[y.DATA_MASK_111=7]="DATA_MASK_111",y}(Dt||{});class mn{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let s=0;s<o;s++)for(let c=0;c<o;c++)this.isMasked(s,c)&&i.flip(c,s)}}mn.values=new Map([[Dt.DATA_MASK_000,new mn(Dt.DATA_MASK_000,(y,i)=>(y+i&1)===0)],[Dt.DATA_MASK_001,new mn(Dt.DATA_MASK_001,(y,i)=>(y&1)===0)],[Dt.DATA_MASK_010,new mn(Dt.DATA_MASK_010,(y,i)=>i%3===0)],[Dt.DATA_MASK_011,new mn(Dt.DATA_MASK_011,(y,i)=>(y+i)%3===0)],[Dt.DATA_MASK_100,new mn(Dt.DATA_MASK_100,(y,i)=>(Math.floor(y/2)+Math.floor(i/3)&1)===0)],[Dt.DATA_MASK_101,new mn(Dt.DATA_MASK_101,(y,i)=>y*i%6===0)],[Dt.DATA_MASK_110,new mn(Dt.DATA_MASK_110,(y,i)=>y*i%6<3)],[Dt.DATA_MASK_111,new mn(Dt.DATA_MASK_111,(y,i)=>(y+i+y*i%3&1)===0)]]);class lC{constructor(i){let o=i.getHeight();if(o<21||(o&3)!==1)throw new z;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let u=0;u<6;u++)i=this.copyBit(u,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let u=5;u>=0;u--)i=this.copyBit(8,u,i);let o=this.bitMatrix.getHeight(),s=0,c=o-7;for(let u=o-1;u>=c;u--)s=this.copyBit(8,u,s);for(let u=o-8;u<o;u++)s=this.copyBit(u,8,s);if(this.parsedFormatInfo=Ot.decodeFormatInformation(i,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return ee.getVersionForNumber(o);let s=0,c=i-11;for(let d=5;d>=0;d--)for(let f=i-9;f>=c;f--)s=this.copyBit(f,d,s);let u=ee.decodeVersionInformation(s);if(u!==null&&u.getDimensionForVersion()===i)return this.parsedVersion=u,u;s=0;for(let d=5;d>=0;d--)for(let f=i-9;f>=c;f--)s=this.copyBit(d,f,s);if(u=ee.decodeVersionInformation(s),u!==null&&u.getDimensionForVersion()===i)return this.parsedVersion=u,u;throw new z}copyBit(i,o,s){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?s<<1|1:s<<1}readCodewords(){let i=this.readFormatInformation(),o=this.readVersion(),s=mn.values.get(i.getDataMask()),c=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,c);let u=o.buildFunctionPattern(),d=!0,f=new Uint8Array(o.getTotalCodewords()),p=0,m=0,C=0;for(let w=c-1;w>0;w-=2){w===6&&w--;for(let I=0;I<c;I++){let A=d?c-1-I:I;for(let _=0;_<2;_++)u.get(w-_,A)||(C++,m<<=1,this.bitMatrix.get(w-_,A)&&(m|=1),C===8&&(f[p++]=m,C=0,m=0))}d=!d}if(p!==o.getTotalCodewords())throw new z;return f}remask(){if(this.parsedFormatInfo===null)return;let i=mn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){let i=this.bitMatrix;for(let o=0,s=i.getWidth();o<s;o++)for(let c=o+1,u=i.getHeight();c<u;c++)i.get(o,c)!==i.get(c,o)&&(i.flip(c,o),i.flip(o,c))}}class od{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,s){if(i.length!==o.getTotalCodewords())throw new v;let c=o.getECBlocksForLevel(s),u=0,d=c.getECBlocks();for(let _ of d)u+=_.getCount();let f=new Array(u),p=0;for(let _ of d)for(let S=0;S<_.getCount();S++){let M=_.getDataCodewords(),R=c.getECCodewordsPerBlock()+M;f[p++]=new od(M,new Uint8Array(R))}let m=f[0].codewords.length,C=f.length-1;for(;C>=0&&f[C].codewords.length!==m;)C--;C++;let w=m-c.getECCodewordsPerBlock(),I=0;for(let _=0;_<w;_++)for(let S=0;S<p;S++)f[S].codewords[_]=i[I++];for(let _=C;_<p;_++)f[_].codewords[w]=i[I++];let A=f[0].codewords.length;for(let _=w;_<A;_++)for(let S=0;S<p;S++){let M=S<C?_:_+1;f[S].codewords[M]=i[I++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Mn=function(y){return y[y.TERMINATOR=0]="TERMINATOR",y[y.NUMERIC=1]="NUMERIC",y[y.ALPHANUMERIC=2]="ALPHANUMERIC",y[y.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",y[y.BYTE=4]="BYTE",y[y.ECI=5]="ECI",y[y.KANJI=6]="KANJI",y[y.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",y[y.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",y[y.HANZI=9]="HANZI",y}(Mn||{});class ne{constructor(i,o,s,c){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=s,this.bits=c,ne.FOR_BITS.set(c,this),ne.FOR_VALUE.set(i,this)}static forBits(i){let o=ne.FOR_BITS.get(i);if(o===void 0)throw new v;return o}getCharacterCountBits(i){let o=i.getVersionNumber(),s;return o<=9?s=0:o<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof ne))return!1;let o=i;return this.value===o.value}toString(){return this.stringValue}}ne.FOR_BITS=new Map,ne.FOR_VALUE=new Map,ne.TERMINATOR=new ne(Mn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ne.NUMERIC=new ne(Mn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ne.ALPHANUMERIC=new ne(Mn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ne.STRUCTURED_APPEND=new ne(Mn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ne.BYTE=new ne(Mn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ne.ECI=new ne(Mn.ECI,"ECI",Int32Array.from([0,0,0]),7),ne.KANJI=new ne(Mn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ne.FNC1_FIRST_POSITION=new ne(Mn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ne.FNC1_SECOND_POSITION=new ne(Mn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ne.HANZI=new ne(Mn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let bg=(()=>{class y{static decode(o,s,c,u){let d=new id(o),f=new Ue,p=new Array,m=-1,C=-1;try{let w=null,I=!1,A;do{if(d.available()<4)A=ne.TERMINATOR;else{let _=d.readBits(4);A=ne.forBits(_)}switch(A){case ne.TERMINATOR:break;case ne.FNC1_FIRST_POSITION:case ne.FNC1_SECOND_POSITION:I=!0;break;case ne.STRUCTURED_APPEND:if(d.available()<16)throw new z;m=d.readBits(8),C=d.readBits(8);break;case ne.ECI:let _=y.parseECIValue(d);if(w=G.getCharacterSetECIByValue(_),w===null)throw new z;break;case ne.HANZI:let S=d.readBits(4),M=d.readBits(A.getCharacterCountBits(s));S===y.GB2312_SUBSET&&y.decodeHanziSegment(d,f,M);break;default:let R=d.readBits(A.getCharacterCountBits(s));switch(A){case ne.NUMERIC:y.decodeNumericSegment(d,f,R);break;case ne.ALPHANUMERIC:y.decodeAlphanumericSegment(d,f,R,I);break;case ne.BYTE:y.decodeByteSegment(d,f,R,w,p,u);break;case ne.KANJI:y.decodeKanjiSegment(d,f,R);break;default:throw new z}break}}while(A!==ne.TERMINATOR)}catch{throw new z}return new Jo(o,f.toString(),p.length===0?null:p,c===null?null:c.toString(),m,C)}static decodeHanziSegment(o,s,c){if(c*13>o.available())throw new z;let u=new Uint8Array(2*c),d=0;for(;c>0;){let f=o.readBits(13),p=f/96<<8&4294967295|f%96;p<959?p+=41377:p+=42657,u[d]=p>>8&255,u[d+1]=p&255,d+=2,c--}try{s.append(Gt.decode(u,ce.GB2312))}catch(f){throw new z(f)}}static decodeKanjiSegment(o,s,c){if(c*13>o.available())throw new z;let u=new Uint8Array(2*c),d=0;for(;c>0;){let f=o.readBits(13),p=f/192<<8&4294967295|f%192;p<7936?p+=33088:p+=49472,u[d]=p>>8,u[d+1]=p,d+=2,c--}try{s.append(Gt.decode(u,ce.SHIFT_JIS))}catch(f){throw new z(f)}}static decodeByteSegment(o,s,c,u,d,f){if(8*c>o.available())throw new z;let p=new Uint8Array(c);for(let C=0;C<c;C++)p[C]=o.readBits(8);let m;u===null?m=ce.guessEncoding(p,f):m=u.getName();try{s.append(Gt.decode(p,m))}catch(C){throw new z(C)}d.push(p)}static toAlphaNumericChar(o){if(o>=y.ALPHANUMERIC_CHARS.length)throw new z;return y.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,s,c,u){let d=s.length();for(;c>1;){if(o.available()<11)throw new z;let f=o.readBits(11);s.append(y.toAlphaNumericChar(Math.floor(f/45))),s.append(y.toAlphaNumericChar(f%45)),c-=2}if(c===1){if(o.available()<6)throw new z;s.append(y.toAlphaNumericChar(o.readBits(6)))}if(u)for(let f=d;f<s.length();f++)s.charAt(f)==="%"&&(f<s.length()-1&&s.charAt(f+1)==="%"?s.deleteCharAt(f+1):s.setCharAt(f,""))}static decodeNumericSegment(o,s,c){for(;c>=3;){if(o.available()<10)throw new z;let u=o.readBits(10);if(u>=1e3)throw new z;s.append(y.toAlphaNumericChar(Math.floor(u/100))),s.append(y.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(y.toAlphaNumericChar(u%10)),c-=3}if(c===2){if(o.available()<7)throw new z;let u=o.readBits(7);if(u>=100)throw new z;s.append(y.toAlphaNumericChar(Math.floor(u/10))),s.append(y.toAlphaNumericChar(u%10))}else if(c===1){if(o.available()<4)throw new z;let u=o.readBits(4);if(u>=10)throw new z;s.append(y.toAlphaNumericChar(u))}}static parseECIValue(o){let s=o.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){let c=o.readBits(8);return(s&63)<<8&4294967295|c}if((s&224)===192){let c=o.readBits(16);return(s&31)<<16&4294967295|c}throw new z}}return y.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",y.GB2312_SUBSET=1,y})();class _g{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;let o=i[0];i[0]=i[2],i[2]=o}}class uC{constructor(){this.rsDecoder=new ns(Oe.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix(yt.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){let s=new lC(i),c=null;try{return this.decodeBitMatrixParser(s,o)}catch(u){c=u}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();let u=this.decodeBitMatrixParser(s,o);return u.setOther(new _g(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(i,o){let s=i.readVersion(),c=i.readFormatInformation().getErrorCorrectionLevel(),u=i.readCodewords(),d=od.getDataBlocks(u,s,c),f=0;for(let C of d)f+=C.getNumDataCodewords();let p=new Uint8Array(f),m=0;for(let C of d){let w=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(w,I);for(let A=0;A<I;A++)p[m++]=w[A]}return bg.decode(p,s,c,o)}correctErrors(i,o){let s=new Int32Array(i);try{this.rsDecoder.decode(s,i.length-o)}catch{throw new b}for(let c=0;c<o;c++)i[c]=s[c]}}class sd extends J{constructor(i,o,s){super(i,o),this.estimatedModuleSize=s}aboutEquals(i,o,s){if(Math.abs(o-this.getY())<=i&&Math.abs(s-this.getX())<=i){let c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,o,s){let c=(this.getX()+o)/2,u=(this.getY()+i)/2,d=(this.estimatedModuleSize+s)/2;return new sd(c,u,d)}}class $a{constructor(i,o,s,c,u,d,f){this.image=i,this.startX=o,this.startY=s,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let i=this.startX,o=this.height,s=this.width,c=i+s,u=this.startY+o/2,d=new Int32Array(3),f=this.image;for(let p=0;p<o;p++){let m=u+((p&1)===0?Math.floor((p+1)/2):-Math.floor((p+1)/2));d[0]=0,d[1]=0,d[2]=0;let C=i;for(;C<c&&!f.get(C,m);)C++;let w=0;for(;C<c;){if(f.get(C,m))if(w===1)d[1]++;else if(w===2){if(this.foundPatternCross(d)){let I=this.handlePossibleCenter(d,m,C);if(I!==null)return I}d[0]=d[2],d[1]=1,d[2]=0,w=1}else d[++w]++;else w===1&&w++,d[w]++;C++}if(this.foundPatternCross(d)){let I=this.handlePossibleCenter(d,m,c);if(I!==null)return I}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new L}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){let o=this.moduleSize,s=o/2;for(let c=0;c<3;c++)if(Math.abs(o-i[c])>=s)return!1;return!0}crossCheckVertical(i,o,s,c){let u=this.image,d=u.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let p=i;for(;p>=0&&u.get(o,p)&&f[1]<=s;)f[1]++,p--;if(p<0||f[1]>s)return NaN;for(;p>=0&&!u.get(o,p)&&f[0]<=s;)f[0]++,p--;if(f[0]>s)return NaN;for(p=i+1;p<d&&u.get(o,p)&&f[1]<=s;)f[1]++,p++;if(p===d||f[1]>s)return NaN;for(;p<d&&!u.get(o,p)&&f[2]<=s;)f[2]++,p++;if(f[2]>s)return NaN;let m=f[0]+f[1]+f[2];return 5*Math.abs(m-c)>=2*c?NaN:this.foundPatternCross(f)?$a.centerFromEnd(f,p):NaN}handlePossibleCenter(i,o,s){let c=i[0]+i[1]+i[2],u=$a.centerFromEnd(i,s),d=this.crossCheckVertical(o,u,2*i[1],c);if(!isNaN(d)){let f=(i[0]+i[1]+i[2])/3;for(let m of this.possibleCenters)if(m.aboutEquals(f,d,u))return m.combineEstimate(d,u,f);let p=new sd(u,d,f);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null}}class ad extends J{constructor(i,o,s,c){super(i,o),this.estimatedModuleSize=s,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,s){if(Math.abs(o-this.getY())<=i&&Math.abs(s-this.getX())<=i){let c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,o,s){let c=this.count+1,u=(this.count*this.getX()+o)/c,d=(this.count*this.getY()+i)/c,f=(this.count*this.estimatedModuleSize+s)/c;return new ad(u,d,f,c)}}class dC{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let fC=(()=>{class y{constructor(o,s){this.image=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){let s=o!=null&&o.get(Ce.TRY_HARDER)!==void 0,c=o!=null&&o.get(Ce.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),f=u.getWidth(),p=Math.floor(3*d/(4*y.MAX_MODULES));(p<y.MIN_SKIP||s)&&(p=y.MIN_SKIP);let m=!1,C=new Int32Array(5);for(let I=p-1;I<d&&!m;I+=p){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let A=0;for(let _=0;_<f;_++)if(u.get(_,I))(A&1)===1&&A++,C[A]++;else if((A&1)===0)if(A===4)if(y.foundPatternCross(C)){if(this.handlePossibleCenter(C,I,_,c)===!0)if(p=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{let M=this.findRowSkip();M>C[2]&&(I+=M-C[2]-p,_=f-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,A=3;continue}A=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,A=3;else C[++A]++;else C[A]++;y.foundPatternCross(C)&&this.handlePossibleCenter(C,I,f,c)===!0&&(p=C[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}let w=this.selectBestPatterns();return J.orderBestPatterns(w),new dC(w)}static centerFromEnd(o,s){return s-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let s=0;for(let d=0;d<5;d++){let f=o[d];if(f===0)return!1;s+=f}if(s<7)return!1;let c=s/7,u=c/2;return Math.abs(c-o[0])<u&&Math.abs(c-o[1])<u&&Math.abs(3*c-o[2])<3*u&&Math.abs(c-o[3])<u&&Math.abs(c-o[4])<u}getCrossCheckStateCount(){let o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,s,c,u){let d=this.getCrossCheckStateCount(),f=0,p=this.image;for(;o>=f&&s>=f&&p.get(s-f,o-f);)d[2]++,f++;if(o<f||s<f)return!1;for(;o>=f&&s>=f&&!p.get(s-f,o-f)&&d[1]<=c;)d[1]++,f++;if(o<f||s<f||d[1]>c)return!1;for(;o>=f&&s>=f&&p.get(s-f,o-f)&&d[0]<=c;)d[0]++,f++;if(d[0]>c)return!1;let m=p.getHeight(),C=p.getWidth();for(f=1;o+f<m&&s+f<C&&p.get(s+f,o+f);)d[2]++,f++;if(o+f>=m||s+f>=C)return!1;for(;o+f<m&&s+f<C&&!p.get(s+f,o+f)&&d[3]<c;)d[3]++,f++;if(o+f>=m||s+f>=C||d[3]>=c)return!1;for(;o+f<m&&s+f<C&&p.get(s+f,o+f)&&d[4]<c;)d[4]++,f++;if(d[4]>=c)return!1;let w=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(w-u)<2*u&&y.foundPatternCross(d)}crossCheckVertical(o,s,c,u){let d=this.image,f=d.getHeight(),p=this.getCrossCheckStateCount(),m=o;for(;m>=0&&d.get(s,m);)p[2]++,m--;if(m<0)return NaN;for(;m>=0&&!d.get(s,m)&&p[1]<=c;)p[1]++,m--;if(m<0||p[1]>c)return NaN;for(;m>=0&&d.get(s,m)&&p[0]<=c;)p[0]++,m--;if(p[0]>c)return NaN;for(m=o+1;m<f&&d.get(s,m);)p[2]++,m++;if(m===f)return NaN;for(;m<f&&!d.get(s,m)&&p[3]<c;)p[3]++,m++;if(m===f||p[3]>=c)return NaN;for(;m<f&&d.get(s,m)&&p[4]<c;)p[4]++,m++;if(p[4]>=c)return NaN;let C=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(C-u)>=2*u?NaN:y.foundPatternCross(p)?y.centerFromEnd(p,m):NaN}crossCheckHorizontal(o,s,c,u){let d=this.image,f=d.getWidth(),p=this.getCrossCheckStateCount(),m=o;for(;m>=0&&d.get(m,s);)p[2]++,m--;if(m<0)return NaN;for(;m>=0&&!d.get(m,s)&&p[1]<=c;)p[1]++,m--;if(m<0||p[1]>c)return NaN;for(;m>=0&&d.get(m,s)&&p[0]<=c;)p[0]++,m--;if(p[0]>c)return NaN;for(m=o+1;m<f&&d.get(m,s);)p[2]++,m++;if(m===f)return NaN;for(;m<f&&!d.get(m,s)&&p[3]<c;)p[3]++,m++;if(m===f||p[3]>=c)return NaN;for(;m<f&&d.get(m,s)&&p[4]<c;)p[4]++,m++;if(p[4]>=c)return NaN;let C=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(C-u)>=u?NaN:y.foundPatternCross(p)?y.centerFromEnd(p,m):NaN}handlePossibleCenter(o,s,c,u){let d=o[0]+o[1]+o[2]+o[3]+o[4],f=y.centerFromEnd(o,c),p=this.crossCheckVertical(s,Math.floor(f),o[2],d);if(!isNaN(p)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(p),o[2],d),!isNaN(f)&&(!u||this.crossCheckDiagonal(Math.floor(p),Math.floor(f),o[2],d)))){let m=d/7,C=!1,w=this.possibleCenters;for(let I=0,A=w.length;I<A;I++){let _=w[I];if(_.aboutEquals(m,p,f)){w[I]=_.combineEstimate(p,f,m),C=!0;break}}if(!C){let I=new ad(f,p,m);w.push(I),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(I)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(let c of this.possibleCenters)if(c.getCount()>=y.CENTER_QUORUM)if(s==null)s=c;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-c.getX())-Math.abs(s.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,s=0,c=this.possibleCenters.length;for(let f of this.possibleCenters)f.getCount()>=y.CENTER_QUORUM&&(o++,s+=f.getEstimatedModuleSize());if(o<3)return!1;let u=s/c,d=0;for(let f of this.possibleCenters)d+=Math.abs(f.getEstimatedModuleSize()-u);return d<=.05*s}selectBestPatterns(){let o=this.possibleCenters.length;if(o<3)throw new L;let s=this.possibleCenters,c;if(o>3){let u=0,d=0;for(let m of this.possibleCenters){let C=m.getEstimatedModuleSize();u+=C,d+=C*C}c=u/o;let f=Math.sqrt(d/o-c*c);s.sort((m,C)=>{let w=Math.abs(C.getEstimatedModuleSize()-c),I=Math.abs(m.getEstimatedModuleSize()-c);return w<I?-1:w>I?1:0});let p=Math.max(.2*c,f);for(let m=0;m<s.length&&s.length>3;m++){let C=s[m];Math.abs(C.getEstimatedModuleSize()-c)>p&&(s.splice(m,1),m--)}}if(s.length>3){let u=0;for(let d of s)u+=d.getEstimatedModuleSize();c=u/s.length,s.sort((d,f)=>{if(f.getCount()===d.getCount()){let p=Math.abs(f.getEstimatedModuleSize()-c),m=Math.abs(d.getEstimatedModuleSize()-c);return p<m?1:p>m?-1:0}else return f.getCount()-d.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}return y.CENTER_QUORUM=2,y.MIN_SKIP=3,y.MAX_MODULES=57,y})();class os{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(Ce.NEED_RESULT_POINT_CALLBACK);let s=new fC(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(s)}processFinderPatternInfo(i){let o=i.getTopLeft(),s=i.getTopRight(),c=i.getBottomLeft(),u=this.calculateModuleSize(o,s,c);if(u<1)throw new L("No pattern found in proccess finder.");let d=os.computeDimension(o,s,c,u),f=ee.getProvisionalVersionForDimension(d),p=f.getDimensionForVersion()-7,m=null;if(f.getAlignmentPatternCenters().length>0){let A=s.getX()-o.getX()+c.getX(),_=s.getY()-o.getY()+c.getY(),S=1-3/p,M=Math.floor(o.getX()+S*(A-o.getX())),R=Math.floor(o.getY()+S*(_-o.getY()));for(let V=4;V<=16;V<<=1)try{m=this.findAlignmentInRegion(u,M,R,V);break}catch(q){if(!(q instanceof L))throw q}}let C=os.createTransform(o,s,c,m,d),w=os.sampleGrid(this.image,C,d),I;return m===null?I=[c,o,s]:I=[c,o,s,m],new Va(w,I)}static createTransform(i,o,s,c,u){let d=u-3.5,f,p,m,C;return c!==null?(f=c.getX(),p=c.getY(),m=d-3,C=m):(f=o.getX()-i.getX()+s.getX(),p=o.getY()-i.getY()+s.getY(),m=d,C=d),bn.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,m,C,3.5,d,i.getX(),i.getY(),o.getX(),o.getY(),f,p,s.getX(),s.getY())}static sampleGrid(i,o,s){return br.getInstance().sampleGridWithTransform(i,s,s,o)}static computeDimension(i,o,s,c){let u=Ne.round(J.distance(i,o)/c),d=Ne.round(J.distance(i,s)/c),f=Math.floor((u+d)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new L("Dimensions could be not found.")}return f}calculateModuleSize(i,o,s){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,s))/2}calculateModuleSizeOneWay(i,o){let s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(s)?c/7:isNaN(c)?s/7:(s+c)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,s,c){let u=this.sizeOfBlackWhiteBlackRun(i,o,s,c),d=1,f=i-(s-i);f<0?(d=i/(i-f),f=0):f>=this.image.getWidth()&&(d=(this.image.getWidth()-1-i)/(f-i),f=this.image.getWidth()-1);let p=Math.floor(o-(c-o)*d);return d=1,p<0?(d=o/(o-p),p=0):p>=this.image.getHeight()&&(d=(this.image.getHeight()-1-o)/(p-o),p=this.image.getHeight()-1),f=Math.floor(i+(f-i)*d),u+=this.sizeOfBlackWhiteBlackRun(i,o,f,p),u-1}sizeOfBlackWhiteBlackRun(i,o,s,c){let u=Math.abs(c-o)>Math.abs(s-i);if(u){let A=i;i=o,o=A,A=s,s=c,c=A}let d=Math.abs(s-i),f=Math.abs(c-o),p=-d/2,m=i<s?1:-1,C=o<c?1:-1,w=0,I=s+m;for(let A=i,_=o;A!==I;A+=m){let S=u?_:A,M=u?A:_;if(w===1===this.image.get(S,M)){if(w===2)return Ne.distance(A,_,i,o);w++}if(p+=f,p>0){if(_===c)break;_+=C,p-=d}}return w===2?Ne.distance(s+m,c,i,o):NaN}findAlignmentInRegion(i,o,s,c){let u=Math.floor(c*i),d=Math.max(0,o-u),f=Math.min(this.image.getWidth()-1,o+u);if(f-d<i*3)throw new L("Alignment top exceeds estimated module size.");let p=Math.max(0,s-u),m=Math.min(this.image.getHeight()-1,s+u);if(m-p<i*3)throw new L("Alignment bottom exceeds estimated module size.");return new $a(this.image,d,p,f-d,m-p,i,this.resultPointCallback).find()}}class Mr{constructor(){this.decoder=new uC}getDecoder(){return this.decoder}decode(i,o){let s,c;if(o!=null&&o.get(Ce.PURE_BARCODE)!==void 0){let p=Mr.extractPureBits(i.getBlackMatrix());s=this.decoder.decodeBitMatrix(p,o),c=Mr.NO_POINTS}else{let p=new os(i.getBlackMatrix()).detect(o);s=this.decoder.decodeBitMatrix(p.getBits(),o),c=p.getPoints()}s.getOther()instanceof _g&&s.getOther().applyMirroredCorrection(c);let u=new Bt(s.getText(),s.getRawBytes(),void 0,c,re.QR_CODE,void 0),d=s.getByteSegments();d!==null&&u.putMetadata(vt.BYTE_SEGMENTS,d);let f=s.getECLevel();return f!==null&&u.putMetadata(vt.ERROR_CORRECTION_LEVEL,f),s.hasStructuredAppend()&&(u.putMetadata(vt.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),u.putMetadata(vt.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),u}reset(){}static extractPureBits(i){let o=i.getTopLeftOnBit(),s=i.getBottomRightOnBit();if(o===null||s===null)throw new L;let c=this.moduleSize(o,i),u=o[1],d=s[1],f=o[0],p=s[0];if(f>=p||u>=d)throw new L;if(d-u!==p-f&&(p=f+(d-u),p>=i.getWidth()))throw new L;let m=Math.round((p-f+1)/c),C=Math.round((d-u+1)/c);if(m<=0||C<=0)throw new L;if(C!==m)throw new L;let w=Math.floor(c/2);u+=w,f+=w;let I=f+Math.floor((m-1)*c)-p;if(I>0){if(I>w)throw new L;f-=I}let A=u+Math.floor((C-1)*c)-d;if(A>0){if(A>w)throw new L;u-=A}let _=new yt(m,C);for(let S=0;S<C;S++){let M=u+Math.floor(S*c);for(let R=0;R<m;R++)i.get(f+Math.floor(R*c),M)&&_.set(R,S)}return _}static moduleSize(i,o){let s=o.getHeight(),c=o.getWidth(),u=i[0],d=i[1],f=!0,p=0;for(;u<c&&d<s;){if(f!==o.get(u,d)){if(++p===5)break;f=!f}u++,d++}if(u===c||d===s)throw new L;return(u-i[0])/7}}Mr.NO_POINTS=new Array;class oe{PDF417Common(){}static getBitCountSum(i){return Ne.sum(i)}static toIntArray(i){if(i==null||!i.length)return oe.EMPTY_INT_ARRAY;let o=new Int32Array(i.length),s=0;for(let c of i)o[s++]=c;return o}static getCodeword(i){let o=H.binarySearch(oe.SYMBOL_TABLE,i&262143);return o<0?-1:(oe.CODEWORD_TABLE[o]-1)%oe.NUMBER_OF_CODEWORDS}}oe.NUMBER_OF_CODEWORDS=929,oe.MAX_CODEWORDS_IN_BARCODE=oe.NUMBER_OF_CODEWORDS-1,oe.MIN_ROWS_IN_BARCODE=3,oe.MAX_ROWS_IN_BARCODE=90,oe.MODULES_IN_CODEWORD=17,oe.MODULES_IN_STOP_PATTERN=18,oe.BARS_IN_MODULE=8,oe.EMPTY_INT_ARRAY=new Int32Array([]),oe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),oe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class hC{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class me{static detectMultiple(i,o,s){let c=i.getBlackMatrix(),u=me.detect(s,c);return u.length||(c=c.clone(),c.rotate180(),u=me.detect(s,c)),new hC(c,u)}static detect(i,o){let s=new Array,c=0,u=0,d=!1;for(;c<o.getHeight();){let f=me.findVertices(o,c,u);if(f[0]==null&&f[3]==null){if(!d)break;d=!1,u=0;for(let p of s)p[1]!=null&&(c=Math.trunc(Math.max(c,p[1].getY()))),p[3]!=null&&(c=Math.max(c,Math.trunc(p[3].getY())));c+=me.ROW_STEP;continue}if(d=!0,s.push(f),!i)break;f[2]!=null?(u=Math.trunc(f[2].getX()),c=Math.trunc(f[2].getY())):(u=Math.trunc(f[4].getX()),c=Math.trunc(f[4].getY()))}return s}static findVertices(i,o,s){let c=i.getHeight(),u=i.getWidth(),d=new Array(8);return me.copyToResult(d,me.findRowsWithPattern(i,c,u,o,s,me.START_PATTERN),me.INDEXES_START_PATTERN),d[4]!=null&&(s=Math.trunc(d[4].getX()),o=Math.trunc(d[4].getY())),me.copyToResult(d,me.findRowsWithPattern(i,c,u,o,s,me.STOP_PATTERN),me.INDEXES_STOP_PATTERN),d}static copyToResult(i,o,s){for(let c=0;c<s.length;c++)i[s[c]]=o[c]}static findRowsWithPattern(i,o,s,c,u,d){let f=new Array(4),p=!1,m=new Int32Array(d.length);for(;c<o;c+=me.ROW_STEP){let w=me.findGuardPattern(i,u,c,s,!1,d,m);if(w!=null){for(;c>0;){let I=me.findGuardPattern(i,u,--c,s,!1,d,m);if(I!=null)w=I;else{c++;break}}f[0]=new J(w[0],c),f[1]=new J(w[1],c),p=!0;break}}let C=c+1;if(p){let w=0,I=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;C<o;C++){let A=me.findGuardPattern(i,I[0],C,s,!1,d,m);if(A!=null&&Math.abs(I[0]-A[0])<me.MAX_PATTERN_DRIFT&&Math.abs(I[1]-A[1])<me.MAX_PATTERN_DRIFT)I=A,w=0;else{if(w>me.SKIPPED_ROW_COUNT_MAX)break;w++}}C-=w+1,f[2]=new J(I[0],C),f[3]=new J(I[1],C)}return C-c<me.BARCODE_MIN_HEIGHT&&H.fill(f,null),f}static findGuardPattern(i,o,s,c,u,d,f){H.fillWithin(f,0,f.length,0);let p=o,m=0;for(;i.get(p,s)&&p>0&&m++<me.MAX_PIXEL_DRIFT;)p--;let C=p,w=0,I=d.length;for(let A=u;C<c;C++)if(i.get(C,s)!==A)f[w]++;else{if(w===I-1){if(me.patternMatchVariance(f,d,me.MAX_INDIVIDUAL_VARIANCE)<me.MAX_AVG_VARIANCE)return new Int32Array([p,C]);p+=f[0]+f[1],T.arraycopy(f,2,f,0,w-1),f[w-1]=0,f[w]=0,w--}else w++;f[w]=1,A=!A}return w===I-1&&me.patternMatchVariance(f,d,me.MAX_INDIVIDUAL_VARIANCE)<me.MAX_AVG_VARIANCE?new Int32Array([p,C-1]):null}static patternMatchVariance(i,o,s){let c=i.length,u=0,d=0;for(let m=0;m<c;m++)u+=i[m],d+=o[m];if(u<d)return 1/0;let f=u/d;s*=f;let p=0;for(let m=0;m<c;m++){let C=i[m],w=o[m]*f,I=C>w?C-w:w-C;if(I>s)return 1/0;p+=I}return p/u}}me.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),me.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),me.MAX_AVG_VARIANCE=.42,me.MAX_INDIVIDUAL_VARIANCE=.8,me.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),me.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),me.MAX_PIXEL_DRIFT=3,me.MAX_PATTERN_DRIFT=5,me.SKIPPED_ROW_COUNT_MAX=25,me.ROW_STEP=5,me.BARCODE_MIN_HEIGHT=10;class At{constructor(i,o){if(o.length===0)throw new v;this.field=i;let s=o.length;if(s>1&&o[0]===0){let c=1;for(;c<s&&o[c]===0;)c++;c===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-c),T.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let o=this.coefficients[0],s=this.coefficients.length;for(let c=1;c<s;c++)o=this.field.add(this.field.multiply(i,o),this.coefficients[c]);return o}add(i){if(!this.field.equals(i.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,s=i.coefficients;if(o.length>s.length){let d=o;o=s,s=d}let c=new Int32Array(s.length),u=s.length-o.length;T.arraycopy(s,0,c,0,u);for(let d=u;d<s.length;d++)c[d]=this.field.add(o[d-u],s[d]);return new At(this.field,c)}subtract(i){if(!this.field.equals(i.field))throw new v("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof At?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new At(this.field,new Int32Array([0]));let o=this.coefficients,s=o.length,c=i.coefficients,u=c.length,d=new Int32Array(s+u-1);for(let f=0;f<s;f++){let p=o[f];for(let m=0;m<u;m++)d[f+m]=this.field.add(d[f+m],this.field.multiply(p,c[m]))}return new At(this.field,d)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let s=0;s<i;s++)o[s]=this.field.subtract(0,this.coefficients[s]);return new At(this.field,o)}multiplyScalar(i){if(i===0)return new At(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,s=new Int32Array(o);for(let c=0;c<o;c++)s[c]=this.field.multiply(this.coefficients[c],i);return new At(this.field,s)}multiplyByMonomial(i,o){if(i<0)throw new v;if(o===0)return new At(this.field,new Int32Array([0]));let s=this.coefficients.length,c=new Int32Array(s+i);for(let u=0;u<s;u++)c[u]=this.field.multiply(this.coefficients[u],o);return new At(this.field,c)}toString(){let i=new Ue;for(let o=this.getDegree();o>=0;o--){let s=this.getCoefficient(o);s!==0&&(s<0?(i.append(" - "),s=-s):i.length()>0&&i.append(" + "),(o===0||s!==1)&&i.append(s),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class pC{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new v;return this.logTable[i]}inverse(i){if(i===0)throw new Yu;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class cd extends pC{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let s=1;for(let c=0;c<i;c++)this.expTable[c]=s,s=s*o%i;for(let c=0;c<i-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new At(this,new Int32Array([0])),this.one=new At(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new v;if(o===0)return this.zero;let s=new Int32Array(i+1);return s[0]=o,new At(this,s)}}cd.PDF417_GF=new cd(oe.NUMBER_OF_CODEWORDS,3);class Sg{constructor(){this.field=cd.PDF417_GF}decode(i,o,s){let c=new At(this.field,i),u=new Int32Array(o),d=!1;for(let _=o;_>0;_--){let S=c.evaluateAt(this.field.exp(_));u[o-_]=S,S!==0&&(d=!0)}if(!d)return 0;let f=this.field.getOne();if(s!=null)for(let _ of s){let S=this.field.exp(i.length-1-_),M=new At(this.field,new Int32Array([this.field.subtract(0,S),1]));f=f.multiply(M)}let p=new At(this.field,u),m=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),p,o),C=m[0],w=m[1],I=this.findErrorLocations(C),A=this.findErrorMagnitudes(w,C,I);for(let _=0;_<I.length;_++){let S=i.length-1-this.field.log(I[_]);if(S<0)throw b.getChecksumInstance();i[S]=this.field.subtract(i[S],A[_])}return I.length}runEuclideanAlgorithm(i,o,s){if(i.getDegree()<o.getDegree()){let I=i;i=o,o=I}let c=i,u=o,d=this.field.getZero(),f=this.field.getOne();for(;u.getDegree()>=Math.round(s/2);){let I=c,A=d;if(c=u,d=f,c.isZero())throw b.getChecksumInstance();u=I;let _=this.field.getZero(),S=c.getCoefficient(c.getDegree()),M=this.field.inverse(S);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let R=u.getDegree()-c.getDegree(),V=this.field.multiply(u.getCoefficient(u.getDegree()),M);_=_.add(this.field.buildMonomial(R,V)),u=u.subtract(c.multiplyByMonomial(R,V))}f=_.multiply(d).subtract(A).negative()}let p=f.getCoefficient(0);if(p===0)throw b.getChecksumInstance();let m=this.field.inverse(p),C=f.multiply(m),w=u.multiply(m);return[C,w]}findErrorLocations(i){let o=i.getDegree(),s=new Int32Array(o),c=0;for(let u=1;u<this.field.getSize()&&c<o;u++)i.evaluateAt(u)===0&&(s[c]=this.field.inverse(u),c++);if(c!==o)throw b.getChecksumInstance();return s}findErrorMagnitudes(i,o,s){let c=o.getDegree(),u=new Int32Array(c);for(let m=1;m<=c;m++)u[c-m]=this.field.multiply(m,o.getCoefficient(m));let d=new At(this.field,u),f=s.length,p=new Int32Array(f);for(let m=0;m<f;m++){let C=this.field.inverse(s[m]),w=this.field.subtract(0,i.evaluateAt(C)),I=this.field.inverse(d.evaluateAt(C));p[m]=this.field.multiply(w,I)}return p}}class ui{constructor(i,o,s,c,u){i instanceof ui?this.constructor_2(i):this.constructor_1(i,o,s,c,u)}constructor_1(i,o,s,c,u){let d=o==null||s==null,f=c==null||u==null;if(d&&f)throw new L;d?(o=new J(0,c.getY()),s=new J(0,u.getY())):f&&(c=new J(i.getWidth()-1,o.getY()),u=new J(i.getWidth()-1,s.getY())),this.image=i,this.topLeft=o,this.bottomLeft=s,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(o.getX(),s.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(o.getY(),c.getY())),this.maxY=Math.trunc(Math.max(s.getY(),u.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new ui(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,s){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,f=this.bottomRight;if(i>0){let p=s?this.topLeft:this.topRight,m=Math.trunc(p.getY()-i);m<0&&(m=0);let C=new J(p.getX(),m);s?c=C:d=C}if(o>0){let p=s?this.bottomLeft:this.bottomRight,m=Math.trunc(p.getY()+o);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);let C=new J(p.getX(),m);s?u=C:f=C}return new ui(this.image,c,u,d,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class gC{constructor(i,o,s,c){this.columnCount=i,this.errorCorrectionLevel=c,this.rowCountUpperPart=o,this.rowCountLowerPart=s,this.rowCount=o+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ss{constructor(){this.buffer=""}static form(i,o){let s=-1;function c(d,f,p,m,C,w){if(d==="%%")return"%";if(o[++s]===void 0)return;d=m?parseInt(m.substr(1)):void 0;let I=C?parseInt(C.substr(1)):void 0,A;switch(w){case"s":A=o[s];break;case"c":A=o[s][0];break;case"f":A=parseFloat(o[s]).toFixed(d);break;case"p":A=parseFloat(o[s]).toPrecision(d);break;case"e":A=parseFloat(o[s]).toExponential(d);break;case"x":A=parseInt(o[s]).toString(I||16);break;case"d":A=parseFloat(parseInt(o[s],I||10).toPrecision(d)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(I);let _=parseInt(p),S=p&&p[0]+""=="0"?"0":" ";for(;A.length<_;)A=f!==void 0?A+S:S+A;return A}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(u,c)}format(i,...o){this.buffer+=ss.form(i,o)}toString(){return this.buffer}}let Tg=(()=>{class y{constructor(o){this.boundingBox=new ui(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let s=this.getCodeword(o);if(s!=null)return s;for(let c=1;c<y.MAX_NEARBY_DISTANCE;c++){let u=this.imageRowToCodewordIndex(o)-c;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(o)+c,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,s){this.codewords[this.imageRowToCodewordIndex(o)]=s}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let o=new ss,s=0;for(let c of this.codewords){if(c==null){o.format("%3d:    |   %n",s++);continue}o.format("%3d: %3d|%3d%n",s++,c.getRowNumber(),c.getValue())}return o.toString()}}return y.MAX_NEARBY_DISTANCE=5,y})();class as{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(let[s,c]of this.values.entries()){let u={getKey:()=>s,getValue:()=>c};u.getValue()>i?(i=u.getValue(),o=[],o.push(u.getKey())):u.getValue()===i&&o.push(u.getKey())}return oe.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class Mg extends Tg{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let s=this.getBoundingBox(),c=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=-1,m=1,C=0;for(let w=d;w<f;w++){if(o[w]==null)continue;let I=o[w],A=I.getRowNumber()-p;if(A===0)C++;else if(A===1)m=Math.max(m,C),C=1,p=I.getRowNumber();else if(A<0||I.getRowNumber()>=i.getRowCount()||A>w)o[w]=null;else{let _;m>2?_=(m-2)*A:_=A;let S=_>=w;for(let M=1;M<=_&&!S;M++)S=o[w-M]!=null;S?o[w]=null:(p=I.getRowNumber(),C=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let s of this.getCodewords())if(s!=null){let c=s.getRowNumber();if(c>=o.length)continue;o[c]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),s=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.getCodewords(),p=-1;for(let m=u;m<d;m++){if(f[m]==null)continue;let C=f[m];C.setRowNumberAsRowIndicatorColumn();let w=C.getRowNumber()-p;w===0||(w===1?p=C.getRowNumber():C.getRowNumber()>=i.getRowCount()?f[m]=null:p=C.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new as,s=new as,c=new as,u=new as;for(let f of i){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let p=f.getValue()%30,m=f.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:s.setValue(p*3+1);break;case 1:u.setValue(p/3),c.setValue(p%3);break;case 2:o.setValue(p+1);break}}if(o.getValue().length===0||s.getValue().length===0||c.getValue().length===0||u.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+c.getValue()[0]<oe.MIN_ROWS_IN_BARCODE||s.getValue()[0]+c.getValue()[0]>oe.MAX_ROWS_IN_BARCODE)return null;let d=new gC(o.getValue()[0],s.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,d),d}removeIncorrectCodewords(i,o){for(let s=0;s<i.length;s++){let c=i[s];if(i[s]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>o.getRowCount()){i[s]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==o.getRowCountUpperPart()&&(i[s]=null);break;case 1:(Math.trunc(u/3)!==o.getErrorCorrectionLevel()||u%3!==o.getRowCountLowerPart())&&(i[s]=null);break;case 2:u+1!==o.getColumnCount()&&(i[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class cs{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=oe.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let s=this.detectionResultColumns[o].getCodewords();for(let c=0;c<s.length;c++)s[c]!=null&&(s[c].hasValidRowNumber()||this.adjustRowNumbers(o,c,s))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<i.length;s++)if(i[s]!=null&&o[s]!=null&&i[s].getRowNumber()===o[s].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[s];u!=null&&(u.setRowNumber(i[s].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<o.length;s++){if(o[s]==null)continue;let c=o[s].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let f=this.detectionResultColumns[d].getCodewords()[s];f!=null&&(u=cs.adjustRowNumberIfValid(c,u,f),f.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let s=0;s<o.length;s++){if(o[s]==null)continue;let c=o[s].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let f=this.detectionResultColumns[d].getCodewords()[s];f!=null&&(u=cs.adjustRowNumberIfValid(c,u,f),f.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(i)?(s.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,s){if(!this.detectionResultColumns[i-1])return;let c=s[o],u=this.detectionResultColumns[i-1].getCodewords(),d=u;this.detectionResultColumns[i+1]!=null&&(d=this.detectionResultColumns[i+1].getCodewords());let f=new Array(14);f[2]=u[o],f[3]=d[o],o>0&&(f[0]=s[o-1],f[4]=u[o-1],f[5]=d[o-1]),o>1&&(f[8]=s[o-2],f[10]=u[o-2],f[11]=d[o-2]),o<s.length-1&&(f[1]=s[o+1],f[6]=u[o+1],f[7]=d[o+1]),o<s.length-2&&(f[9]=s[o+2],f[12]=u[o+2],f[13]=d[o+2]);for(let p of f)if(cs.adjustRowNumber(c,p))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new ss;for(let s=0;s<i.getCodewords().length;s++){o.format("CW %3d:",s);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){o.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[s];if(u==null){o.format("    |   ");continue}o.format(" %3d|%3d",u.getRowNumber(),u.getValue())}o.format("%n")}return o.toString()}}let mC=(()=>{class y{constructor(o,s,c,u){this.rowNumber=y.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(s),this.bucket=Math.trunc(c),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==y.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}return y.BARCODE_ROW_UNKNOWN=-1,y})();class $t{static initialize(){for(let i=0;i<oe.SYMBOL_TABLE.length;i++){let o=oe.SYMBOL_TABLE[i],s=o&1;for(let c=0;c<oe.BARS_IN_MODULE;c++){let u=0;for(;(o&1)===s;)u+=1,o>>=1;s=o&1,$t.RATIOS_TABLE[i]||($t.RATIOS_TABLE[i]=new Array(oe.BARS_IN_MODULE)),$t.RATIOS_TABLE[i][oe.BARS_IN_MODULE-c-1]=Math.fround(u/oe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=$t.getDecodedCodewordValue($t.sampleBitCounts(i));return o!==-1?o:$t.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=Ne.sum(i),s=new Int32Array(oe.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<oe.MODULES_IN_CODEWORD;d++){let f=o/(2*oe.MODULES_IN_CODEWORD)+d*o/oe.MODULES_IN_CODEWORD;u+i[c]<=f&&(u+=i[c],c++),s[c]++}return s}static getDecodedCodewordValue(i){let o=$t.getBitValue(i);return oe.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let s=0;s<i.length;s++)for(let c=0;c<i[s];c++)o=o<<1|(s%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=Ne.sum(i),s=new Array(oe.BARS_IN_MODULE);if(o>1)for(let d=0;d<s.length;d++)s[d]=Math.fround(i[d]/o);let c=Ba.MAX_VALUE,u=-1;this.bSymbolTableReady||$t.initialize();for(let d=0;d<$t.RATIOS_TABLE.length;d++){let f=0,p=$t.RATIOS_TABLE[d];for(let m=0;m<oe.BARS_IN_MODULE;m++){let C=Math.fround(p[m]-s[m]);if(f+=Math.fround(C*C),f>=c)break}f<c&&(c=f,u=oe.SYMBOL_TABLE[d])}return u}}$t.bSymbolTableReady=!1,$t.RATIOS_TABLE=new Array(oe.SYMBOL_TABLE.length).map(y=>y=new Array(oe.BARS_IN_MODULE));class Ng{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Rg{static parseLong(i,o=void 0){return parseInt(i,o)}}let yC=(()=>{class y extends g{}return y.kind="NullPointerException",y})();class EC{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,s){if(i==null)throw new yC;if(o<0||o>i.length||s<0||o+s>i.length||o+s<0)throw new j;if(s===0)return;for(let c=0;c<s;c++)this.write(i[o+c])}flush(){}close(){}}class vC extends g{}class CC extends EC{constructor(i=32){if(super(),this.count=0,i<0)throw new v("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let s=this.buf.length<<1;if(s-i<0&&(s=i),s<0){if(i<0)throw new vC;s=U.MAX_VALUE}this.buf=H.copyOfUint8Array(this.buf,s)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,s){if(o<0||o>i.length||s<0||o+s-i.length>0)throw new j;this.ensureCapacity(this.count+s),T.arraycopy(i,o,this.buf,this.count,s),this.count+=s}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return H.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var ze=function(y){return y[y.ALPHA=0]="ALPHA",y[y.LOWER=1]="LOWER",y[y.MIXED=2]="MIXED",y[y.PUNCT=3]="PUNCT",y[y.ALPHA_SHIFT=4]="ALPHA_SHIFT",y[y.PUNCT_SHIFT=5]="PUNCT_SHIFT",y}(ze||{});function Og(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ya;function Nr(y){if(typeof Ya>"u"&&(Ya=Og()),Ya===null)throw new Error("BigInt is not supported!");return Ya(y)}function wC(){let y=[];y[0]=Nr(1);let i=Nr(900);y[1]=i;for(let o=2;o<16;o++)y[o]=y[o-1]*i;return y}class F{static decode(i,o){let s=new Ue(""),c=G.ISO8859_1;s.enableDecoding(c);let u=1,d=i[u++],f=new Ng;for(;u<i[0];){switch(d){case F.TEXT_COMPACTION_MODE_LATCH:u=F.textCompaction(i,u,s);break;case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:u=F.byteCompaction(d,i,c,u,s);break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(i[u++]);break;case F.NUMERIC_COMPACTION_MODE_LATCH:u=F.numericCompaction(i,u,s);break;case F.ECI_CHARSET:let m=G.getCharacterSetECIByValue(i[u++]);break;case F.ECI_GENERAL_PURPOSE:u+=2;break;case F.ECI_USER_DEFINED:u++;break;case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=F.decodeMacroBlock(i,u,f);break;case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:throw new z;default:u--,u=F.textCompaction(i,u,s);break}if(u<i.length)d=i[u++];else throw z.getFormatInstance()}if(s.length()===0)throw z.getFormatInstance();let p=new Jo(null,s.toString(),null,o);return p.setOther(f),p}static decodeMacroBlock(i,o,s){if(o+F.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw z.getFormatInstance();let c=new Int32Array(F.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<F.NUMBER_OF_SEQUENCE_CODEWORDS;f++,o++)c[f]=i[o];s.setSegmentIndex(U.parseInt(F.decodeBase900toBase10(c,F.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new Ue;o=F.textCompaction(i,o,u),s.setFileId(u.toString());let d=-1;for(i[o]===F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=o+1);o<i[0];)switch(i[o]){case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case F.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new Ue;o=F.textCompaction(i,o+1,f),s.setFileName(f.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let p=new Ue;o=F.textCompaction(i,o+1,p),s.setSender(p.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let m=new Ue;o=F.textCompaction(i,o+1,m),s.setAddressee(m.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new Ue;o=F.numericCompaction(i,o+1,C),s.setSegmentCount(U.parseInt(C.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let w=new Ue;o=F.numericCompaction(i,o+1,w),s.setTimestamp(Rg.parseLong(w.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new Ue;o=F.numericCompaction(i,o+1,I),s.setChecksum(U.parseInt(I.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let A=new Ue;o=F.numericCompaction(i,o+1,A),s.setFileSize(Rg.parseLong(A.toString()));break;default:throw z.getFormatInstance()}break;case F.MACRO_PDF417_TERMINATOR:o++,s.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(d!==-1){let f=o-d;s.isLastSegment()&&f--,s.setOptionalData(H.copyOfRange(i,d,d+f))}return o}static textCompaction(i,o,s){let c=new Int32Array((i[0]-o)*2),u=new Int32Array((i[0]-o)*2),d=0,f=!1;for(;o<i[0]&&!f;){let p=i[o++];if(p<F.TEXT_COMPACTION_MODE_LATCH)c[d]=p/30,c[d+1]=p%30,d+=2;else switch(p){case F.TEXT_COMPACTION_MODE_LATCH:c[d++]=F.TEXT_COMPACTION_MODE_LATCH;break;case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:o--,f=!0;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,p=i[o++],u[d]=p,d++;break}}return F.decodeTextCompaction(c,u,d,s),o}static decodeTextCompaction(i,o,s,c){let u=ze.ALPHA,d=ze.ALPHA,f=0;for(;f<s;){let p=i[f],m="";switch(u){case ze.ALPHA:if(p<26)m=String.fromCharCode(65+p);else switch(p){case 26:m=" ";break;case F.LL:u=ze.LOWER;break;case F.ML:u=ze.MIXED;break;case F.PS:d=u,u=ze.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[f]);break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break;case ze.LOWER:if(p<26)m=String.fromCharCode(97+p);else switch(p){case 26:m=" ";break;case F.AS:d=u,u=ze.ALPHA_SHIFT;break;case F.ML:u=ze.MIXED;break;case F.PS:d=u,u=ze.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[f]);break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break;case ze.MIXED:if(p<F.PL)m=F.MIXED_CHARS[p];else switch(p){case F.PL:u=ze.PUNCT;break;case 26:m=" ";break;case F.LL:u=ze.LOWER;break;case F.AL:u=ze.ALPHA;break;case F.PS:d=u,u=ze.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[f]);break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break;case ze.PUNCT:if(p<F.PAL)m=F.PUNCT_CHARS[p];else switch(p){case F.PAL:u=ze.ALPHA;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[f]);break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break;case ze.ALPHA_SHIFT:if(u=d,p<26)m=String.fromCharCode(65+p);else switch(p){case 26:m=" ";break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break;case ze.PUNCT_SHIFT:if(u=d,p<F.PAL)m=F.PUNCT_CHARS[p];else switch(p){case F.PAL:u=ze.ALPHA;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[f]);break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break}m!==""&&c.append(m),f++}}static byteCompaction(i,o,s,c,u){let d=new CC,f=0,p=0,m=!1;switch(i){case F.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),w=o[c++];for(;c<o[0]&&!m;)switch(C[f++]=w,p=900*p+w,w=o[c++],w){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:c--,m=!0;break;default:if(f%5===0&&f>0){for(let I=0;I<6;++I)d.write(Number(Nr(p)>>Nr(8*(5-I))));p=0,f=0}break}c===o[0]&&w<F.TEXT_COMPACTION_MODE_LATCH&&(C[f++]=w);for(let I=0;I<f;I++)d.write(C[I]);break;case F.BYTE_COMPACTION_MODE_LATCH_6:for(;c<o[0]&&!m;){let I=o[c++];if(I<F.TEXT_COMPACTION_MODE_LATCH)f++,p=900*p+I;else switch(I){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:c--,m=!0;break}if(f%5===0&&f>0){for(let A=0;A<6;++A)d.write(Number(Nr(p)>>Nr(8*(5-A))));p=0,f=0}}break}return u.append(Gt.decode(d.toByteArray(),s)),c}static numericCompaction(i,o,s){let c=0,u=!1,d=new Int32Array(F.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!u;){let f=i[o++];if(o===i[0]&&(u=!0),f<F.TEXT_COMPACTION_MODE_LATCH)d[c]=f,c++;else switch(f){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:o--,u=!0;break}(c%F.MAX_NUMERIC_CODEWORDS===0||f===F.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(s.append(F.decodeBase900toBase10(d,c)),c=0)}return o}static decodeBase900toBase10(i,o){let s=Nr(0);for(let u=0;u<o;u++)s+=F.EXP900[o-u-1]*Nr(i[u]);let c=s.toString();if(c.charAt(0)!=="1")throw new z;return c.substring(1)}}F.TEXT_COMPACTION_MODE_LATCH=900,F.BYTE_COMPACTION_MODE_LATCH=901,F.NUMERIC_COMPACTION_MODE_LATCH=902,F.BYTE_COMPACTION_MODE_LATCH_6=924,F.ECI_USER_DEFINED=925,F.ECI_GENERAL_PURPOSE=926,F.ECI_CHARSET=927,F.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,F.MACRO_PDF417_TERMINATOR=922,F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,F.MAX_NUMERIC_CODEWORDS=15,F.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,F.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,F.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,F.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,F.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,F.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,F.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,F.PL=25,F.LL=27,F.AS=27,F.ML=28,F.AL=28,F.PS=29,F.PAL=29,F.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,F.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",F.EXP900=Og()?wC():[],F.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ee{constructor(){}static decode(i,o,s,c,u,d,f){let p=new ui(i,o,s,c,u),m=null,C=null,w;for(let _=!0;;_=!1){if(o!=null&&(m=Ee.getRowIndicatorColumn(i,p,o,!0,d,f)),c!=null&&(C=Ee.getRowIndicatorColumn(i,p,c,!1,d,f)),w=Ee.merge(m,C),w==null)throw L.getNotFoundInstance();let S=w.getBoundingBox();if(_&&S!=null&&(S.getMinY()<p.getMinY()||S.getMaxY()>p.getMaxY()))p=S;else break}w.setBoundingBox(p);let I=w.getBarcodeColumnCount()+1;w.setDetectionResultColumn(0,m),w.setDetectionResultColumn(I,C);let A=m!=null;for(let _=1;_<=I;_++){let S=A?_:I-_;if(w.getDetectionResultColumn(S)!==void 0)continue;let M;S===0||S===I?M=new Mg(p,S===0):M=new Tg(p),w.setDetectionResultColumn(S,M);let R=-1,V=R;for(let q=p.getMinY();q<=p.getMaxY();q++){if(R=Ee.getStartColumn(w,S,q,A),R<0||R>p.getMaxX()){if(V===-1)continue;R=V}let P=Ee.detectCodeword(i,p.getMinX(),p.getMaxX(),A,R,q,d,f);P!=null&&(M.setCodeword(q,P),V=R,d=Math.min(d,P.getWidth()),f=Math.max(f,P.getWidth()))}}return Ee.createDecoderResult(w)}static merge(i,o){if(i==null&&o==null)return null;let s=Ee.getBarcodeMetadata(i,o);if(s==null)return null;let c=ui.merge(Ee.adjustBoundingBox(i),Ee.adjustBoundingBox(o));return new cs(s,c)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let s=Ee.getMax(o),c=0;for(let f of o)if(c+=s-f,f>0)break;let u=i.getCodewords();for(let f=0;c>0&&u[f]==null;f++)c--;let d=0;for(let f=o.length-1;f>=0&&(d+=s-o[f],!(o[f]>0));f--);for(let f=u.length-1;d>0&&u[f]==null;f--)d--;return i.getBoundingBox().addMissingRows(c,d,i.isLeft())}static getMax(i){let o=-1;for(let s of i)o=Math.max(o,s);return o}static getBarcodeMetadata(i,o){let s;if(i==null||(s=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let c;return o==null||(c=o.getBarcodeMetadata())==null?s:s.getColumnCount()!==c.getColumnCount()&&s.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&s.getRowCount()!==c.getRowCount()?null:s}static getRowIndicatorColumn(i,o,s,c,u,d){let f=new Mg(o,c);for(let p=0;p<2;p++){let m=p===0?1:-1,C=Math.trunc(Math.trunc(s.getX()));for(let w=Math.trunc(Math.trunc(s.getY()));w<=o.getMaxY()&&w>=o.getMinY();w+=m){let I=Ee.detectCodeword(i,0,i.getWidth(),c,C,w,u,d);I!=null&&(f.setCodeword(w,I),c?C=I.getStartX():C=I.getEndX())}}return f}static adjustCodewordCount(i,o){let s=o[0][1],c=s.getValue(),u=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-Ee.getNumberOfECCodeWords(i.getBarcodeECLevel());if(c.length===0){if(u<1||u>oe.MAX_CODEWORDS_IN_BARCODE)throw L.getNotFoundInstance();s.setValue(u)}else c[0]!==u&&s.setValue(u)}static createDecoderResult(i){let o=Ee.createBarcodeMatrix(i);Ee.adjustCodewordCount(i,o);let s=new Array,c=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),u=[],d=new Array;for(let p=0;p<i.getBarcodeRowCount();p++)for(let m=0;m<i.getBarcodeColumnCount();m++){let C=o[p][m+1].getValue(),w=p*i.getBarcodeColumnCount()+m;C.length===0?s.push(w):C.length===1?c[w]=C[0]:(d.push(w),u.push(C))}let f=new Array(u.length);for(let p=0;p<f.length;p++)f[p]=u[p];return Ee.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),c,oe.toIntArray(s),oe.toIntArray(d),f)}static createDecoderResultFromAmbiguousValues(i,o,s,c,u){let d=new Int32Array(c.length),f=100;for(;f-- >0;){for(let p=0;p<d.length;p++)o[c[p]]=u[p][d[p]];try{return Ee.decodeCodewords(o,i,s)}catch(p){if(!(p instanceof b))throw p}if(d.length===0)throw b.getChecksumInstance();for(let p=0;p<d.length;p++)if(d[p]<u[p].length-1){d[p]++;break}else if(d[p]=0,p===d.length-1)throw b.getChecksumInstance()}throw b.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let c=0;c<o.length;c++)for(let u=0;u<o[c].length;u++)o[c][u]=new as;let s=0;for(let c of i.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=o.length)continue;o[d][s].setValue(u.getValue())}}}s++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,s,c){let u=c?1:-1,d=null;if(Ee.isValidBarcodeColumn(i,o-u)&&(d=i.getDetectionResultColumn(o-u).getCodeword(s)),d!=null)return c?d.getEndX():d.getStartX();if(d=i.getDetectionResultColumn(o).getCodewordNearby(s),d!=null)return c?d.getStartX():d.getEndX();if(Ee.isValidBarcodeColumn(i,o-u)&&(d=i.getDetectionResultColumn(o-u).getCodewordNearby(s)),d!=null)return c?d.getEndX():d.getStartX();let f=0;for(;Ee.isValidBarcodeColumn(i,o-u);){o-=u;for(let p of i.getDetectionResultColumn(o).getCodewords())if(p!=null)return(c?p.getEndX():p.getStartX())+u*f*(p.getEndX()-p.getStartX());f++}return c?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,s,c,u,d,f,p){u=Ee.adjustCodewordStartColumn(i,o,s,c,u,d);let m=Ee.getModuleBitCount(i,o,s,c,u,d);if(m==null)return null;let C,w=Ne.sum(m);if(c)C=u+w;else{for(let _=0;_<m.length/2;_++){let S=m[_];m[_]=m[m.length-1-_],m[m.length-1-_]=S}C=u,u=C-w}if(!Ee.checkCodewordSkew(w,f,p))return null;let I=$t.getDecodedValue(m),A=oe.getCodeword(I);return A===-1?null:new mC(u,C,Ee.getCodewordBucketNumber(I),A)}static getModuleBitCount(i,o,s,c,u,d){let f=u,p=new Int32Array(8),m=0,C=c?1:-1,w=c;for(;(c?f<s:f>=o)&&m<p.length;)i.get(f,d)===w?(p[m]++,f+=C):(m++,w=!w);return m===p.length||f===(c?s:o)&&m===p.length-1?p:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,s,c,u,d){let f=u,p=c?-1:1;for(let m=0;m<2;m++){for(;(c?f>=o:f<s)&&c===i.get(f,d);){if(Math.abs(u-f)>Ee.CODEWORD_SKEW_SIZE)return u;f+=p}p=-p,c=!c}return f}static checkCodewordSkew(i,o,s){return o-Ee.CODEWORD_SKEW_SIZE<=i&&i<=s+Ee.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,s){if(i.length===0)throw z.getFormatInstance();let c=1<<o+1,u=Ee.correctErrors(i,s,c);Ee.verifyCodewordCount(i,c);let d=F.decode(i,""+o);return d.setErrorsCorrected(u),d.setErasures(s.length),d}static correctErrors(i,o,s){if(o!=null&&o.length>s/2+Ee.MAX_ERRORS||s<0||s>Ee.MAX_EC_CODEWORDS)throw b.getChecksumInstance();return Ee.errorCorrection.decode(i,s,o)}static verifyCodewordCount(i,o){if(i.length<4)throw z.getFormatInstance();let s=i[0];if(s>i.length)throw z.getFormatInstance();if(s===0)if(o<i.length)i[0]=i.length-o;else throw z.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),s=0,c=o.length-1;for(;!((i&1)!==s&&(s=i&1,c--,c<0));)o[c]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return Ee.getCodewordBucketNumber(Ee.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new ss;for(let s=0;s<i.length;s++){o.format("Row %2d: ",s);for(let c=0;c<i[s].length;c++){let u=i[s][c];u.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}o.format("%n")}return o.toString()}}Ee.CODEWORD_SKEW_SIZE=2,Ee.MAX_ERRORS=3,Ee.MAX_EC_CODEWORDS=512,Ee.errorCorrection=new Sg;class bt{decode(i,o=null){let s=bt.decode(i,o,!1);if(s==null||s.length===0||s[0]==null)throw L.getNotFoundInstance();return s[0]}decodeMultiple(i,o=null){try{return bt.decode(i,o,!0)}catch(s){throw s instanceof z||s instanceof b?L.getNotFoundInstance():s}}static decode(i,o,s){let c=new Array,u=me.detectMultiple(i,o,s);for(let d of u.getPoints()){let f=Ee.decode(u.getBits(),d[4],d[5],d[6],d[7],bt.getMinCodewordWidth(d),bt.getMaxCodewordWidth(d)),p=new Bt(f.getText(),f.getRawBytes(),void 0,d,re.PDF_417);p.putMetadata(vt.ERROR_CORRECTION_LEVEL,f.getECLevel());let m=f.getOther();m!=null&&p.putMetadata(vt.PDF417_EXTRA_METADATA,m),c.push(p)}return c.map(d=>d)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?U.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(bt.getMaxWidth(i[0],i[4]),bt.getMaxWidth(i[6],i[2])*oe.MODULES_IN_CODEWORD/oe.MODULES_IN_STOP_PATTERN),Math.max(bt.getMaxWidth(i[1],i[5]),bt.getMaxWidth(i[7],i[3])*oe.MODULES_IN_CODEWORD/oe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(bt.getMinWidth(i[0],i[4]),bt.getMinWidth(i[6],i[2])*oe.MODULES_IN_CODEWORD/oe.MODULES_IN_STOP_PATTERN),Math.min(bt.getMinWidth(i[1],i[5]),bt.getMinWidth(i[7],i[3])*oe.MODULES_IN_CODEWORD/oe.MODULES_IN_STOP_PATTERN)))}reset(){}}let ld=(()=>{class y extends g{}return y.kind="ReaderException",y})();class Fg{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;let o=!t(i)&&i.get(Ce.TRY_HARDER)===!0,s=t(i)?null:i.get(Ce.POSSIBLE_FORMATS),c=new Array;if(!t(s)){let u=s.some(d=>d===re.UPC_A||d===re.UPC_E||d===re.EAN_13||d===re.EAN_8||d===re.CODABAR||d===re.CODE_39||d===re.CODE_93||d===re.CODE_128||d===re.ITF||d===re.RSS_14||d===re.RSS_EXPANDED);u&&!o&&c.push(new Ki(i,this.verbose)),s.includes(re.QR_CODE)&&c.push(new Mr),s.includes(re.DATA_MATRIX)&&c.push(new Wa),s.includes(re.AZTEC)&&c.push(new Ua),s.includes(re.PDF_417)&&c.push(new bt),u&&o&&c.push(new Ki(i,this.verbose))}c.length===0&&(o||c.push(new Ki(i,this.verbose)),c.push(new Mr),c.push(new Wa),c.push(new Ua),c.push(new bt),o&&c.push(new Ki(i,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(let i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new ld("No readers where selected, nothing can be read.");for(let o of this.readers)try{return o.decode(i,this.hints)}catch(s){if(s instanceof ld)continue}throw new L("No MultiFormat Readers were able to detect the code.")}}class xC extends si{constructor(i=null,o=500){let s=new Fg;s.setHints(i),super(s,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class IC extends si{constructor(i=500){super(new bt,i)}}class DC extends si{constructor(i=500){super(new Mr,i)}}var Pg=function(y){return y[y.ERROR_CORRECTION=0]="ERROR_CORRECTION",y[y.CHARACTER_SET=1]="CHARACTER_SET",y[y.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",y[y.MIN_SIZE=3]="MIN_SIZE",y[y.MAX_SIZE=4]="MAX_SIZE",y[y.MARGIN=5]="MARGIN",y[y.PDF417_COMPACT=6]="PDF417_COMPACT",y[y.PDF417_COMPACTION=7]="PDF417_COMPACTION",y[y.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",y[y.AZTEC_LAYERS=9]="AZTEC_LAYERS",y[y.QR_VERSION=10]="QR_VERSION",y}(Pg||{}),dt=Pg;class ud{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Wt(i,Int32Array.from([1])))}buildGenerator(i){let o=this.cachedGenerators;if(i>=o.length){let s=o[o.length-1],c=this.field;for(let u=o.length;u<=i;u++){let d=s.multiply(new Wt(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));o.push(d),s=d}}return o[i]}encode(i,o){if(o===0)throw new v("No error correction bytes");let s=i.length-o;if(s<=0)throw new v("No data bytes provided");let c=this.buildGenerator(o),u=new Int32Array(s);T.arraycopy(i,0,u,0,s);let d=new Wt(this.field,u);d=d.multiplyByMonomial(o,1);let p=d.divide(c)[1].getCoefficients(),m=o-p.length;for(let C=0;C<m;C++)i[s+C]=0;T.arraycopy(p,0,i,s+m,p.length)}}let Ji=(()=>{class y{constructor(){}static applyMaskPenaltyRule1(o){return y.applyMaskPenaltyRule1Internal(o,!0)+y.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let s=0,c=o.getArray(),u=o.getWidth(),d=o.getHeight();for(let f=0;f<d-1;f++){let p=c[f];for(let m=0;m<u-1;m++){let C=p[m];C===p[m+1]&&C===c[f+1][m]&&C===c[f+1][m+1]&&s++}}return y.N2*s}static applyMaskPenaltyRule3(o){let s=0,c=o.getArray(),u=o.getWidth(),d=o.getHeight();for(let f=0;f<d;f++)for(let p=0;p<u;p++){let m=c[f];p+6<u&&m[p]===1&&m[p+1]===0&&m[p+2]===1&&m[p+3]===1&&m[p+4]===1&&m[p+5]===0&&m[p+6]===1&&(y.isWhiteHorizontal(m,p-4,p)||y.isWhiteHorizontal(m,p+7,p+11))&&s++,f+6<d&&c[f][p]===1&&c[f+1][p]===0&&c[f+2][p]===1&&c[f+3][p]===1&&c[f+4][p]===1&&c[f+5][p]===0&&c[f+6][p]===1&&(y.isWhiteVertical(c,p,f-4,f)||y.isWhiteVertical(c,p,f+7,f+11))&&s++}return s*y.N3}static isWhiteHorizontal(o,s,c){s=Math.max(s,0),c=Math.min(c,o.length);for(let u=s;u<c;u++)if(o[u]===1)return!1;return!0}static isWhiteVertical(o,s,c,u){c=Math.max(c,0),u=Math.min(u,o.length);for(let d=c;d<u;d++)if(o[d][s]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let s=0,c=o.getArray(),u=o.getWidth(),d=o.getHeight();for(let m=0;m<d;m++){let C=c[m];for(let w=0;w<u;w++)C[w]===1&&s++}let f=o.getHeight()*o.getWidth();return Math.floor(Math.abs(s*2-f)*10/f)*y.N4}static getDataMaskBit(o,s,c){let u,d;switch(o){case 0:u=c+s&1;break;case 1:u=c&1;break;case 2:u=s%3;break;case 3:u=(c+s)%3;break;case 4:u=Math.floor(c/2)+Math.floor(s/3)&1;break;case 5:d=c*s,u=(d&1)+d%3;break;case 6:d=c*s,u=(d&1)+d%3&1;break;case 7:d=c*s,u=d%3+(c+s&1)&1;break;default:throw new v("Invalid mask pattern: "+o)}return u===0}static applyMaskPenaltyRule1Internal(o,s){let c=0,u=s?o.getHeight():o.getWidth(),d=s?o.getWidth():o.getHeight(),f=o.getArray();for(let p=0;p<u;p++){let m=0,C=-1;for(let w=0;w<d;w++){let I=s?f[p][w]:f[w][p];I===C?m++:(m>=5&&(c+=y.N1+(m-5)),m=1,C=I)}m>=5&&(c+=y.N1+(m-5))}return c}}return y.N1=3,y.N2=3,y.N3=40,y.N4=10,y})();class qa{constructor(i,o){this.width=i,this.height=o;let s=new Array(o);for(let c=0;c!==o;c++)s[c]=new Uint8Array(i);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,s){this.bytes[o][i]=s}setBoolean(i,o,s){this.bytes[o][i]=s?1:0}clear(i){for(let o of this.bytes)H.fill(o,i)}equals(i){if(!(i instanceof qa))return!1;let o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let s=0,c=this.height;s<c;++s){let u=this.bytes[s],d=o.bytes[s];for(let f=0,p=this.width;f<p;++f)if(u[f]!==d[f])return!1}return!0}toString(){let i=new Ue;for(let o=0,s=this.height;o<s;++o){let c=this.bytes[o];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}let Za=(()=>{class y{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let o=new Ue;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<y.NUM_MASK_PATTERNS}}return y.NUM_MASK_PATTERNS=8,y})(),qe=(()=>{class y extends g{}return y.kind="WriterException",y})();class ie{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,s,c,u){ie.clearMatrix(u),ie.embedBasicPatterns(s,u),ie.embedTypeInfo(o,c,u),ie.maybeEmbedVersionInfo(s,u),ie.embedDataBits(i,c,u)}static embedBasicPatterns(i,o){ie.embedPositionDetectionPatternsAndSeparators(o),ie.embedDarkDotAtLeftBottomCorner(o),ie.maybeEmbedPositionAdjustmentPatterns(i,o),ie.embedTimingPatterns(o)}static embedTypeInfo(i,o,s){let c=new ye;ie.makeTypeInfoBits(i,o,c);for(let u=0,d=c.getSize();u<d;++u){let f=c.get(c.getSize()-1-u),p=ie.TYPE_INFO_COORDINATES[u],m=p[0],C=p[1];if(s.setBoolean(m,C,f),u<8){let w=s.getWidth()-u-1;s.setBoolean(w,8,f)}else{let I=s.getHeight()-7+(u-8);s.setBoolean(8,I,f)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;let s=new ye;ie.makeVersionInfoBits(i,s);let c=6*3-1;for(let u=0;u<6;++u)for(let d=0;d<3;++d){let f=s.get(c);c--,o.setBoolean(u,o.getHeight()-11+d,f),o.setBoolean(o.getHeight()-11+d,u,f)}}static embedDataBits(i,o,s){let c=0,u=-1,d=s.getWidth()-1,f=s.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);f>=0&&f<s.getHeight();){for(let p=0;p<2;++p){let m=d-p;if(!ie.isEmpty(s.get(m,f)))continue;let C;c<i.getSize()?(C=i.get(c),++c):C=!1,o!==255&&Ji.getDataMaskBit(o,m,f)&&(C=!C),s.setBoolean(m,f,C)}f+=u}u=-u,f+=u,d-=2}if(c!==i.getSize())throw new qe("Not all bits consumed: "+c+"/"+i.getSize())}static findMSBSet(i){return 32-U.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new v("0 polynomial");let s=ie.findMSBSet(o);for(i<<=s-1;ie.findMSBSet(i)>=s;)i^=o<<ie.findMSBSet(i)-s;return i}static makeTypeInfoBits(i,o,s){if(!Za.isValidMaskPattern(o))throw new qe("Invalid mask pattern");let c=i.getBits()<<3|o;s.appendBits(c,5);let u=ie.calculateBCHCode(c,ie.TYPE_INFO_POLY);s.appendBits(u,10);let d=new ye;if(d.appendBits(ie.TYPE_INFO_MASK_PATTERN,15),s.xor(d),s.getSize()!==15)throw new qe("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);let s=ie.calculateBCHCode(i.getVersionNumber(),ie.VERSION_INFO_POLY);if(o.appendBits(s,12),o.getSize()!==18)throw new qe("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){let s=(o+1)%2;ie.isEmpty(i.get(o,6))&&i.setNumber(o,6,s),ie.isEmpty(i.get(6,o))&&i.setNumber(6,o,s)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new qe;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,s){for(let c=0;c<8;++c){if(!ie.isEmpty(s.get(i+c,o)))throw new qe;s.setNumber(i+c,o,0)}}static embedVerticalSeparationPattern(i,o,s){for(let c=0;c<7;++c){if(!ie.isEmpty(s.get(i,o+c)))throw new qe;s.setNumber(i,o+c,0)}}static embedPositionAdjustmentPattern(i,o,s){for(let c=0;c<5;++c){let u=ie.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)s.setNumber(i+d,o+c,u[d])}}static embedPositionDetectionPattern(i,o,s){for(let c=0;c<7;++c){let u=ie.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)s.setNumber(i+d,o+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(i){let o=ie.POSITION_DETECTION_PATTERN[0].length;ie.embedPositionDetectionPattern(0,0,i),ie.embedPositionDetectionPattern(i.getWidth()-o,0,i),ie.embedPositionDetectionPattern(0,i.getWidth()-o,i);let s=8;ie.embedHorizontalSeparationPattern(0,s-1,i),ie.embedHorizontalSeparationPattern(i.getWidth()-s,s-1,i),ie.embedHorizontalSeparationPattern(0,i.getWidth()-s,i);let c=7;ie.embedVerticalSeparationPattern(c,0,i),ie.embedVerticalSeparationPattern(i.getHeight()-c-1,0,i),ie.embedVerticalSeparationPattern(c,i.getHeight()-c,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;let s=i.getVersionNumber()-1,c=ie.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let u=0,d=c.length;u!==d;u++){let f=c[u];if(f>=0)for(let p=0;p!==d;p++){let m=c[p];m>=0&&ie.isEmpty(o.get(m,f))&&ie.embedPositionAdjustmentPattern(m-2,f-2,o)}}}}ie.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ie.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ie.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ie.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ie.VERSION_INFO_POLY=7973,ie.TYPE_INFO_POLY=1335,ie.TYPE_INFO_MASK_PATTERN=21522;class AC{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ze{constructor(){}static calculateMaskPenalty(i){return Ji.applyMaskPenaltyRule1(i)+Ji.applyMaskPenaltyRule2(i)+Ji.applyMaskPenaltyRule3(i)+Ji.applyMaskPenaltyRule4(i)}static encode(i,o,s=null){let c=Ze.DEFAULT_BYTE_MODE_ENCODING,u=s!==null&&s.get(dt.CHARACTER_SET)!==void 0;u&&(c=s.get(dt.CHARACTER_SET).toString());let d=this.chooseMode(i,c),f=new ye;if(d===ne.BYTE&&(u||Ze.DEFAULT_BYTE_MODE_ENCODING!==c)){let q=G.getCharacterSetECIByName(c);q!==void 0&&this.appendECI(q,f)}this.appendModeInfo(d,f);let p=new ye;this.appendBytes(i,d,p,c);let m;if(s!==null&&s.get(dt.QR_VERSION)!==void 0){let q=Number.parseInt(s.get(dt.QR_VERSION).toString(),10);m=ee.getVersionForNumber(q);let P=this.calculateBitsNeeded(d,f,p,m);if(!this.willFit(P,m,o))throw new qe("Data too big for requested version")}else m=this.recommendVersion(o,d,f,p);let C=new ye;C.appendBitArray(f);let w=d===ne.BYTE?p.getSizeInBytes():i.length;this.appendLengthInfo(w,m,d,C),C.appendBitArray(p);let I=m.getECBlocksForLevel(o),A=m.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(A,C);let _=this.interleaveWithECBytes(C,m.getTotalCodewords(),A,I.getNumBlocks()),S=new Za;S.setECLevel(o),S.setMode(d),S.setVersion(m);let M=m.getDimensionForVersion(),R=new qa(M,M),V=this.chooseMaskPattern(_,o,m,R);return S.setMaskPattern(V),ie.buildMatrix(_,o,m,V,R),S.setMatrix(R),S}static recommendVersion(i,o,s,c){let u=this.calculateBitsNeeded(o,s,c,ee.getVersionForNumber(1)),d=this.chooseVersion(u,i),f=this.calculateBitsNeeded(o,s,c,d);return this.chooseVersion(f,i)}static calculateBitsNeeded(i,o,s,c){return o.getSize()+i.getCharacterCountBits(c)+s.getSize()}static getAlphanumericCode(i){return i<Ze.ALPHANUMERIC_TABLE.length?Ze.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(G.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return ne.KANJI;let s=!1,c=!1;for(let u=0,d=i.length;u<d;++u){let f=i.charAt(u);if(Ze.isDigit(f))s=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)c=!0;else return ne.BYTE}return c?ne.ALPHANUMERIC:s?ne.NUMERIC:ne.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=Gt.encode(i,G.SJIS)}catch{return!1}let s=o.length;if(s%2!==0)return!1;for(let c=0;c<s;c+=2){let u=o[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(i,o,s,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let f=0;f<Za.NUM_MASK_PATTERNS;f++){ie.buildMatrix(i,o,s,f,c);let p=this.calculateMaskPenalty(c);p<u&&(u=p,d=f)}return d}static chooseVersion(i,o){for(let s=1;s<=40;s++){let c=ee.getVersionForNumber(s);if(Ze.willFit(i,c,o))return c}throw new qe("Data too big")}static willFit(i,o,s){let c=o.getTotalCodewords(),d=o.getECBlocksForLevel(s).getTotalECCodewords(),f=c-d,p=(i+7)/8;return f>=p}static terminateBits(i,o){let s=i*8;if(o.getSize()>s)throw new qe("data bits cannot fit in the QR Code"+o.getSize()+" > "+s);for(let d=0;d<4&&o.getSize()<s;++d)o.appendBit(!1);let c=o.getSize()&7;if(c>0)for(let d=c;d<8;d++)o.appendBit(!1);let u=i-o.getSizeInBytes();for(let d=0;d<u;++d)o.appendBits((d&1)===0?236:17,8);if(o.getSize()!==s)throw new qe("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,s,c,u,d){if(c>=s)throw new qe("Block ID too large");let f=i%s,p=s-f,m=Math.floor(i/s),C=m+1,w=Math.floor(o/s),I=w+1,A=m-w,_=C-I;if(A!==_)throw new qe("EC bytes mismatch");if(s!==p+f)throw new qe("RS blocks mismatch");if(i!==(w+A)*p+(I+_)*f)throw new qe("Total bytes mismatch");c<p?(u[0]=w,d[0]=A):(u[0]=I,d[0]=_)}static interleaveWithECBytes(i,o,s,c){if(i.getSizeInBytes()!==s)throw new qe("Number of bits and data bytes does not match");let u=0,d=0,f=0,p=new Array;for(let C=0;C<c;++C){let w=new Int32Array(1),I=new Int32Array(1);Ze.getNumDataBytesAndNumECBytesForBlockID(o,s,c,C,w,I);let A=w[0],_=new Uint8Array(A);i.toBytes(8*u,_,0,A);let S=Ze.generateECBytes(_,I[0]);p.push(new AC(_,S)),d=Math.max(d,A),f=Math.max(f,S.length),u+=w[0]}if(s!==u)throw new qe("Data bytes does not match offset");let m=new ye;for(let C=0;C<d;++C)for(let w of p){let I=w.getDataBytes();C<I.length&&m.appendBits(I[C],8)}for(let C=0;C<f;++C)for(let w of p){let I=w.getErrorCorrectionBytes();C<I.length&&m.appendBits(I[C],8)}if(o!==m.getSizeInBytes())throw new qe("Interleaving error: "+o+" and "+m.getSizeInBytes()+" differ.");return m}static generateECBytes(i,o){let s=i.length,c=new Int32Array(s+o);for(let d=0;d<s;d++)c[d]=i[d]&255;new ud(Oe.QR_CODE_FIELD_256).encode(c,o);let u=new Uint8Array(o);for(let d=0;d<o;d++)u[d]=c[s+d];return u}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,s,c){let u=s.getCharacterCountBits(o);if(i>=1<<u)throw new qe(i+" is bigger than "+((1<<u)-1));c.appendBits(i,u)}static appendBytes(i,o,s,c){switch(o){case ne.NUMERIC:Ze.appendNumericBytes(i,s);break;case ne.ALPHANUMERIC:Ze.appendAlphanumericBytes(i,s);break;case ne.BYTE:Ze.append8BitBytes(i,s,c);break;case ne.KANJI:Ze.appendKanjiBytes(i,s);break;default:throw new qe("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){let o=Ze.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){let s=i.length,c=0;for(;c<s;){let u=Ze.getDigit(i.charAt(c));if(c+2<s){let d=Ze.getDigit(i.charAt(c+1)),f=Ze.getDigit(i.charAt(c+2));o.appendBits(u*100+d*10+f,10),c+=3}else if(c+1<s){let d=Ze.getDigit(i.charAt(c+1));o.appendBits(u*10+d,7),c+=2}else o.appendBits(u,4),c++}}static appendAlphanumericBytes(i,o){let s=i.length,c=0;for(;c<s;){let u=Ze.getAlphanumericCode(i.charCodeAt(c));if(u===-1)throw new qe;if(c+1<s){let d=Ze.getAlphanumericCode(i.charCodeAt(c+1));if(d===-1)throw new qe;o.appendBits(u*45+d,11),c+=2}else o.appendBits(u,6),c++}}static append8BitBytes(i,o,s){let c;try{c=Gt.encode(i,s)}catch(u){throw new qe(u)}for(let u=0,d=c.length;u!==d;u++){let f=c[u];o.appendBits(f,8)}}static appendKanjiBytes(i,o){let s;try{s=Gt.encode(i,G.SJIS)}catch(u){throw new qe(u)}let c=s.length;for(let u=0;u<c;u+=2){let d=s[u]&255,f=s[u+1]&255,p=d<<8&4294967295|f,m=-1;if(p>=33088&&p<=40956?m=p-33088:p>=57408&&p<=60351&&(m=p-49472),m===-1)throw new qe("Invalid byte sequence");let C=(m>>8)*192+(m&255);o.appendBits(C,13)}}static appendECI(i,o){o.appendBits(ne.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}Ze.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ze.DEFAULT_BYTE_MODE_ENCODING=G.UTF8.getName();let bC=(()=>{class y{write(o,s,c,u=null){if(o.length===0)throw new v("Found empty contents");if(s<0||c<0)throw new v("Requested dimensions are too small: "+s+"x"+c);let d=Ye.L,f=y.QUIET_ZONE_SIZE;u!==null&&(u.get(dt.ERROR_CORRECTION)!==void 0&&(d=Ye.fromString(u.get(dt.ERROR_CORRECTION).toString())),u.get(dt.MARGIN)!==void 0&&(f=Number.parseInt(u.get(dt.MARGIN).toString(),10)));let p=Ze.encode(o,d,u);return this.renderResult(p,s,c,f)}writeToDom(o,s,c,u,d=null){typeof o=="string"&&(o=document.querySelector(o));let f=this.write(s,c,u,d);o&&o.appendChild(f)}renderResult(o,s,c,u){let d=o.getMatrix();if(d===null)throw new tr;let f=d.getWidth(),p=d.getHeight(),m=f+u*2,C=p+u*2,w=Math.max(s,m),I=Math.max(c,C),A=Math.min(Math.floor(w/m),Math.floor(I/C)),_=Math.floor((w-f*A)/2),S=Math.floor((I-p*A)/2),M=this.createSVGElement(w,I);for(let R=0,V=S;R<p;R++,V+=A)for(let q=0,P=_;q<f;q++,P+=A)if(d.get(q,R)===1){let we=this.createSvgRectElement(P,V,A,A);M.appendChild(we)}return M}createSVGElement(o,s){let c=document.createElementNS(y.SVG_NS,"svg");return c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",s.toString()),c}createSvgRectElement(o,s,c,u){let d=document.createElementNS(y.SVG_NS,"rect");return d.setAttributeNS(null,"x",o.toString()),d.setAttributeNS(null,"y",s.toString()),d.setAttributeNS(null,"height",c.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}return y.QUIET_ZONE_SIZE=4,y.SVG_NS="http://www.w3.org/2000/svg",y})(),Lg=(()=>{class y{encode(o,s,c,u,d){if(o.length===0)throw new v("Found empty contents");if(s!==re.QR_CODE)throw new v("Can only encode QR_CODE, but got "+s);if(c<0||u<0)throw new v(`Requested dimensions are too small: ${c}x${u}`);let f=Ye.L,p=y.QUIET_ZONE_SIZE;d!==null&&(d.get(dt.ERROR_CORRECTION)!==void 0&&(f=Ye.fromString(d.get(dt.ERROR_CORRECTION).toString())),d.get(dt.MARGIN)!==void 0&&(p=Number.parseInt(d.get(dt.MARGIN).toString(),10)));let m=Ze.encode(o,f,d);return y.renderResult(m,c,u,p)}static renderResult(o,s,c,u){let d=o.getMatrix();if(d===null)throw new tr;let f=d.getWidth(),p=d.getHeight(),m=f+u*2,C=p+u*2,w=Math.max(s,m),I=Math.max(c,C),A=Math.min(Math.floor(w/m),Math.floor(I/C)),_=Math.floor((w-f*A)/2),S=Math.floor((I-p*A)/2),M=new yt(w,I);for(let R=0,V=S;R<p;R++,V+=A)for(let q=0,P=_;q<f;q++,P+=A)d.get(q,R)===1&&M.setRegion(P,V,A,A);return M}}return y.QUIET_ZONE_SIZE=4,y})();class _C{encode(i,o,s,c,u){let d;switch(o){case re.QR_CODE:d=new Lg;break;default:throw new v("No encoder available for format "+o)}return d.encode(i,o,s,c,u)}}let SC=(()=>{class y extends Ko{constructor(o,s,c,u,d,f,p,m){if(super(f,p),this.yuvData=o,this.dataWidth=s,this.dataHeight=c,this.left=u,this.top=d,u+f>s||d+p>c)throw new v("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(f,p)}getRow(o,s){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);let c=this.getWidth();(s==null||s.length<c)&&(s=new Uint8ClampedArray(c));let u=(o+this.top)*this.dataWidth+this.left;return T.arraycopy(this.yuvData,u,s,0,c),s}getMatrix(){let o=this.getWidth(),s=this.getHeight();if(o===this.dataWidth&&s===this.dataHeight)return this.yuvData;let c=o*s,u=new Uint8ClampedArray(c),d=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return T.arraycopy(this.yuvData,d,u,0,c),u;for(let f=0;f<s;f++){let p=f*o;T.arraycopy(this.yuvData,d,u,p,o),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(o,s,c,u){return new y(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+s,c,u,!1)}renderThumbnail(){let o=this.getWidth()/y.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/y.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(o*s),u=this.yuvData,d=this.top*this.dataWidth+this.left;for(let f=0;f<s;f++){let p=f*o;for(let m=0;m<o;m++){let C=u[d+m*y.THUMBNAIL_SCALE_FACTOR]&255;c[p+m]=4278190080|C*65793}d+=this.dataWidth*y.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/y.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/y.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,s){let c=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<s;u++,d+=this.dataWidth){let f=d+o/2;for(let p=d,m=d+o-1;p<f;p++,m--){let C=c[p];c[p]=c[m],c[m]=C}}}invert(){return new Dr(this)}}return y.THUMBNAIL_SCALE_FACTOR=2,y})();class dd extends Ko{constructor(i,o,s,c,u,d,f){if(super(o,s),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=f,i.BYTES_PER_ELEMENT===4){let p=o*s,m=new Uint8ClampedArray(p);for(let C=0;C<p;C++){let w=i[C],I=w>>16&255,A=w>>7&510,_=w&255;m[C]=(I+A+_)/4&255}this.luminances=m}else this.luminances=i;if(c===void 0&&(this.dataWidth=o),u===void 0&&(this.dataHeight=s),d===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+s>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new v("Requested row is outside the image: "+i);let s=this.getWidth();(o==null||o.length<s)&&(o=new Uint8ClampedArray(s));let c=(i+this.top)*this.dataWidth+this.left;return T.arraycopy(this.luminances,c,o,0,s),o}getMatrix(){let i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;let s=i*o,c=new Uint8ClampedArray(s),u=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return T.arraycopy(this.luminances,u,c,0,s),c;for(let d=0;d<o;d++){let f=d*i;T.arraycopy(this.luminances,u,c,f,i),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,o,s,c){return new dd(this.luminances,s,c,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new Dr(this)}}class kg extends G{static forName(i){return this.getCharacterSetECIByName(i)}}class fd{}fd.ISO_8859_1=G.ISO8859_1;class Bg{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Vg{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class TC{constructor(i){this.previous=i}getPrevious(){return this.previous}}class eo extends TC{constructor(i,o,s){super(i),this.value=o,this.bitCount=s}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new eo(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new eo(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+U.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class hd extends eo{constructor(i,o,s){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=s}appendTo(i,o){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):s===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+s],8)}addBinaryShift(i,o){return new hd(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function MC(y,i,o){return new hd(y,i,o)}function ls(y,i,o){return new eo(y,i,o)}let NC=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Rr=0,Xa=1,yn=2,jg=3,jn=4,RC=new eo(null,0,0),pd=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function OC(y){for(let i of y)H.fill(i,-1);return y[Rr][jn]=0,y[Xa][jn]=0,y[Xa][Rr]=28,y[jg][jn]=0,y[yn][jn]=0,y[yn][Rr]=15,y}let Ug=OC(H.createInt32Array(6,6));class Un{constructor(i,o,s,c){this.token=i,this.mode=o,this.binaryShiftByteCount=s,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let s=this.bitCount,c=this.token;if(i!==this.mode){let d=pd[this.mode][i];c=ls(c,d&65535,d>>16),s+=d>>16}let u=i===yn?4:5;return c=ls(c,o,u),new Un(c,i,0,s+u)}shiftAndAppend(i,o){let s=this.token,c=this.mode===yn?4:5;return s=ls(s,Ug[this.mode][i],c),s=ls(s,o,5),new Un(s,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(i){let o=this.token,s=this.mode,c=this.bitCount;if(this.mode===jn||this.mode===yn){let f=pd[s][Rr];o=ls(o,f&65535,f>>16),c+=f>>16,s=Rr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new Un(o,s,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(i+1)),d}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=MC(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Un(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(pd[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=Un.calculateBinaryShiftCost(i)-Un.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let c=this.endBinaryShift(i.length).token;c!==null;c=c.getPrevious())o.unshift(c);let s=new ye;for(let c of o)c.appendTo(s,i);return s}toString(){return ce.format("%s bits=%d bytes=%d",NC[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Un.INITIAL_STATE=new Un(RC,Rr,0,0);function FC(y){let i=ce.getCharCode(" "),o=ce.getCharCode("."),s=ce.getCharCode(",");y[Rr][i]=1;let c=ce.getCharCode("Z"),u=ce.getCharCode("A");for(let I=u;I<=c;I++)y[Rr][I]=I-u+2;y[Xa][i]=1;let d=ce.getCharCode("z"),f=ce.getCharCode("a");for(let I=f;I<=d;I++)y[Xa][I]=I-f+2;y[yn][i]=1;let p=ce.getCharCode("9"),m=ce.getCharCode("0");for(let I=m;I<=p;I++)y[yn][I]=I-m+2;y[yn][s]=12,y[yn][o]=13;let C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let I=0;I<C.length;I++)y[jg][ce.getCharCode(C[I])]=I;let w=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<w.length;I++)ce.getCharCode(w[I])>0&&(y[jn][ce.getCharCode(w[I])]=I);return y}let gd=FC(H.createInt32Array(5,256));class us{constructor(i){this.text=i}encode(){let i=ce.getCharCode(" "),o=ce.getCharCode(`
`),s=Vg.singletonList(Un.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,f=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ce.getCharCode("\r"):d=f===o?2:0;break;case ce.getCharCode("."):d=f===i?3:0;break;case ce.getCharCode(","):d=f===i?4:0;break;case ce.getCharCode(":"):d=f===i?5:0;break;default:d=0}d>0?(s=us.updateStateListForPair(s,u,d),u++):s=this.updateStateListForChar(s,u)}return Vg.min(s,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){let s=[];for(let c of i)this.updateStateForChar(c,o,s);return us.simplifyStates(s)}updateStateForChar(i,o,s){let c=this.text[o]&255,u=gd[i.getMode()][c]>0,d=null;for(let f=0;f<=jn;f++){let p=gd[f][c];if(p>0){if(d==null&&(d=i.endBinaryShift(o)),!u||f===i.getMode()||f===yn){let m=d.latchAndAppend(f,p);s.push(m)}if(!u&&Ug[i.getMode()][f]>=0){let m=d.shiftAndAppend(f,p);s.push(m)}}}if(i.getBinaryShiftByteCount()>0||gd[i.getMode()][c]===0){let f=i.addBinaryShiftChar(o);s.push(f)}}static updateStateListForPair(i,o,s){let c=[];for(let u of i)this.updateStateForPair(u,o,s,c);return this.simplifyStates(c)}static updateStateForPair(i,o,s,c){let u=i.endBinaryShift(o);if(c.push(u.latchAndAppend(jn,s)),i.getMode()!==jn&&c.push(u.shiftAndAppend(jn,s)),s===3||s===4){let d=u.latchAndAppend(yn,16-s).latchAndAppend(yn,1);c.push(d)}if(i.getBinaryShiftByteCount()>0){let d=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);c.push(d)}}static simplifyStates(i){let o=[];for(let s of i){let c=!0;for(let u of o){if(u.isBetterThanOrEqualTo(s)){c=!1;break}s.isBetterThanOrEqualTo(u)&&(o=o.filter(d=>d!==u))}c&&o.push(s)}return o}}class Re{constructor(){}static encodeBytes(i){return Re.encode(i,Re.DEFAULT_EC_PERCENT,Re.DEFAULT_AZTEC_LAYERS)}static encode(i,o,s){let c=new us(i).encode(),u=U.truncDivision(c.getSize()*o,100)+11,d=c.getSize()+u,f,p,m,C,w;if(s!==Re.DEFAULT_AZTEC_LAYERS){if(f=s<0,p=Math.abs(s),p>(f?Re.MAX_NB_BITS_COMPACT:Re.MAX_NB_BITS))throw new v(ce.format("Illegal value %s for layers",s));m=Re.totalBitsInLayer(p,f),C=Re.WORD_SIZE[p];let P=m-m%C;if(w=Re.stuffBits(c,C),w.getSize()+u>P)throw new v("Data to large for user specified layer");if(f&&w.getSize()>C*64)throw new v("Data to large for user specified layer")}else{C=0,w=null;for(let P=0;;P++){if(P>Re.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(f=P<=3,p=f?P+1:P,m=Re.totalBitsInLayer(p,f),d>m)continue;(w==null||C!==Re.WORD_SIZE[p])&&(C=Re.WORD_SIZE[p],w=Re.stuffBits(c,C));let we=m-m%C;if(!(f&&w.getSize()>C*64)&&w.getSize()+u<=we)break}}let I=Re.generateCheckWords(w,m,C),A=w.getSize()/C,_=Re.generateModeMessage(f,p,A),S=(f?11:14)+p*4,M=new Int32Array(S),R;if(f){R=S;for(let P=0;P<M.length;P++)M[P]=P}else{R=S+1+2*U.truncDivision(U.truncDivision(S,2)-1,15);let P=U.truncDivision(S,2),we=U.truncDivision(R,2);for(let de=0;de<P;de++){let Yt=de+U.truncDivision(de,15);M[P-de-1]=we-Yt-1,M[P+de]=we+Yt+1}}let V=new yt(R);for(let P=0,we=0;P<p;P++){let de=(p-P)*4+(f?9:12);for(let Yt=0;Yt<de;Yt++){let Nn=Yt*2;for(let qt=0;qt<2;qt++)I.get(we+Nn+qt)&&V.set(M[P*2+qt],M[P*2+Yt]),I.get(we+de*2+Nn+qt)&&V.set(M[P*2+Yt],M[S-1-P*2-qt]),I.get(we+de*4+Nn+qt)&&V.set(M[S-1-P*2-qt],M[S-1-P*2-Yt]),I.get(we+de*6+Nn+qt)&&V.set(M[S-1-P*2-Yt],M[P*2+qt])}we+=de*8}if(Re.drawModeMessage(V,f,R,_),f)Re.drawBullsEye(V,U.truncDivision(R,2),5);else{Re.drawBullsEye(V,U.truncDivision(R,2),7);for(let P=0,we=0;P<U.truncDivision(S,2)-1;P+=15,we+=16)for(let de=U.truncDivision(R,2)&1;de<R;de+=2)V.set(U.truncDivision(R,2)-we,de),V.set(U.truncDivision(R,2)+we,de),V.set(de,U.truncDivision(R,2)-we),V.set(de,U.truncDivision(R,2)+we)}let q=new Bg;return q.setCompact(f),q.setSize(R),q.setLayers(p),q.setCodeWords(A),q.setMatrix(V),q}static drawBullsEye(i,o,s){for(let c=0;c<s;c+=2)for(let u=o-c;u<=o+c;u++)i.set(u,o-c),i.set(u,o+c),i.set(o-c,u),i.set(o+c,u);i.set(o-s,o-s),i.set(o-s+1,o-s),i.set(o-s,o-s+1),i.set(o+s,o-s),i.set(o+s,o-s+1),i.set(o+s,o+s-1)}static generateModeMessage(i,o,s){let c=new ye;return i?(c.appendBits(o-1,2),c.appendBits(s-1,6),c=Re.generateCheckWords(c,28,4)):(c.appendBits(o-1,5),c.appendBits(s-1,11),c=Re.generateCheckWords(c,40,4)),c}static drawModeMessage(i,o,s,c){let u=U.truncDivision(s,2);if(o)for(let d=0;d<7;d++){let f=u-3+d;c.get(d)&&i.set(f,u-5),c.get(d+7)&&i.set(u+5,f),c.get(20-d)&&i.set(f,u+5),c.get(27-d)&&i.set(u-5,f)}else for(let d=0;d<10;d++){let f=u-5+d+U.truncDivision(d,5);c.get(d)&&i.set(f,u-7),c.get(d+10)&&i.set(u+7,f),c.get(29-d)&&i.set(f,u+7),c.get(39-d)&&i.set(u-7,f)}}static generateCheckWords(i,o,s){let c=i.getSize()/s,u=new ud(Re.getGF(s)),d=U.truncDivision(o,s),f=Re.bitsToWords(i,s,d);u.encode(f,d-c);let p=o%s,m=new ye;m.appendBits(0,p);for(let C of Array.from(f))m.appendBits(C,s);return m}static bitsToWords(i,o,s){let c=new Int32Array(s),u,d;for(u=0,d=i.getSize()/o;u<d;u++){let f=0;for(let p=0;p<o;p++)f|=i.get(u*o+p)?1<<o-p-1:0;c[u]=f}return c}static getGF(i){switch(i){case 4:return Oe.AZTEC_PARAM;case 6:return Oe.AZTEC_DATA_6;case 8:return Oe.AZTEC_DATA_8;case 10:return Oe.AZTEC_DATA_10;case 12:return Oe.AZTEC_DATA_12;default:throw new v("Unsupported word size "+i)}}static stuffBits(i,o){let s=new ye,c=i.getSize(),u=(1<<o)-2;for(let d=0;d<c;d+=o){let f=0;for(let p=0;p<o;p++)(d+p>=c||i.get(d+p))&&(f|=1<<o-1-p);(f&u)===u?(s.appendBits(f&u,o),d--):(f&u)===0?(s.appendBits(f|1,o),d--):s.appendBits(f,o)}return s}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Re.DEFAULT_EC_PERCENT=33,Re.DEFAULT_AZTEC_LAYERS=0,Re.MAX_NB_BITS=32,Re.MAX_NB_BITS_COMPACT=4,Re.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Qa{encode(i,o,s,c){return this.encodeWithHints(i,o,s,c,null)}encodeWithHints(i,o,s,c,u){let d=fd.ISO_8859_1,f=Re.DEFAULT_EC_PERCENT,p=Re.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(dt.CHARACTER_SET)&&(d=kg.forName(u.get(dt.CHARACTER_SET).toString())),u.has(dt.ERROR_CORRECTION)&&(f=U.parseInt(u.get(dt.ERROR_CORRECTION).toString())),u.has(dt.AZTEC_LAYERS)&&(p=U.parseInt(u.get(dt.AZTEC_LAYERS).toString()))),Qa.encodeLayers(i,o,s,c,d,f,p)}static encodeLayers(i,o,s,c,u,d,f){if(o!==re.AZTEC)throw new v("Can only encode AZTEC, but got "+o);let p=Re.encode(ce.getBytes(i,u),d,f);return Qa.renderResult(p,s,c)}static renderResult(i,o,s){let c=i.getMatrix();if(c==null)throw new tr;let u=c.getWidth(),d=c.getHeight(),f=Math.max(o,u),p=Math.max(s,d),m=Math.min(f/u,p/d),C=(f-u*m)/2,w=(p-d*m)/2,I=new yt(f,p);for(let A=0,_=w;A<d;A++,_+=m)for(let S=0,M=C;S<u;S++,M+=m)c.get(S,A)&&I.setRegion(M,_,m,m);return I}}e.AbstractExpandedDecoder=ed,e.ArgumentException=E,e.ArithmeticException=Yu,e.AztecCode=Bg,e.AztecCodeReader=Ua,e.AztecCodeWriter=Qa,e.AztecDecoder=qu,e.AztecDetector=Cg,e.AztecDetectorResult=Eg,e.AztecEncoder=Re,e.AztecHighLevelEncoder=us,e.AztecPoint=Vt,e.BarcodeFormat=re,e.Binarizer=O,e.BinaryBitmap=x,e.BitArray=ye,e.BitMatrix=yt,e.BitSource=id,e.BrowserAztecCodeReader=Qv,e.BrowserBarcodeReader=sC,e.BrowserCodeReader=si,e.BrowserDatamatrixCodeReader=cC,e.BrowserMultiFormatReader=xC,e.BrowserPDF417Reader=IC,e.BrowserQRCodeReader=DC,e.BrowserQRCodeSvgWriter=bC,e.CharacterSetECI=G,e.ChecksumException=b,e.Code128Reader=Y,e.Code39Reader=Xu,e.DataMatrixDecodedBitStreamParser=Tr,e.DataMatrixReader=Wa,e.DecodeHintType=Ce,e.DecoderResult=Jo,e.DefaultGridSampler=vg,e.DetectorResult=Va,e.EAN13Reader=Ha,e.EncodeHintType=dt,e.Exception=g,e.FormatException=z,e.GenericGF=Oe,e.GenericGFPoly=Wt,e.GlobalHistogramBinarizer=Et,e.GridSampler=Zu,e.GridSamplerInstance=br,e.HTMLCanvasElementLuminanceSource=Ar,e.HybridBinarizer=ge,e.ITFReader=He,e.IllegalArgumentException=v,e.IllegalStateException=tr,e.InvertedLuminanceSource=Dr,e.LuminanceSource=Ko,e.MathUtils=Ne,e.MultiFormatOneDReader=Ki,e.MultiFormatReader=Fg,e.MultiFormatWriter=_C,e.NotFoundException=L,e.OneDReader=it,e.PDF417DecodedBitStreamParser=F,e.PDF417DecoderErrorCorrection=Sg,e.PDF417Reader=bt,e.PDF417ResultMetadata=Ng,e.PerspectiveTransform=bn,e.PlanarYUVLuminanceSource=SC,e.QRCodeByteMatrix=qa,e.QRCodeDataMask=mn,e.QRCodeDecodedBitStreamParser=bg,e.QRCodeDecoderErrorCorrectionLevel=Ye,e.QRCodeDecoderFormatInformation=Ot,e.QRCodeEncoder=Ze,e.QRCodeEncoderQRCode=Za,e.QRCodeMaskUtil=Ji,e.QRCodeMatrixUtil=ie,e.QRCodeMode=ne,e.QRCodeReader=Mr,e.QRCodeVersion=ee,e.QRCodeWriter=Lg,e.RGBLuminanceSource=dd,e.RSS14Reader=Je,e.RSSExpandedReader=k,e.ReaderException=ld,e.ReedSolomonDecoder=ns,e.ReedSolomonEncoder=ud,e.ReedSolomonException=ts,e.Result=Bt,e.ResultMetadataType=vt,e.ResultPoint=J,e.StringUtils=ce,e.UnsupportedOperationException=Qo,e.VideoInputDevice=gg,e.WhiteRectangleDetector=ja,e.WriterException=qe,e.ZXingArrays=H,e.ZXingCharset=kg,e.ZXingInteger=U,e.ZXingStandardCharsets=fd,e.ZXingStringBuilder=Ue,e.ZXingStringEncoding=Gt,e.ZXingSystem=T,e.createAbstractExpandedDecoder=Ag,Object.defineProperty(e,"__esModule",{value:!0})})});var yd;function Ed(){return yd}function nr(e){let t=yd;return yd=e,t}var YC=Symbol("NotFound"),Ka=class extends Error{name="\u0275NotFound";constructor(t){super(t)}};function ro(e){return e===YC||e?.name==="\u0275NotFound"}function rc(e,t){return Object.is(e,t)}var ft=null,Ja=!1,vd=1,qC=null,Ft=Symbol("SIGNAL");function he(e){let t=ft;return ft=e,t}function ic(){return ft}var di={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function io(e){if(Ja)throw new Error("");if(ft===null)return;ft.consumerOnSignalRead(e);let t=ft.nextProducerIndex++;if(cc(ft),t<ft.producerNode.length&&ft.producerNode[t]!==e&&fs(ft)){let n=ft.producerNode[t];ac(n,ft.producerIndexOfThis[t])}ft.producerNode[t]!==e&&(ft.producerNode[t]=e,ft.producerIndexOfThis[t]=fs(ft)?$g(e,ft,t):0),ft.producerLastReadVersion[t]=e.version}function Wg(){vd++}function oc(e){if(!(fs(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===vd)){if(!e.producerMustRecompute(e)&&!hs(e)){nc(e);return}e.producerRecomputeValue(e),nc(e)}}function Cd(e){if(e.liveConsumerNode===void 0)return;let t=Ja;Ja=!0;try{for(let n of e.liveConsumerNode)n.dirty||ZC(n)}finally{Ja=t}}function wd(){return ft?.consumerAllowSignalWrites!==!1}function ZC(e){e.dirty=!0,Cd(e),e.consumerMarkedDirty?.(e)}function nc(e){e.dirty=!1,e.lastCleanEpoch=vd}function fi(e){return e&&(e.nextProducerIndex=0),he(e)}function oo(e,t){if(he(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(fs(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)ac(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function hs(e){cc(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(oc(n),r!==n.version))return!0}return!1}function sc(e){if(cc(e),fs(e))for(let t=0;t<e.producerNode.length;t++)ac(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function $g(e,t,n){if(Yg(e),e.liveConsumerNode.length===0&&qg(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=$g(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function ac(e,t){if(Yg(e),e.liveConsumerNode.length===1&&qg(e))for(let r=0;r<e.producerNode.length;r++)ac(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],a=e.liveConsumerNode[t];cc(a),a.producerIndexOfThis[r]=t}}function fs(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function cc(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Yg(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function qg(e){return e.producerNode!==void 0}function lc(e){qC?.(e)}function uc(e,t){let n=Object.create(XC);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(oc(n),io(n),n.value===ds)throw n.error;return n.value};return r[Ft]=n,lc(n),r}var ec=Symbol("UNSET"),tc=Symbol("COMPUTING"),ds=Symbol("ERRORED"),XC=ve($({},di),{value:ec,dirty:!0,error:null,equal:rc,kind:"computed",producerMustRecompute(e){return e.value===ec||e.value===tc},producerRecomputeValue(e){if(e.value===tc)throw new Error("");let t=e.value;e.value=tc;let n=fi(e),r,a=!1;try{r=e.computation(),he(null),a=t!==ec&&t!==ds&&r!==ds&&e.equal(t,r)}catch(l){r=ds,e.error=l}finally{oo(e,n)}if(a){e.value=t;return}e.value=r,e.version++}});function QC(){throw new Error}var Zg=QC;function Xg(e){Zg(e)}function xd(e){Zg=e}var KC=null;function Id(e,t){let n=Object.create(dc);n.value=e,t!==void 0&&(n.equal=t);let r=()=>Qg(n);return r[Ft]=n,lc(n),[r,h=>so(n,h),h=>Dd(n,h)]}function Qg(e){return io(e),e.value}function so(e,t){wd()||Xg(e),e.equal(e.value,t)||(e.value=t,JC(e))}function Dd(e,t){wd()||Xg(e),so(e,t(e.value))}var dc=ve($({},di),{equal:rc,value:void 0,kind:"signal"});function JC(e){e.version++,Wg(),Cd(e),KC?.(e)}function le(e){return typeof e=="function"}function ao(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var fc=ao(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,a)=>`${a+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ps(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ot=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let l of n)l.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(le(r))try{r()}catch(l){t=l instanceof fc?l.errors:[l]}let{_finalizers:a}=this;if(a){this._finalizers=null;for(let l of a)try{Kg(l)}catch(h){t=t??[],h instanceof fc?t=[...t,...h.errors]:t.push(h)}}if(t)throw new fc(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Kg(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&ps(n,t)}remove(t){let{_finalizers:n}=this;n&&ps(n,t),t instanceof e&&t._removeParent(this)}};ot.EMPTY=(()=>{let e=new ot;return e.closed=!0,e})();var Ad=ot.EMPTY;function hc(e){return e instanceof ot||e&&"closed"in e&&le(e.remove)&&le(e.add)&&le(e.unsubscribe)}function Kg(e){le(e)?e():e.unsubscribe()}var Rn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var co={setTimeout(e,t,...n){let{delegate:r}=co;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=co;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function pc(e){co.setTimeout(()=>{let{onUnhandledError:t}=Rn;if(t)t(e);else throw e})}function gs(){}var Jg=bd("C",void 0,void 0);function e0(e){return bd("E",void 0,e)}function t0(e){return bd("N",e,void 0)}function bd(e,t,n){return{kind:e,value:t,error:n}}var hi=null;function lo(e){if(Rn.useDeprecatedSynchronousErrorHandling){let t=!hi;if(t&&(hi={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=hi;if(hi=null,n)throw r}}else e()}function n0(e){Rn.useDeprecatedSynchronousErrorHandling&&hi&&(hi.errorThrown=!0,hi.error=e)}var pi=class extends ot{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,hc(t)&&t.add(this)):this.destination=nw}static create(t,n,r){return new uo(t,n,r)}next(t){this.isStopped?Sd(t0(t),this):this._next(t)}error(t){this.isStopped?Sd(e0(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Sd(Jg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ew=Function.prototype.bind;function _d(e,t){return ew.call(e,t)}var Td=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){gc(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){gc(r)}else gc(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){gc(n)}}},uo=class extends pi{constructor(t,n,r){super();let a;if(le(t)||!t)a={next:t??void 0,error:n??void 0,complete:r??void 0};else{let l;this&&Rn.useDeprecatedNextContext?(l=Object.create(t),l.unsubscribe=()=>this.unsubscribe(),a={next:t.next&&_d(t.next,l),error:t.error&&_d(t.error,l),complete:t.complete&&_d(t.complete,l)}):a=t}this.destination=new Td(a)}};function gc(e){Rn.useDeprecatedSynchronousErrorHandling?n0(e):pc(e)}function tw(e){throw e}function Sd(e,t){let{onStoppedNotification:n}=Rn;n&&co.setTimeout(()=>n(e,t))}var nw={closed:!0,next:gs,error:tw,complete:gs};var fo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function an(e){return e}function Md(...e){return Nd(e)}function Nd(e){return e.length===0?an:e.length===1?e[0]:function(n){return e.reduce((r,a)=>a(r),n)}}var Ie=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,a){let l=iw(n)?n:new uo(n,r,a);return lo(()=>{let{operator:h,source:g}=this;l.add(h?h.call(l,g):g?this._subscribe(l):this._trySubscribe(l))}),l}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=r0(r),new r((a,l)=>{let h=new uo({next:g=>{try{n(g)}catch(E){l(E),h.unsubscribe()}},error:l,complete:a});this.subscribe(h)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[fo](){return this}pipe(...n){return Nd(n)(this)}toPromise(n){return n=r0(n),new n((r,a)=>{let l;this.subscribe(h=>l=h,h=>a(h),()=>r(l))})}}return e.create=t=>new e(t),e})();function r0(e){var t;return(t=e??Rn.Promise)!==null&&t!==void 0?t:Promise}function rw(e){return e&&le(e.next)&&le(e.error)&&le(e.complete)}function iw(e){return e&&e instanceof pi||rw(e)&&hc(e)}function Rd(e){return le(e?.lift)}function Se(e){return t=>{if(Rd(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ae(e,t,n,r,a){return new Od(e,t,n,r,a)}var Od=class extends pi{constructor(t,n,r,a,l,h){super(t),this.onFinalize=l,this.shouldUnsubscribe=h,this._next=n?function(g){try{n(g)}catch(E){t.error(E)}}:super._next,this._error=a?function(g){try{a(g)}catch(E){t.error(E)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(g){t.error(g)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function ho(){return Se((e,t)=>{let n=null;e._refCount++;let r=Ae(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let a=e._connection,l=n;n=null,a&&(!l||a===l)&&a.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var po=class extends Ie{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Rd(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ot;let n=this.getSubject();t.add(this.source.subscribe(Ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ot.EMPTY)}return t}refCount(){return ho()(this)}};var i0=ao(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ht=(()=>{class e extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new mc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new i0}next(n){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:a,observers:l}=this;return r||a?Ad:(this.currentObservers=null,l.push(n),new ot(()=>{this.currentObservers=null,ps(l,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:a,isStopped:l}=this;r?n.error(a):l&&n.complete()}asObservable(){let n=new Ie;return n.source=this,n}}return e.create=(t,n)=>new mc(t,n),e})(),mc=class extends ht{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Ad}};var St=class extends ht{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Zt=new Ie(e=>e.complete());function o0(e){return e&&le(e.schedule)}function s0(e){return e[e.length-1]}function yc(e){return le(s0(e))?e.pop():void 0}function Or(e){return o0(s0(e))?e.pop():void 0}function c0(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(x){try{v(r.next(x))}catch(b){h(b)}}function E(x){try{v(r.throw(x))}catch(b){h(b)}}function v(x){x.done?l(x.value):a(x.value).then(g,E)}v((r=r.apply(e,t||[])).next())})}function a0(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gi(e){return this instanceof gi?(this.v=e,this):new gi(e)}function l0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",h),a[Symbol.asyncIterator]=function(){return this},a;function h(T){return function(j){return Promise.resolve(j).then(T,b)}}function g(T,j){r[T]&&(a[T]=function(W){return new Promise(function(H,U){l.push([T,W,H,U])>1||E(T,W)})},j&&(a[T]=j(a[T])))}function E(T,j){try{v(r[T](j))}catch(W){O(l[0][3],W)}}function v(T){T.value instanceof gi?Promise.resolve(T.value.v).then(x,b):O(l[0][2],T)}function x(T){E("next",T)}function b(T){E("throw",T)}function O(T,j){T(j),l.shift(),l.length&&E(l[0][0],l[0][1])}}function u0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof a0=="function"?a0(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(l){n[l]=e[l]&&function(h){return new Promise(function(g,E){h=e[l](h),a(g,E,h.done,h.value)})}}function a(l,h,g,E){Promise.resolve(E).then(function(v){l({value:v,done:g})},h)}}var Ec=e=>e&&typeof e.length=="number"&&typeof e!="function";function vc(e){return le(e?.then)}function Cc(e){return le(e[fo])}function wc(e){return Symbol.asyncIterator&&le(e?.[Symbol.asyncIterator])}function xc(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ow(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ic=ow();function Dc(e){return le(e?.[Ic])}function Ac(e){return l0(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:a}=yield gi(n.read());if(a)return yield gi(void 0);yield yield gi(r)}}finally{n.releaseLock()}})}function bc(e){return le(e?.getReader)}function st(e){if(e instanceof Ie)return e;if(e!=null){if(Cc(e))return sw(e);if(Ec(e))return aw(e);if(vc(e))return cw(e);if(wc(e))return d0(e);if(Dc(e))return lw(e);if(bc(e))return uw(e)}throw xc(e)}function sw(e){return new Ie(t=>{let n=e[fo]();if(le(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aw(e){return new Ie(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function cw(e){return new Ie(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,pc)})}function lw(e){return new Ie(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function d0(e){return new Ie(t=>{dw(e,t).catch(n=>t.error(n))})}function uw(e){return d0(Ac(e))}function dw(e,t){var n,r,a,l;return c0(this,void 0,void 0,function*(){try{for(n=u0(e);r=yield n.next(),!r.done;){let h=r.value;if(t.next(h),t.closed)return}}catch(h){a={error:h}}finally{try{r&&!r.done&&(l=n.return)&&(yield l.call(n))}finally{if(a)throw a.error}}t.complete()})}function Xt(e,t,n,r=0,a=!1){let l=t.schedule(function(){n(),a?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(l),!a)return l}function _c(e,t=0){return Se((n,r)=>{n.subscribe(Ae(r,a=>Xt(r,e,()=>r.next(a),t),()=>Xt(r,e,()=>r.complete(),t),a=>Xt(r,e,()=>r.error(a),t)))})}function Sc(e,t=0){return Se((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function f0(e,t){return st(e).pipe(Sc(t),_c(t))}function h0(e,t){return st(e).pipe(Sc(t),_c(t))}function p0(e,t){return new Ie(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function g0(e,t){return new Ie(n=>{let r;return Xt(n,t,()=>{r=e[Ic](),Xt(n,t,()=>{let a,l;try{({value:a,done:l}=r.next())}catch(h){n.error(h);return}l?n.complete():n.next(a)},0,!0)}),()=>le(r?.return)&&r.return()})}function Tc(e,t){if(!e)throw new Error("Iterable cannot be null");return new Ie(n=>{Xt(n,t,()=>{let r=e[Symbol.asyncIterator]();Xt(n,t,()=>{r.next().then(a=>{a.done?n.complete():n.next(a.value)})},0,!0)})})}function m0(e,t){return Tc(Ac(e),t)}function y0(e,t){if(e!=null){if(Cc(e))return f0(e,t);if(Ec(e))return p0(e,t);if(vc(e))return h0(e,t);if(wc(e))return Tc(e,t);if(Dc(e))return g0(e,t);if(bc(e))return m0(e,t)}throw xc(e)}function et(e,t){return t?y0(e,t):st(e)}function ae(...e){let t=Or(e);return et(e,t)}function go(e,t){let n=le(e)?e:()=>e,r=a=>a.error(n());return new Ie(t?a=>t.schedule(r,0,a):r)}function Fd(e){return!!e&&(e instanceof Ie||le(e.lift)&&le(e.subscribe))}var rr=ao(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function pe(e,t){return Se((n,r)=>{let a=0;n.subscribe(Ae(r,l=>{r.next(e.call(t,l,a++))}))})}var{isArray:fw}=Array;function hw(e,t){return fw(t)?e(...t):e(t)}function Mc(e){return pe(t=>hw(e,t))}var{isArray:pw}=Array,{getPrototypeOf:gw,prototype:mw,keys:yw}=Object;function Nc(e){if(e.length===1){let t=e[0];if(pw(t))return{args:t,keys:null};if(Ew(t)){let n=yw(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function Ew(e){return e&&typeof e=="object"&&gw(e)===mw}function Rc(e,t){return e.reduce((n,r,a)=>(n[r]=t[a],n),{})}function Oc(...e){let t=Or(e),n=yc(e),{args:r,keys:a}=Nc(e);if(r.length===0)return et([],t);let l=new Ie(vw(r,t,a?h=>Rc(a,h):an));return n?l.pipe(Mc(n)):l}function vw(e,t,n=an){return r=>{E0(t,()=>{let{length:a}=e,l=new Array(a),h=a,g=a;for(let E=0;E<a;E++)E0(t,()=>{let v=et(e[E],t),x=!1;v.subscribe(Ae(r,b=>{l[E]=b,x||(x=!0,g--),g||r.next(n(l.slice()))},()=>{--h||r.complete()}))},r)},r)}}function E0(e,t,n){e?Xt(n,e,t):t()}function v0(e,t,n,r,a,l,h,g){let E=[],v=0,x=0,b=!1,O=()=>{b&&!E.length&&!v&&t.complete()},T=W=>v<r?j(W):E.push(W),j=W=>{l&&t.next(W),v++;let H=!1;st(n(W,x++)).subscribe(Ae(t,U=>{a?.(U),l?T(U):t.next(U)},()=>{H=!0},void 0,()=>{if(H)try{for(v--;E.length&&v<r;){let U=E.shift();h?Xt(t,h,()=>j(U)):j(U)}O()}catch(U){t.error(U)}}))};return e.subscribe(Ae(t,T,()=>{b=!0,O()})),()=>{g?.()}}function pt(e,t,n=1/0){return le(t)?pt((r,a)=>pe((l,h)=>t(r,l,a,h))(st(e(r,a))),n):(typeof t=="number"&&(n=t),Se((r,a)=>v0(r,a,e,n)))}function C0(e=1/0){return pt(an,e)}function w0(){return C0(1)}function mo(...e){return w0()(et(e,Or(e)))}function ms(e){return new Ie(t=>{st(e()).subscribe(t)})}function Pd(...e){let t=yc(e),{args:n,keys:r}=Nc(e),a=new Ie(l=>{let{length:h}=n;if(!h){l.complete();return}let g=new Array(h),E=h,v=h;for(let x=0;x<h;x++){let b=!1;st(n[x]).subscribe(Ae(l,O=>{b||(b=!0,v--),g[x]=O},()=>E--,void 0,()=>{(!E||!b)&&(v||l.next(r?Rc(r,g):g),l.complete())}))}});return t?a.pipe(Mc(t)):a}function Qt(e,t){return Se((n,r)=>{let a=0;n.subscribe(Ae(r,l=>e.call(t,l,a++)&&r.next(l)))})}function Fr(e){return Se((t,n)=>{let r=null,a=!1,l;r=t.subscribe(Ae(n,void 0,void 0,h=>{l=st(e(h,Fr(e)(t))),r?(r.unsubscribe(),r=null,l.subscribe(n)):a=!0})),a&&(r.unsubscribe(),r=null,l.subscribe(n))})}function x0(e,t,n,r,a){return(l,h)=>{let g=n,E=t,v=0;l.subscribe(Ae(h,x=>{let b=v++;E=g?e(E,x,b):(g=!0,x),r&&h.next(E)},a&&(()=>{g&&h.next(E),h.complete()})))}}function Pr(e,t){return le(t)?pt(e,t,1):pt(e,1)}function Lr(e){return Se((t,n)=>{let r=!1;t.subscribe(Ae(n,a=>{r=!0,n.next(a)},()=>{r||n.next(e),n.complete()}))})}function ir(e){return e<=0?()=>Zt:Se((t,n)=>{let r=0;t.subscribe(Ae(n,a=>{++r<=e&&(n.next(a),e<=r&&n.complete())}))})}function Fc(e=Cw){return Se((t,n)=>{let r=!1;t.subscribe(Ae(n,a=>{r=!0,n.next(a)},()=>r?n.complete():n.error(e())))})}function Cw(){return new rr}function kr(e){return Se((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function or(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Qt((a,l)=>e(a,l,r)):an,ir(1),n?Lr(t):Fc(()=>new rr))}function yo(e){return e<=0?()=>Zt:Se((t,n)=>{let r=[];t.subscribe(Ae(n,a=>{r.push(a),e<r.length&&r.shift()},()=>{for(let a of r)n.next(a);n.complete()},void 0,()=>{r=null}))})}function Ld(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Qt((a,l)=>e(a,l,r)):an,yo(1),n?Lr(t):Fc(()=>new rr))}function kd(e,t){return Se(x0(e,t,arguments.length>=2,!0))}function Bd(...e){let t=Or(e);return Se((n,r)=>{(t?mo(e,n,t):mo(e,n)).subscribe(r)})}function Kt(e,t){return Se((n,r)=>{let a=null,l=0,h=!1,g=()=>h&&!a&&r.complete();n.subscribe(Ae(r,E=>{a?.unsubscribe();let v=0,x=l++;st(e(E,x)).subscribe(a=Ae(r,b=>r.next(t?t(E,b,x,v++):b),()=>{a=null,g()}))},()=>{h=!0,g()}))})}function Pc(e){return Se((t,n)=>{st(e).subscribe(Ae(n,()=>n.complete(),gs)),!n.closed&&t.subscribe(n)})}function wt(e,t,n){let r=le(e)||t||n?{next:e,error:t,complete:n}:e;return r?Se((a,l)=>{var h;(h=r.subscribe)===null||h===void 0||h.call(r);let g=!0;a.subscribe(Ae(l,E=>{var v;(v=r.next)===null||v===void 0||v.call(r,E),l.next(E)},()=>{var E;g=!1,(E=r.complete)===null||E===void 0||E.call(r),l.complete()},E=>{var v;g=!1,(v=r.error)===null||v===void 0||v.call(r,E),l.error(E)},()=>{var E,v;g&&((E=r.unsubscribe)===null||E===void 0||E.call(r)),(v=r.finalize)===null||v===void 0||v.call(r)}))}):an}function I0(e){let t=he(null);try{return e()}finally{he(t)}}var Qd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Q=class extends Error{code;constructor(t,n){super(jc(t,n)),this.code=t}};function ww(e){return`NG0${Math.abs(e)}`}function jc(e,t){return`${ww(e)}${t?": "+t:""}`}function Xe(e){for(let t in e)if(e[t]===Xe)return t;throw Error("")}function _0(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Jt(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Jt).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Kd(e,t){return e?t?`${e} ${t}`:e:t||""}var xw=Xe({__forward_ref__:Xe});function ar(e){return e.__forward_ref__=ar,e.toString=function(){return Jt(this())},e}function Tt(e){return Jd(e)?e():e}function Jd(e){return typeof e=="function"&&e.hasOwnProperty(xw)&&e.__forward_ref__===ar}function S0(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(r==null?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function te(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Fn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Cs(e){return Iw(e,Uc)}function ef(e){return Cs(e)!==null}function Iw(e,t){return e.hasOwnProperty(t)&&e[t]||null}function Dw(e){let t=e?.[Uc]??null;return t||null}function jd(e){return e&&e.hasOwnProperty(kc)?e[kc]:null}var Uc=Xe({\u0275prov:Xe}),kc=Xe({\u0275inj:Xe}),K=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function tf(e){return e&&!!e.\u0275providers}var nf=Xe({\u0275cmp:Xe}),rf=Xe({\u0275dir:Xe}),of=Xe({\u0275pipe:Xe}),sf=Xe({\u0275mod:Xe}),Es=Xe({\u0275fac:Xe}),Ci=Xe({__NG_ELEMENT_ID__:Xe}),D0=Xe({__NG_ENV_ID__:Xe});function af(e){return typeof e=="string"?e:e==null?"":String(e)}function T0(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():af(e)}function cf(e,t){throw new Q(-200,e)}function Hc(e,t){throw new Q(-201,!1)}var Ud;function M0(){return Ud}function jt(e){let t=Ud;return Ud=e,t}function lf(e,t,n){let r=Cs(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;Hc(e,"Injector")}var Aw={},mi=Aw,Hd="__NG_DI_FLAG__",zd=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=yi(n)||0;try{return this.injector.get(t,r&8?null:mi,r)}catch(a){if(ro(a))return a;throw a}}},Bc="ngTempTokenPath",bw="ngTokenPath",_w=/\n/gm,Sw="\u0275",A0="__source";function Tw(e,t=0){let n=Ed();if(n===void 0)throw new Q(-203,!1);if(n===null)return lf(e,void 0,t);{let r=Mw(t),a=n.retrieve(e,r);if(ro(a)){if(r.optional)return null;throw a}return a}}function se(e,t=0){return(M0()||Tw)(Tt(e),t)}function B(e,t){return se(e,yi(t))}function yi(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Mw(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function Gd(e){let t=[];for(let n=0;n<e.length;n++){let r=Tt(e[n]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let a,l=0;for(let h=0;h<r.length;h++){let g=r[h],E=Nw(g);typeof E=="number"?E===-1?a=g.token:l|=E:a=g}t.push(se(a,l))}else t.push(se(r))}return t}function uf(e,t){return e[Hd]=t,e.prototype[Hd]=t,e}function Nw(e){return e[Hd]}function Rw(e,t,n,r){let a=e[Bc];throw t[A0]&&a.unshift(t[A0]),e.message=Ow(`
`+e.message,a,n,r),e[bw]=a,e[Bc]=null,e}function Ow(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Sw?e.slice(2):e;let a=Jt(t);if(Array.isArray(t))a=t.map(Jt).join(" -> ");else if(typeof t=="object"){let l=[];for(let h in t)if(t.hasOwnProperty(h)){let g=t[h];l.push(h+":"+(typeof g=="string"?JSON.stringify(g):Jt(g)))}a=`{${l.join(", ")}}`}return`${n}${r?"("+r+")":""}[${a}]: ${e.replace(_w,`
  `)}`}function Br(e,t){let n=e.hasOwnProperty(Es);return n?e[Es]:null}function zc(e,t){e.forEach(n=>Array.isArray(n)?zc(n,t):t(n))}function df(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ws(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function N0(e,t,n,r){let a=e.length;if(a==t)e.push(n,r);else if(a===1)e.push(r,e[0]),e[0]=n;else{for(a--,e.push(e[a-1],e[a]);a>t;){let l=a-2;e[a]=e[l],a--}e[t]=n,e[t+1]=r}}function R0(e,t,n){let r=vo(e,t);return r>=0?e[r|1]=n:(r=~r,N0(e,r,t,n)),r}function Gc(e,t){let n=vo(e,t);if(n>=0)return e[n|1]}function vo(e,t){return Fw(e,t,1)}function Fw(e,t,n){let r=0,a=e.length>>n;for(;a!==r;){let l=r+(a-r>>1),h=e[l<<n];if(t===h)return l<<n;h>t?a=l:r=l+1}return~(a<<n)}var Ur={},cn=[],cr=new K(""),ff=new K("",-1),hf=new K(""),vs=class{get(t,n=mi){if(n===mi)throw new Ka(`NullInjectorError: No provider for ${Jt(t)}!`);return n}};function pf(e){return e[sf]||null}function Hr(e){return e[nf]||null}function gf(e){return e[rf]||null}function O0(e){return e[of]||null}function lr(e){return{\u0275providers:e}}function F0(e){return lr([{provide:cr,multi:!0,useValue:e}])}function P0(...e){return{\u0275providers:mf(!0,e),\u0275fromNgModule:!0}}function mf(e,...t){let n=[],r=new Set,a,l=h=>{n.push(h)};return zc(t,h=>{let g=h;Vc(g,l,[],r)&&(a||=[],a.push(g))}),a!==void 0&&L0(a,l),n}function L0(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:a}=e[n];yf(a,l=>{t(l,r)})}}function Vc(e,t,n,r){if(e=Tt(e),!e)return!1;let a=null,l=jd(e),h=!l&&Hr(e);if(!l&&!h){let E=e.ngModule;if(l=jd(E),l)a=E;else return!1}else{if(h&&!h.standalone)return!1;a=e}let g=r.has(a);if(h){if(g)return!1;if(r.add(a),h.dependencies){let E=typeof h.dependencies=="function"?h.dependencies():h.dependencies;for(let v of E)Vc(v,t,n,r)}}else if(l){if(l.imports!=null&&!g){r.add(a);let v;try{zc(l.imports,x=>{Vc(x,t,n,r)&&(v||=[],v.push(x))})}finally{}v!==void 0&&L0(v,t)}if(!g){let v=Br(a)||(()=>new a);t({provide:a,useFactory:v,deps:cn},a),t({provide:hf,useValue:a,multi:!0},a),t({provide:cr,useValue:()=>se(a),multi:!0},a)}let E=l.providers;if(E!=null&&!g){let v=e;yf(E,x=>{t(x,v)})}}else return!1;return a!==e&&e.providers!==void 0}function yf(e,t){for(let n of e)tf(n)&&(n=n.\u0275providers),Array.isArray(n)?yf(n,t):t(n)}var Pw=Xe({provide:String,useValue:Xe});function k0(e){return e!==null&&typeof e=="object"&&Pw in e}function Lw(e){return!!(e&&e.useExisting)}function kw(e){return!!(e&&e.useFactory)}function Ei(e){return typeof e=="function"}function B0(e){return!!e.useClass}var xs=new K(""),Lc={},b0={},Vd;function Is(){return Vd===void 0&&(Vd=new vs),Vd}var gt=class{},vi=class extends gt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,a){super(),this.parent=n,this.source=r,this.scopes=a,$d(t,h=>this.processProvider(h)),this.records.set(ff,Eo(void 0,this)),a.has("environment")&&this.records.set(gt,Eo(void 0,this));let l=this.records.get(xs);l!=null&&typeof l.value=="string"&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(hf,cn,{self:!0}))}retrieve(t,n){let r=yi(n)||0;try{return this.get(t,mi,r)}catch(a){if(ro(a))return a;throw a}}destroy(){ys(this),this._destroyed=!0;let t=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(t)}}onDestroy(t){return ys(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){ys(this);let n=nr(this),r=jt(void 0),a;try{return t()}finally{nr(n),jt(r)}}get(t,n=mi,r){if(ys(this),t.hasOwnProperty(D0))return t[D0](this);let a=yi(r),l,h=nr(this),g=jt(void 0);try{if(!(a&4)){let v=this.records.get(t);if(v===void 0){let x=Hw(t)&&Cs(t);x&&this.injectableDefInScope(x)?v=Eo(Wd(t),Lc):v=null,this.records.set(t,v)}if(v!=null)return this.hydrate(t,v)}let E=a&2?Is():this.parent;return n=a&8&&n===mi?null:n,E.get(t,n)}catch(E){if(ro(E)){if((E[Bc]=E[Bc]||[]).unshift(Jt(t)),h)throw E;return Rw(E,t,"R3InjectorError",this.source)}else throw E}finally{jt(g),nr(h)}}resolveInjectorInitializers(){let t=he(null),n=nr(this),r=jt(void 0),a;try{let l=this.get(cr,cn,{self:!0});for(let h of l)h()}finally{nr(n),jt(r),he(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Jt(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Tt(t);let n=Ei(t)?t:Tt(t&&t.provide),r=Vw(t);if(!Ei(t)&&t.multi===!0){let a=this.records.get(n);a||(a=Eo(void 0,Lc,!0),a.factory=()=>Gd(a.multi),this.records.set(n,a)),n=t,a.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=he(null);try{return n.value===b0?cf(Jt(t)):n.value===Lc&&(n.value=b0,n.value=n.factory()),typeof n.value=="object"&&n.value&&Uw(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Tt(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Wd(e){let t=Cs(e),n=t!==null?t.factory:Br(e);if(n!==null)return n;if(e instanceof K)throw new Q(204,!1);if(e instanceof Function)return Bw(e);throw new Q(204,!1)}function Bw(e){if(e.length>0)throw new Q(204,!1);let n=Dw(e);return n!==null?()=>n.factory(e):()=>new e}function Vw(e){if(k0(e))return Eo(void 0,e.useValue);{let t=Ef(e);return Eo(t,Lc)}}function Ef(e,t,n){let r;if(Ei(e)){let a=Tt(e);return Br(a)||Wd(a)}else if(k0(e))r=()=>Tt(e.useValue);else if(kw(e))r=()=>e.useFactory(...Gd(e.deps||[]));else if(Lw(e))r=()=>se(Tt(e.useExisting));else{let a=Tt(e&&(e.useClass||e.provide));if(jw(e))r=()=>new a(...Gd(e.deps));else return Br(a)||Wd(a)}return r}function ys(e){if(e.destroyed)throw new Q(205,!1)}function Eo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function jw(e){return!!e.deps}function Uw(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function Hw(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function $d(e,t){for(let n of e)Array.isArray(n)?$d(n,t):n&&tf(n)?$d(n.\u0275providers,t):t(n)}function Ut(e,t){let n;e instanceof vi?(ys(e),n=e):n=new zd(e);let r,a=nr(n),l=jt(void 0);try{return t()}finally{nr(a),jt(l)}}function V0(){return M0()!==void 0||Ed()!=null}var Pn=0,xe=1,ue=2,Mt=3,En=4,vn=5,Ds=6,Co=7,Pt=8,wi=9,ur=10,rt=11,wo=12,vf=13,xi=14,Cn=15,Ii=16,Di=17,Ai=18,As=19,Cf=20,sr=21,Wc=22,bs=23,ln=24,$c=25,en=26,j0=1;var zr=7,_s=8,Ss=9,tn=10;function zn(e){return Array.isArray(e)&&typeof e[j0]=="object"}function Ln(e){return Array.isArray(e)&&e[j0]===!0}function Yc(e){return(e.flags&4)!==0}function Gr(e){return e.componentOffset>-1}function Ts(e){return(e.flags&1)===1}function Gn(e){return!!e.template}function xo(e){return(e[ue]&512)!==0}function bi(e){return(e[ue]&256)===256}var U0="svg",H0="math";function wn(e){for(;Array.isArray(e);)e=e[Pn];return e}function wf(e,t){return wn(t[e])}function Wn(e,t){return wn(t[e.index])}function qc(e,t){return e.data[t]}function z0(e,t){return e[t]}function xf(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function xn(e,t){let n=t[e];return zn(n)?n:n[Pn]}function Zc(e){return(e[ue]&128)===128}function G0(e){return Ln(e[Mt])}function _i(e,t){return t==null?null:e[t]}function If(e){e[Di]=0}function Df(e){e[ue]&1024||(e[ue]|=1024,Zc(e)&&Ns(e))}function W0(e,t){for(;e>0;)t=t[xi],e--;return t}function Ms(e){return!!(e[ue]&9216||e[ln]?.dirty)}function Xc(e){e[ur].changeDetectionScheduler?.notify(8),e[ue]&64&&(e[ue]|=1024),Ms(e)&&Ns(e)}function Ns(e){e[ur].changeDetectionScheduler?.notify(0);let t=Vr(e);for(;t!==null&&!(t[ue]&8192||(t[ue]|=8192,!Zc(t)));)t=Vr(t)}function Af(e,t){if(bi(e))throw new Q(911,!1);e[sr]===null&&(e[sr]=[]),e[sr].push(t)}function $0(e,t){if(e[sr]===null)return;let n=e[sr].indexOf(t);n!==-1&&e[sr].splice(n,1)}function Vr(e){let t=e[Mt];return Ln(t)?t[Mt]:t}function Y0(e){return e[Co]??=[]}function q0(e){return e.cleanup??=[]}var De={lFrame:lm(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Rs=function(e){return e[e.Off=0]="Off",e[e.Exhaustive=1]="Exhaustive",e[e.OnlyDirtyViews=2]="OnlyDirtyViews",e}(Rs||{}),zw=0,Yd=!1;function Z0(){return De.lFrame.elementDepthCount}function X0(){De.lFrame.elementDepthCount++}function Q0(){De.lFrame.elementDepthCount--}function Qc(){return De.bindingsEnabled}function K0(){return De.skipHydrationRootTNode!==null}function J0(e){return De.skipHydrationRootTNode===e}function em(){De.skipHydrationRootTNode=null}function je(){return De.lFrame.lView}function Lt(){return De.lFrame.tView}function Si(e){return De.lFrame.contextLView=e,e[Pt]}function Ti(e){return De.lFrame.contextLView=null,e}function Ht(){let e=bf();for(;e!==null&&e.type===64;)e=e.parent;return e}function bf(){return De.lFrame.currentTNode}function tm(){let e=De.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Wr(e,t){let n=De.lFrame;n.currentTNode=e,n.isParent=t}function Kc(){return De.lFrame.isParent}function _f(){De.lFrame.isParent=!1}function Sf(e){S0("Must never be called in production mode"),zw=e}function Tf(){return Yd}function Mf(e){let t=Yd;return Yd=e,t}function Jc(){let e=De.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function nm(e){return De.lFrame.bindingIndex=e}function el(){return De.lFrame.bindingIndex++}function rm(e){let t=De.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function im(){return De.lFrame.inI18n}function om(e,t){let n=De.lFrame;n.bindingIndex=n.bindingRootIndex=e,tl(t)}function sm(){return De.lFrame.currentDirectiveIndex}function tl(e){De.lFrame.currentDirectiveIndex=e}function am(e){let t=De.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Nf(e){De.lFrame.currentQueryIndex=e}function Gw(e){let t=e[xe];return t.type===2?t.declTNode:t.type===1?e[vn]:null}function Rf(e,t,n){if(n&4){let a=t,l=e;for(;a=a.parent,a===null&&!(n&1);)if(a=Gw(l),a===null||(l=l[xi],a.type&10))break;if(a===null)return!1;t=a,e=l}let r=De.lFrame=cm();return r.currentTNode=t,r.lView=e,!0}function nl(e){let t=cm(),n=e[xe];De.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function cm(){let e=De.lFrame,t=e===null?null:e.child;return t===null?lm(e):t}function lm(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function um(){let e=De.lFrame;return De.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Of=um;function rl(){let e=um();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function dm(e){return(De.lFrame.contextLView=W0(e,De.lFrame.contextLView))[Pt]}function Mi(){return De.lFrame.selectedIndex}function $r(e){De.lFrame.selectedIndex=e}function Ff(){let e=De.lFrame;return qc(e.tView,e.selectedIndex)}function fm(){return De.lFrame.currentNamespace}var hm=!0;function Os(){return hm}function Fs(e){hm=e}function qd(e,t=null,n=null,r){let a=Pf(e,t,n,r);return a.resolveInjectorInitializers(),a}function Pf(e,t=null,n=null,r,a=new Set){let l=[n||cn,P0(e)];return r=r||(typeof e=="object"?void 0:Jt(e)),new vi(l,t||Is(),r||null,a)}var On=class e{static THROW_IF_NOT_FOUND=mi;static NULL=new vs;static create(t,n){if(Array.isArray(t))return qd({name:""},n,t,"");{let r=t.name??"";return qd({name:r},t.parent,t.providers,r)}}static \u0275prov=te({token:e,providedIn:"any",factory:()=>se(ff)});static __NG_ELEMENT_ID__=-1},at=new K(""),Yr=(()=>{class e{static __NG_ELEMENT_ID__=Ww;static __NG_ENV_ID__=n=>n}return e})(),Zd=class extends Yr{_lView;constructor(t){super(),this._lView=t}get destroyed(){return bi(this._lView)}onDestroy(t){let n=this._lView;return Af(n,t),()=>$0(n,t)}};function Ww(){return new Zd(je())}var Hn=class{_console=console;handleError(t){this._console.error("ERROR",t)}},nn=new K("",{providedIn:"root",factory:()=>{let e=B(gt),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(Hn),t.handleError(n))}}}),pm={provide:cr,useValue:()=>void B(Hn),multi:!0},$w=new K("",{providedIn:"root",factory:()=>{let e=B(at).defaultView;if(!e)return;let t=B(nn),n=l=>{t(l.reason),l.preventDefault()},r=l=>{l.error?t(l.error):t(new Error(l.message,{cause:l})),l.preventDefault()},a=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(a):a(),B(Yr).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function Lf(){return lr([F0(()=>void B($w))])}function kf(e){return typeof e=="function"&&e[Ft]!==void 0}function Ni(e,t){let[n,r,a]=Id(e,t?.equal),l=n,h=l[Ft];return l.set=r,l.update=a,l.asReadonly=gm.bind(l),l}function gm(){let e=this[Ft];if(e.readonlyFn===void 0){let t=()=>this();t[Ft]=e,e.readonlyFn=t}return e.readonlyFn}function Bf(e){return kf(e)&&typeof e.set=="function"}var jr=class{},Ps=new K("",{providedIn:"root",factory:()=>!1});var Vf=new K(""),jf=new K("");var dr=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new St(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ie(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=te({token:e,providedIn:"root",factory:()=>new e})}return e})(),Ls=(()=>{class e{internalPendingTasks=B(dr);scheduler=B(jr);errorHandler=B(nn);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=te({token:e,providedIn:"root",factory:()=>new e})}return e})();function ks(...e){}var Uf=(()=>{class e{static \u0275prov=te({token:e,providedIn:"root",factory:()=>new Xd})}return e})(),Xd=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function So(e){return{toString:e}.toString()}var il="__parameters__";function tx(e){return function(...n){if(e){let r=e(...n);for(let a in r)this[a]=r[a]}}}function Wm(e,t,n){return So(()=>{let r=tx(t);function a(...l){if(this instanceof a)return r.apply(this,l),this;let h=new a(...l);return g.annotation=h,g;function g(E,v,x){let b=E.hasOwnProperty(il)?E[il]:Object.defineProperty(E,il,{value:[]})[il];for(;b.length<=x;)b.push(null);return(b[x]=b[x]||[]).push(h),E}}return a.prototype.ngMetadataName=e,a.annotationCls=a,a})}var $m=uf(Wm("Optional"),8);var Ym=uf(Wm("SkipSelf"),4);function nx(e){return typeof e=="function"}var ll=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function qm(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var To=(()=>{let e=()=>Zm;return e.ngInherit=!0,e})();function Zm(e){return e.type.prototype.ngOnChanges&&(e.setInput=ix),rx}function rx(){let e=Qm(this),t=e?.current;if(t){let n=e.previous;if(n===Ur)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function ix(e,t,n,r,a){let l=this.declaredInputs[r],h=Qm(e)||ox(e,{previous:Ur,current:null}),g=h.current||(h.current={}),E=h.previous,v=E[l];g[l]=new ll(v&&v.currentValue,n,E===Ur),qm(e,t,a,n)}var Xm="__ngSimpleChanges__";function Qm(e){return e[Xm]||null}function ox(e,t){return e[Xm]=t}var mm=[];var We=function(e,t=null,n){for(let r=0;r<mm.length;r++){let a=mm[r];a(e,t,n)}};function sx(e,t,n){let{ngOnChanges:r,ngOnInit:a,ngDoCheck:l}=t.type.prototype;if(r){let h=Zm(t);(n.preOrderHooks??=[]).push(e,h),(n.preOrderCheckHooks??=[]).push(e,h)}a&&(n.preOrderHooks??=[]).push(0-e,a),l&&((n.preOrderHooks??=[]).push(e,l),(n.preOrderCheckHooks??=[]).push(e,l))}function Ch(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let l=e.data[n].type.prototype,{ngAfterContentInit:h,ngAfterContentChecked:g,ngAfterViewInit:E,ngAfterViewChecked:v,ngOnDestroy:x}=l;h&&(e.contentHooks??=[]).push(-n,h),g&&((e.contentHooks??=[]).push(n,g),(e.contentCheckHooks??=[]).push(n,g)),E&&(e.viewHooks??=[]).push(-n,E),v&&((e.viewHooks??=[]).push(n,v),(e.viewCheckHooks??=[]).push(n,v)),x!=null&&(e.destroyHooks??=[]).push(n,x)}}function sl(e,t,n){Km(e,t,3,n)}function al(e,t,n,r){(e[ue]&3)===n&&Km(e,t,n,r)}function Hf(e,t){let n=e[ue];(n&3)===t&&(n&=16383,n+=1,e[ue]=n)}function Km(e,t,n,r){let a=r!==void 0?e[Di]&65535:0,l=r??-1,h=t.length-1,g=0;for(let E=a;E<h;E++)if(typeof t[E+1]=="number"){if(g=t[E],r!=null&&g>=r)break}else t[E]<0&&(e[Di]+=65536),(g<l||l==-1)&&(ax(e,n,t,E),e[Di]=(e[Di]&4294901760)+E+2),E++}function ym(e,t){We(4,e,t);let n=he(null);try{t.call(e)}finally{he(n),We(5,e,t)}}function ax(e,t,n,r){let a=n[r]<0,l=n[r+1],h=a?-n[r]:n[r],g=e[h];a?e[ue]>>14<e[Di]>>16&&(e[ue]&3)===t&&(e[ue]+=16384,ym(g,l)):ym(g,l)}var Do=-1,Oi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r){this.factory=t,this.canSeeViewProviders=n,this.injectImpl=r}};function cx(e){return(e.flags&8)!==0}function lx(e){return(e.flags&16)!==0}function ux(e,t,n){let r=0;for(;r<n.length;){let a=n[r];if(typeof a=="number"){if(a!==0)break;r++;let l=n[r++],h=n[r++],g=n[r++];e.setAttribute(t,h,g,l)}else{let l=a,h=n[++r];fx(l)?e.setProperty(t,l,h):e.setAttribute(t,l,h),r++}}return r}function dx(e){return e===3||e===4||e===6}function fx(e){return e.charCodeAt(0)===64}function Ao(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let a=t[r];typeof a=="number"?n=a:n===0||(n===-1||n===2?Em(e,n,a,null,t[++r]):Em(e,n,a,null,null))}}return e}function Em(e,t,n,r,a){let l=0,h=e.length;if(t===-1)h=-1;else for(;l<e.length;){let g=e[l++];if(typeof g=="number"){if(g===t){h=-1;break}else if(g>t){h=l-1;break}}}for(;l<e.length;){let g=e[l];if(typeof g=="number")break;if(g===n){a!==null&&(e[l+1]=a);return}l++,a!==null&&l++}h!==-1&&(e.splice(h,0,t),l=h+1),e.splice(l++,0,n),a!==null&&e.splice(l++,0,a)}function Jm(e){return e!==Do}function ul(e){return e&32767}function hx(e){return e>>16}function dl(e,t){let n=hx(e),r=t;for(;n>0;)r=r[xi],n--;return r}var Kf=!0;function fl(e){let t=Kf;return Kf=e,t}var px=256,e1=px-1,t1=5,gx=0,$n={};function mx(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ci)&&(r=n[Ci]),r==null&&(r=n[Ci]=gx++);let a=r&e1,l=1<<a;t.data[e+(a>>t1)]|=l}function hl(e,t){let n=n1(e,t);if(n!==-1)return n;let r=t[xe];r.firstCreatePass&&(e.injectorIndex=t.length,zf(r.data,e),zf(t,null),zf(r.blueprint,null));let a=wh(e,t),l=e.injectorIndex;if(Jm(a)){let h=ul(a),g=dl(a,t),E=g[xe].data;for(let v=0;v<8;v++)t[l+v]=g[h+v]|E[h+v]}return t[l+8]=a,l}function zf(e,t){e.push(0,0,0,0,0,0,0,0,t)}function n1(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function wh(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,a=t;for(;a!==null;){if(r=a1(a),r===null)return Do;if(n++,a=a[xi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Do}function Jf(e,t,n){mx(e,t,n)}function r1(e,t,n){if(n&8||e!==void 0)return e;Hc(t,"NodeInjector")}function i1(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let a=e[wi],l=jt(void 0);try{return a?a.get(t,r,n&8):lf(t,r,n&8)}finally{jt(l)}}return r1(r,t,n)}function o1(e,t,n,r=0,a){if(e!==null){if(t[ue]&2048&&!(r&2)){let h=wx(e,t,n,r,$n);if(h!==$n)return h}let l=s1(e,t,n,r,$n);if(l!==$n)return l}return i1(t,n,r,a)}function s1(e,t,n,r,a){let l=vx(n);if(typeof l=="function"){if(!Rf(t,e,r))return r&1?r1(a,n,r):i1(t,n,r,a);try{let h;if(h=l(r),h==null&&!(r&8))Hc(n);else return h}finally{Of()}}else if(typeof l=="number"){let h=null,g=n1(e,t),E=Do,v=r&1?t[Cn][vn]:null;for((g===-1||r&4)&&(E=g===-1?wh(e,t):t[g+8],E===Do||!Cm(r,!1)?g=-1:(h=t[xe],g=ul(E),t=dl(E,t)));g!==-1;){let x=t[xe];if(vm(l,g,x.data)){let b=yx(g,t,n,h,r,v);if(b!==$n)return b}E=t[g+8],E!==Do&&Cm(r,t[xe].data[g+8]===v)&&vm(l,g,t)?(h=x,g=ul(E),t=dl(E,t)):g=-1}}return a}function yx(e,t,n,r,a,l){let h=t[xe],g=h.data[e+8],E=r==null?Gr(g)&&Kf:r!=h&&(g.type&3)!==0,v=a&1&&l===g,x=Ex(g,h,n,E,v);return x!==null?pl(t,h,x,g):$n}function Ex(e,t,n,r,a){let l=e.providerIndexes,h=t.data,g=l&1048575,E=e.directiveStart,v=e.directiveEnd,x=l>>20,b=r?g:g+x,O=a?g+x:v;for(let T=b;T<O;T++){let j=h[T];if(T<E&&n===j||T>=E&&j.type===n)return T}if(a){let T=h[E];if(T&&Gn(T)&&T.type===n)return E}return null}function pl(e,t,n,r){let a=e[n],l=t.data;if(a instanceof Oi){let h=a;h.resolving&&cf(T0(l[n]));let g=fl(h.canSeeViewProviders);h.resolving=!0;let E=l[n].type||l[n],v,x=h.injectImpl?jt(h.injectImpl):null,b=Rf(e,r,0);try{a=e[n]=h.factory(void 0,l,e,r),t.firstCreatePass&&n>=r.directiveStart&&sx(n,l[n],t)}finally{x!==null&&jt(x),fl(g),h.resolving=!1,Of()}}return a}function vx(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Ci)?e[Ci]:void 0;return typeof t=="number"?t>=0?t&e1:Cx:t}function vm(e,t,n){let r=1<<e;return!!(n[t+(e>>t1)]&r)}function Cm(e,t){return!(e&2)&&!(e&1&&t)}var Ri=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return o1(this._tNode,this._lView,t,yi(r),n)}};function Cx(){return new Ri(Ht(),je())}function Xr(e){return So(()=>{let t=e.prototype.constructor,n=t[Es]||eh(t),r=Object.prototype,a=Object.getPrototypeOf(e.prototype).constructor;for(;a&&a!==r;){let l=a[Es]||eh(a);if(l&&l!==n)return l;a=Object.getPrototypeOf(a)}return l=>new l})}function eh(e){return Jd(e)?()=>{let t=eh(Tt(e));return t&&t()}:Br(e)}function wx(e,t,n,r,a){let l=e,h=t;for(;l!==null&&h!==null&&h[ue]&2048&&!xo(h);){let g=s1(l,h,n,r|2,$n);if(g!==$n)return g;let E=l.parent;if(!E){let v=h[Cf];if(v){let x=v.get(n,$n,r);if(x!==$n)return x}E=a1(h),h=h[xi]}l=E}return a}function a1(e){let t=e[xe],n=t.type;return n===2?t.declTNode:n===1?e[vn]:null}function xx(){return Al(Ht(),je())}function Al(e,t){return new hr(Wn(e,t))}var hr=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=xx}return e})();function c1(e){return(e.flags&128)===128}var xh=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(xh||{}),l1=new Map,Ix=0;function Dx(){return Ix++}function Ax(e){l1.set(e[As],e)}function th(e){l1.delete(e[As])}var wm="__ngContext__";function Mo(e,t){zn(t)?(e[wm]=t[As],Ax(t)):e[wm]=t}function u1(e){return f1(e[wo])}function d1(e){return f1(e[En])}function f1(e){for(;e!==null&&!Ln(e);)e=e[En];return e}var nh;function Ih(e){nh=e}function h1(){if(nh!==void 0)return nh;if(typeof document<"u")return document;throw new Q(210,!1)}var bl=new K("",{providedIn:"root",factory:()=>bx}),bx="ng",_l=new K(""),No=new K("",{providedIn:"platform",factory:()=>"unknown"});var Sl=new K("",{providedIn:"root",factory:()=>h1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _x="h",Sx="b";var p1=!1,g1=new K("",{providedIn:"root",factory:()=>p1});var Tx=(e,t,n,r)=>{};function Mx(e,t,n,r){Tx(e,t,n,r)}var Nx=()=>null;function m1(e,t,n=!1){return Nx(e,t,n)}function y1(e,t){let n=e.contentQueries;if(n!==null){let r=he(null);try{for(let a=0;a<n.length;a+=2){let l=n[a],h=n[a+1];if(h!==-1){let g=e.data[h];Nf(l),g.contentQueries(2,t[h],h)}}}finally{he(r)}}}function rh(e,t,n){Nf(0);let r=he(null);try{t(e,n)}finally{he(r)}}function Dh(e,t,n){if(Yc(t)){let r=he(null);try{let a=t.directiveStart,l=t.directiveEnd;for(let h=a;h<l;h++){let g=e.data[h];if(g.contentQueries){let E=n[h];g.contentQueries(1,E,h)}}}finally{he(r)}}}var fr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(fr||{});var ih=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qd})`}};function E1(e){return e instanceof ih?e.changingThisBreaksApplicationSecurity:e}var Rx=/^>|^->|<!--|-->|--!>|<!-$/g,Ox=/(<|>)/g,Fx="\u200B$1\u200B";function Px(e){return e.replace(Rx,t=>t.replace(Ox,Fx))}function v1(e){return e instanceof Function?e():e}function Lx(e,t,n){let r=e.length;for(;;){let a=e.indexOf(t,n);if(a===-1)return a;if(a===0||e.charCodeAt(a-1)<=32){let l=t.length;if(a+l===r||e.charCodeAt(a+l)<=32)return a}n=a+1}}var C1="ng-template";function kx(e,t,n,r){let a=0;if(r){for(;a<t.length&&typeof t[a]=="string";a+=2)if(t[a]==="class"&&Lx(t[a+1].toLowerCase(),n,0)!==-1)return!0}else if(Ah(e))return!1;if(a=t.indexOf(1,a),a>-1){let l;for(;++a<t.length&&typeof(l=t[a])=="string";)if(l.toLowerCase()===n)return!0}return!1}function Ah(e){return e.type===4&&e.value!==C1}function Bx(e,t,n){let r=e.type===4&&!n?C1:e.value;return t===r}function Vx(e,t,n){let r=4,a=e.attrs,l=a!==null?Hx(a):0,h=!1;for(let g=0;g<t.length;g++){let E=t[g];if(typeof E=="number"){if(!h&&!kn(r)&&!kn(E))return!1;if(h&&kn(E))continue;h=!1,r=E|r&1;continue}if(!h)if(r&4){if(r=2|r&1,E!==""&&!Bx(e,E,n)||E===""&&t.length===1){if(kn(r))return!1;h=!0}}else if(r&8){if(a===null||!kx(e,a,E,n)){if(kn(r))return!1;h=!0}}else{let v=t[++g],x=jx(E,a,Ah(e),n);if(x===-1){if(kn(r))return!1;h=!0;continue}if(v!==""){let b;if(x>l?b="":b=a[x+1].toLowerCase(),r&2&&v!==b){if(kn(r))return!1;h=!0}}}}return kn(r)||h}function kn(e){return(e&1)===0}function jx(e,t,n,r){if(t===null)return-1;let a=0;if(r||!n){let l=!1;for(;a<t.length;){let h=t[a];if(h===e)return a;if(h===3||h===6)l=!0;else if(h===1||h===2){let g=t[++a];for(;typeof g=="string";)g=t[++a];continue}else{if(h===4)break;if(h===0){a+=4;continue}}a+=l?1:2}return-1}else return zx(t,e)}function Ux(e,t,n=!1){for(let r=0;r<t.length;r++)if(Vx(e,t[r],n))return!0;return!1}function Hx(e){for(let t=0;t<e.length;t++){let n=e[t];if(dx(n))return t}return e.length}function zx(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function xm(e,t){return e?":not("+t.trim()+")":t}function Gx(e){let t=e[0],n=1,r=2,a="",l=!1;for(;n<e.length;){let h=e[n];if(typeof h=="string")if(r&2){let g=e[++n];a+="["+h+(g.length>0?'="'+g+'"':"")+"]"}else r&8?a+="."+h:r&4&&(a+=" "+h);else a!==""&&!kn(h)&&(t+=xm(l,a),a=""),r=h,l=l||!kn(r);n++}return a!==""&&(t+=xm(l,a)),t}function Wx(e){return e.map(Gx).join(",")}function $x(e){let t=[],n=[],r=1,a=2;for(;r<e.length;){let l=e[r];if(typeof l=="string")a===2?l!==""&&t.push(l,e[++r]):a===8&&n.push(l);else{if(!kn(a))break;a=l}r++}return n.length&&t.push(1,...n),t}var pr={};function Yx(e,t){return e.createText(t)}function qx(e,t,n){e.setValue(t,n)}function Zx(e,t){return e.createComment(Px(t))}function w1(e,t,n){return e.createElement(t,n)}function gl(e,t,n,r,a){e.insertBefore(t,n,r,a)}function x1(e,t,n){e.appendChild(t,n)}function Im(e,t,n,r,a){r!==null?gl(e,t,n,r,a):x1(e,t,n)}function Xx(e,t,n){e.removeChild(null,t,n)}function Qx(e,t,n){e.setAttribute(t,"style",n)}function Kx(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function I1(e,t,n){let{mergedAttrs:r,classes:a,styles:l}=n;r!==null&&ux(e,t,r),a!==null&&Kx(e,t,a),l!==null&&Qx(e,t,l)}function bh(e,t,n,r,a,l,h,g,E,v,x){let b=en+r,O=b+a,T=Jx(b,O),j=typeof v=="function"?v():v;return T[xe]={type:e,blueprint:T,template:n,queries:null,viewQuery:g,declTNode:t,data:T.slice().fill(null,b),bindingStartIndex:b,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof l=="function"?l():l,pipeRegistry:typeof h=="function"?h():h,firstChild:null,schemas:E,consts:j,incompleteFirstPass:!1,ssrId:x}}function Jx(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:pr);return n}function eI(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=bh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function _h(e,t,n,r,a,l,h,g,E,v,x){let b=t.blueprint.slice();return b[Pn]=a,b[ue]=r|4|128|8|64|1024,(v!==null||e&&e[ue]&2048)&&(b[ue]|=2048),If(b),b[Mt]=b[xi]=e,b[Pt]=n,b[ur]=h||e&&e[ur],b[rt]=g||e&&e[rt],b[wi]=E||e&&e[wi]||null,b[vn]=l,b[As]=Dx(),b[Ds]=x,b[Cf]=v,b[Cn]=t.type==2?e[Cn]:b,b}function tI(e,t,n){let r=Wn(t,e),a=eI(n),l=e[ur].rendererFactory,h=Sh(e,_h(e,a,null,D1(n),r,t,null,l.createRenderer(r,n),null,null,null));return e[t.index]=h}function D1(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function A1(e,t,n,r){if(n===0)return-1;let a=t.length;for(let l=0;l<n;l++)t.push(r),e.blueprint.push(r),e.data.push(null);return a}function Sh(e,t){return e[wo]?e[vf][En]=t:e[wo]=t,e[vf]=t,t}function $e(e=1){b1(Lt(),je(),Mi()+e,!1)}function b1(e,t,n,r){if(!r)if((t[ue]&3)===3){let l=e.preOrderCheckHooks;l!==null&&sl(t,l,n)}else{let l=e.preOrderHooks;l!==null&&al(t,l,0,n)}$r(n)}var Tl=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Tl||{});function oh(e,t,n,r){let a=he(null);try{let[l,h,g]=e.inputs[n],E=null;(h&Tl.SignalBased)!==0&&(E=t[l][Ft]),E!==null&&E.transformFn!==void 0?r=E.transformFn(r):g!==null&&(r=g.call(t,r)),e.setInput!==null?e.setInput(t,E,r,n,l):qm(t,E,l,r)}finally{he(a)}}function _1(e,t,n,r,a){let l=Mi(),h=r&2;try{$r(-1),h&&t.length>en&&b1(e,t,en,!1),We(h?2:0,a,n),n(r,a)}finally{$r(l),We(h?3:1,a,n)}}function Ml(e,t,n){cI(e,t,n),(n.flags&64)===64&&lI(e,t,n)}function Th(e,t,n=Wn){let r=t.localNames;if(r!==null){let a=t.index+1;for(let l=0;l<r.length;l+=2){let h=r[l+1],g=h===-1?n(t,e):e[h];e[a++]=g}}}function nI(e,t,n,r){let l=r.get(g1,p1)||n===fr.ShadowDom,h=e.selectRootElement(t,l);return rI(h),h}function rI(e){iI(e)}var iI=()=>null;function oI(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function S1(e,t,n,r,a,l){let h=t[xe];if(Nh(e,h,t,n,r)){Gr(e)&&aI(t,e.index);return}sI(e,t,n,r,a,l)}function sI(e,t,n,r,a,l){if(e.type&3){let h=Wn(e,t);n=oI(n),r=l!=null?l(r,e.value||"",n):r,a.setProperty(h,n,r)}else e.type&12}function aI(e,t){let n=xn(t,e);n[ue]&16||(n[ue]|=64)}function cI(e,t,n){let r=n.directiveStart,a=n.directiveEnd;Gr(n)&&tI(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||hl(n,t);let l=n.initialInputs;for(let h=r;h<a;h++){let g=e.data[h],E=pl(t,e,h,n);if(Mo(E,t),l!==null&&dI(t,h-r,E,g,n,l),Gn(g)){let v=xn(n.index,t);v[Pt]=pl(t,e,h,n)}}}function lI(e,t,n){let r=n.directiveStart,a=n.directiveEnd,l=n.index,h=sm();try{$r(l);for(let g=r;g<a;g++){let E=e.data[g],v=t[g];tl(g),(E.hostBindings!==null||E.hostVars!==0||E.hostAttrs!==null)&&uI(E,v)}}finally{$r(-1),tl(h)}}function uI(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Mh(e,t){let n=e.directiveRegistry,r=null;if(n)for(let a=0;a<n.length;a++){let l=n[a];Ux(t,l.selectors,!1)&&(r??=[],Gn(l)?r.unshift(l):r.push(l))}return r}function dI(e,t,n,r,a,l){let h=l[t];if(h!==null)for(let g=0;g<h.length;g+=2){let E=h[g],v=h[g+1];oh(r,n,E,v)}}function fI(e,t){let n=e[wi];if(!n)return;n.get(nn,null)?.(t)}function Nh(e,t,n,r,a){let l=e.inputs?.[r],h=e.hostDirectiveInputs?.[r],g=!1;if(h)for(let E=0;E<h.length;E+=2){let v=h[E],x=h[E+1],b=t.data[v];oh(b,n[v],x,a),g=!0}if(l)for(let E of l){let v=n[E],x=t.data[E];oh(x,v,r,a),g=!0}return g}function hI(e,t){let n=xn(t,e),r=n[xe];pI(r,n);let a=n[Pn];a!==null&&n[Ds]===null&&(n[Ds]=m1(a,n[wi])),We(18),Rh(r,n,n[Pt]),We(19,n[Pt])}function pI(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Rh(e,t,n){nl(t);try{let r=e.viewQuery;r!==null&&rh(1,r,n);let a=e.template;a!==null&&_1(e,t,a,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Ai]?.finishViewCreation(e),e.staticContentQueries&&y1(e,t),e.staticViewQueries&&rh(2,e.viewQuery,n);let l=e.components;l!==null&&gI(t,l)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[ue]&=-5,rl()}}function gI(e,t){for(let n=0;n<t.length;n++)hI(e,t[n])}function mI(e,t,n,r){let a=he(null);try{let l=t.tView,g=e[ue]&4096?4096:16,E=_h(e,l,n,g,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),v=e[t.index];E[Ii]=v;let x=e[Ai];return x!==null&&(E[Ai]=x.createEmbeddedView(l)),Rh(l,E,n),E}finally{he(a)}}function Dm(e,t){return!t||t.firstChild===null||c1(e)}var Am=!1,yI=new K(""),EI;function Oh(e,t){return EI(e,t)}var Yn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Yn||{});function Fh(e){return(e.flags&32)===32}function Io(e,t,n,r,a){if(r!=null){let l,h=!1;Ln(r)?l=r:zn(r)&&(h=!0,r=r[Pn]);let g=wn(r);e===0&&n!==null?a==null?x1(t,n,g):gl(t,n,g,a||null,!0):e===1&&n!==null?gl(t,n,g,a||null,!0):e===2?Xx(t,g,h):e===3&&t.destroyNode(g),l!=null&&MI(t,e,l,n,a)}}function vI(e,t){T1(e,t),t[Pn]=null,t[vn]=null}function CI(e,t,n,r,a,l){r[Pn]=a,r[vn]=t,Rl(e,r,n,1,a,l)}function T1(e,t){t[ur].changeDetectionScheduler?.notify(9),Rl(e,t,t[rt],2,null,null)}function wI(e){let t=e[wo];if(!t)return Gf(e[xe],e);for(;t;){let n=null;if(zn(t))n=t[wo];else{let r=t[tn];r&&(n=r)}if(!n){for(;t&&!t[En]&&t!==e;)zn(t)&&Gf(t[xe],t),t=t[Mt];t===null&&(t=e),zn(t)&&Gf(t[xe],t),n=t&&t[En]}t=n}}function Ph(e,t){let n=e[Ss],r=n.indexOf(t);n.splice(r,1)}function M1(e,t){if(bi(t))return;let n=t[rt];n.destroyNode&&Rl(e,t,n,3,null,null),wI(t)}function Gf(e,t){if(bi(t))return;let n=he(null);try{t[ue]&=-129,t[ue]|=256,t[ln]&&sc(t[ln]),II(e,t),xI(e,t),t[xe].type===1&&t[rt].destroy();let r=t[Ii];if(r!==null&&Ln(t[Mt])){r!==t[Mt]&&Ph(r,t);let a=t[Ai];a!==null&&a.detachView(e)}th(t)}finally{he(n)}}function xI(e,t){let n=e.cleanup,r=t[Co];if(n!==null)for(let h=0;h<n.length-1;h+=2)if(typeof n[h]=="string"){let g=n[h+3];g>=0?r[g]():r[-g].unsubscribe(),h+=2}else{let g=r[n[h+1]];n[h].call(g)}r!==null&&(t[Co]=null);let a=t[sr];if(a!==null){t[sr]=null;for(let h=0;h<a.length;h++){let g=a[h];g()}}let l=t[bs];if(l!==null){t[bs]=null;for(let h of l)h.destroy()}}function II(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let a=t[n[r]];if(!(a instanceof Oi)){let l=n[r+1];if(Array.isArray(l))for(let h=0;h<l.length;h+=2){let g=a[l[h]],E=l[h+1];We(4,g,E);try{E.call(g)}finally{We(5,g,E)}}else{We(4,a,l);try{l.call(a)}finally{We(5,a,l)}}}}}function DI(e,t,n){return AI(e,t.parent,n)}function AI(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Pn];if(Gr(r)){let{encapsulation:a}=e.data[r.directiveStart+r.componentOffset];if(a===fr.None||a===fr.Emulated)return null}return Wn(r,n)}function bI(e,t,n){return SI(e,t,n)}function _I(e,t,n){return e.type&40?Wn(e,n):null}var SI=_I,bm;function Nl(e,t,n,r){let a=DI(e,r,t),l=t[rt],h=r.parent||t[vn],g=bI(h,r,t);if(a!=null)if(Array.isArray(n))for(let E=0;E<n.length;E++)Im(l,a,n[E],g,!1);else Im(l,a,n,g,!1);bm!==void 0&&bm(l,r,t,n,a)}function Bs(e,t){if(t!==null){let n=t.type;if(n&3)return Wn(t,e);if(n&4)return sh(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Bs(e,r);{let a=e[t.index];return Ln(a)?sh(-1,a):wn(a)}}else{if(n&128)return Bs(e,t.next);if(n&32)return Oh(t,e)()||wn(e[t.index]);{let r=N1(e,t);if(r!==null){if(Array.isArray(r))return r[0];let a=Vr(e[Cn]);return Bs(a,r)}else return Bs(e,t.next)}}}return null}function N1(e,t){if(t!==null){let r=e[Cn][vn],a=t.projection;return r.projection[a]}return null}function sh(e,t){let n=tn+e+1;if(n<t.length){let r=t[n],a=r[xe].firstChild;if(a!==null)return Bs(r,a)}return t[zr]}function Lh(e,t,n,r,a,l,h){for(;n!=null;){if(n.type===128){n=n.next;continue}let g=r[n.index],E=n.type;if(h&&t===0&&(g&&Mo(wn(g),r),n.flags|=2),!Fh(n))if(E&8)Lh(e,t,n.child,r,a,l,!1),Io(t,e,a,g,l);else if(E&32){let v=Oh(n,r),x;for(;x=v();)Io(t,e,a,x,l);Io(t,e,a,g,l)}else E&16?TI(e,t,r,n,a,l):Io(t,e,a,g,l);n=h?n.projectionNext:n.next}}function Rl(e,t,n,r,a,l){Lh(n,r,e.firstChild,t,a,l,!1)}function TI(e,t,n,r,a,l){let h=n[Cn],E=h[vn].projection[r.projection];if(Array.isArray(E))for(let v=0;v<E.length;v++){let x=E[v];Io(t,e,a,x,l)}else{let v=E,x=h[Mt];c1(r)&&(v.flags|=128),Lh(e,t,v,x,a,l,!0)}}function MI(e,t,n,r,a){let l=n[zr],h=wn(n);l!==h&&Io(t,e,r,l,a);for(let g=tn;g<n.length;g++){let E=n[g];Rl(E[xe],E,e,t,r,l)}}function NI(e,t,n,r,a){if(t)a?e.addClass(n,r):e.removeClass(n,r);else{let l=r.indexOf("-")===-1?void 0:Yn.DashCase;a==null?e.removeStyle(n,r,l):(typeof a=="string"&&a.endsWith("!important")&&(a=a.slice(0,-10),l|=Yn.Important),e.setStyle(n,r,a,l))}}function js(e,t,n,r,a=!1){for(;n!==null;){if(n.type===128){n=a?n.projectionNext:n.next;continue}let l=t[n.index];l!==null&&r.push(wn(l)),Ln(l)&&R1(l,r);let h=n.type;if(h&8)js(e,t,n.child,r);else if(h&32){let g=Oh(n,t),E;for(;E=g();)r.push(E)}else if(h&16){let g=N1(t,n);if(Array.isArray(g))r.push(...g);else{let E=Vr(t[Cn]);js(E[xe],E,g,r,!0)}}n=a?n.projectionNext:n.next}return r}function R1(e,t){for(let n=tn;n<e.length;n++){let r=e[n],a=r[xe].firstChild;a!==null&&js(r[xe],r,a,t)}e[zr]!==e[Pn]&&t.push(e[zr])}function O1(e){if(e[$c]!==null){for(let t of e[$c])t.impl.addSequence(t);e[$c].length=0}}var F1=[];function RI(e){return e[ln]??OI(e)}function OI(e){let t=F1.pop()??Object.create(PI);return t.lView=e,t}function FI(e){e.lView[ln]!==e&&(e.lView=null,F1.push(e))}var PI=ve($({},di),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Ns(e.lView)},consumerOnSignalRead(){this.lView[ln]=this}});function LI(e){let t=e[ln]??Object.create(kI);return t.lView=e,t}var kI=ve($({},di),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=Vr(e.lView);for(;t&&!P1(t[xe]);)t=Vr(t);t&&Df(t)},consumerOnSignalRead(){this.lView[ln]=this}});function P1(e){return e.type!==2}function L1(e){if(e[bs]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[bs])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[ue]&8192)}}var BI=100;function kh(e,t=0){let r=e[ur].rendererFactory,a=!1;a||r.begin?.();try{VI(e,t)}finally{a||r.end?.()}}function VI(e,t){let n=Tf();try{Mf(!0),ah(e,t);let r=0;for(;Ms(e);){if(r===BI)throw new Q(103,!1);r++,ah(e,1)}}finally{Mf(n)}}function k1(e,t){Sf(t?Rs.Exhaustive:Rs.OnlyDirtyViews);try{kh(e)}finally{Sf(Rs.Off)}}function jI(e,t,n,r){if(bi(t))return;let a=t[ue],l=!1,h=!1;nl(t);let g=!0,E=null,v=null;l||(P1(e)?(v=RI(t),E=fi(v)):ic()===null?(g=!1,v=LI(t),E=fi(v)):t[ln]&&(sc(t[ln]),t[ln]=null));try{If(t),nm(e.bindingStartIndex),n!==null&&_1(e,t,n,2,r);let x=(a&3)===3;if(!l)if(x){let T=e.preOrderCheckHooks;T!==null&&sl(t,T,null)}else{let T=e.preOrderHooks;T!==null&&al(t,T,0,null),Hf(t,0)}if(h||UI(t),L1(t),B1(t,0),e.contentQueries!==null&&y1(e,t),!l)if(x){let T=e.contentCheckHooks;T!==null&&sl(t,T)}else{let T=e.contentHooks;T!==null&&al(t,T,1),Hf(t,1)}zI(e,t);let b=e.components;b!==null&&j1(t,b,0);let O=e.viewQuery;if(O!==null&&rh(2,O,r),!l)if(x){let T=e.viewCheckHooks;T!==null&&sl(t,T)}else{let T=e.viewHooks;T!==null&&al(t,T,2),Hf(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Wc]){for(let T of t[Wc])T();t[Wc]=null}l||(O1(t),t[ue]&=-73)}catch(x){throw l||Ns(t),x}finally{v!==null&&(oo(v,E),g&&FI(v)),rl()}}function B1(e,t){for(let n=u1(e);n!==null;n=d1(n))for(let r=tn;r<n.length;r++){let a=n[r];V1(a,t)}}function UI(e){for(let t=u1(e);t!==null;t=d1(t)){if(!(t[ue]&2))continue;let n=t[Ss];for(let r=0;r<n.length;r++){let a=n[r];Df(a)}}}function HI(e,t,n){We(18);let r=xn(t,e);V1(r,n),We(19,r[Pt])}function V1(e,t){Zc(e)&&ah(e,t)}function ah(e,t){let r=e[xe],a=e[ue],l=e[ln],h=!!(t===0&&a&16);if(h||=!!(a&64&&t===0),h||=!!(a&1024),h||=!!(l?.dirty&&hs(l)),h||=!1,l&&(l.dirty=!1),e[ue]&=-9217,h)jI(r,e,r.template,e[Pt]);else if(a&8192){let g=he(null);try{L1(e),B1(e,1);let E=r.components;E!==null&&j1(e,E,1),O1(e)}finally{he(g)}}}function j1(e,t,n){for(let r=0;r<t.length;r++)HI(e,t[r],n)}function zI(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let a=n[r];if(a<0)$r(~a);else{let l=a,h=n[++r],g=n[++r];om(h,l);let E=t[l];We(24,E),g(2,E),We(25,E)}}}finally{$r(-1)}}function Bh(e,t){let n=Tf()?64:1088;for(e[ur].changeDetectionScheduler?.notify(t);e;){e[ue]|=n;let r=Vr(e);if(xo(e)&&!r)return e;e=r}return null}function U1(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function GI(e,t,n,r=!0){let a=t[xe];if(WI(a,t,e,n),r){let h=sh(n,e),g=t[rt],E=g.parentNode(e[zr]);E!==null&&CI(a,e[vn],g,t,E,h)}let l=t[Ds];l!==null&&l.firstChild!==null&&(l.firstChild=null)}function ch(e,t){if(e.length<=tn)return;let n=tn+t,r=e[n];if(r){let a=r[Ii];a!==null&&a!==e&&Ph(a,r),t>0&&(e[n-1][En]=r[En]);let l=ws(e,tn+t);vI(r[xe],r);let h=l[Ai];h!==null&&h.detachView(l[xe]),r[Mt]=null,r[En]=null,r[ue]&=-129}return r}function WI(e,t,n,r){let a=tn+r,l=n.length;r>0&&(n[a-1][En]=t),r<l-tn?(t[En]=n[a],df(n,tn+r,t)):(n.push(t),t[En]=null),t[Mt]=n;let h=t[Ii];h!==null&&n!==h&&H1(h,t);let g=t[Ai];g!==null&&g.insertView(e),Xc(t),t[ue]|=128}function H1(e,t){let n=e[Ss],r=t[Mt];if(zn(r))e[ue]|=2;else{let a=r[Mt][Cn];t[Cn]!==a&&(e[ue]|=2)}n===null?e[Ss]=[t]:n.push(t)}var qr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[xe];return js(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[Pt]}set context(t){this._lView[Pt]=t}get destroyed(){return bi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Mt];if(Ln(t)){let n=t[_s],r=n?n.indexOf(this):-1;r>-1&&(ch(t,r),ws(n,r))}this._attachedToViewContainer=!1}M1(this._lView[xe],this._lView)}onDestroy(t){Af(this._lView,t)}markForCheck(){Bh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ue]&=-129}reattach(){Xc(this._lView),this._lView[ue]|=128}detectChanges(){this._lView[ue]|=1024,kh(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[wi].get(yI,Am)}catch{this.exhaustive=Am}}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=xo(this._lView),n=this._lView[Ii];n!==null&&!t&&Ph(n,this._lView),T1(this._lView[xe],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=t;let n=xo(this._lView),r=this._lView[Ii];r!==null&&!n&&H1(r,this._lView),Xc(this._lView)}};var zs=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=$I;constructor(n,r,a){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,a){let l=mI(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:a});return new qr(l)}}return e})();function $I(){return YI(Ht(),je())}function YI(e,t){return e.type&4?new zs(t,e,Al(e,t)):null}function Ol(e,t,n,r,a){let l=e.data[t];if(l===null)l=qI(e,t,n,r,a),im()&&(l.flags|=32);else if(l.type&64){l.type=n,l.value=r,l.attrs=a;let h=tm();l.injectorIndex=h===null?-1:h.injectorIndex}return Wr(l,!0),l}function qI(e,t,n,r,a){let l=bf(),h=Kc(),g=h?l:l&&l.parent,E=e.data[t]=XI(e,g,n,t,r,a);return ZI(e,E,l,h),E}function ZI(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function XI(e,t,n,r,a,l){let h=t?t.injectorIndex:-1,g=0;return K0()&&(g|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:h,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:g,providerIndexes:0,value:a,attrs:l,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var uF=new RegExp(`^(\\d+)*(${Sx}|${_x})*(.*)`);var QI=()=>null;function _m(e,t){return QI(e,t)}var z1=class{},Fl=class{},lh=class{resolveComponentFactory(t){throw new Q(917,!1)}},Gs=class{static NULL=new lh},Fi=class{},Qr=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>KI()}return e})();function KI(){let e=je(),t=Ht(),n=xn(t.index,e);return(zn(n)?n:e)[rt]}var G1=(()=>{class e{static \u0275prov=te({token:e,providedIn:"root",factory:()=>null})}return e})();var cl={},uh=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let a=this.injector.get(t,cl,r);return a!==cl||n===cl?a:this.parentInjector.get(t,n,r)}};function dh(e,t,n){let r=n?e.styles:null,a=n?e.classes:null,l=0;if(t!==null)for(let h=0;h<t.length;h++){let g=t[h];if(typeof g=="number")l=g;else if(l==1)a=Kd(a,g);else if(l==2){let E=g,v=t[++h];r=Kd(r,E+": "+v+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=a:e.classesWithoutHost=a}function Te(e,t=0){let n=je();if(n===null)return se(e,t);let r=Ht();return o1(r,n,Tt(e),t)}function Vh(e,t,n,r,a){let l=r===null?null:{"":-1},h=a(e,n);if(h!==null){let g=h,E=null,v=null;for(let x of h)if(x.resolveHostDirectives!==null){[g,E,v]=x.resolveHostDirectives(h);break}tD(e,t,n,g,l,E,v)}l!==null&&r!==null&&JI(n,r,l)}function JI(e,t,n){let r=e.localNames=[];for(let a=0;a<t.length;a+=2){let l=n[t[a+1]];if(l==null)throw new Q(-301,!1);r.push(t[a],l)}}function eD(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function tD(e,t,n,r,a,l,h){let g=r.length,E=!1;for(let O=0;O<g;O++){let T=r[O];!E&&Gn(T)&&(E=!0,eD(e,n,O)),Jf(hl(n,t),e,T.type)}aD(n,e.data.length,g);for(let O=0;O<g;O++){let T=r[O];T.providersResolver&&T.providersResolver(T)}let v=!1,x=!1,b=A1(e,t,g,null);g>0&&(n.directiveToIndex=new Map);for(let O=0;O<g;O++){let T=r[O];if(n.mergedAttrs=Ao(n.mergedAttrs,T.hostAttrs),rD(e,n,t,b,T),sD(b,T,a),h!==null&&h.has(T)){let[W,H]=h.get(T);n.directiveToIndex.set(T.type,[b,W+n.directiveStart,H+n.directiveStart])}else(l===null||!l.has(T))&&n.directiveToIndex.set(T.type,b);T.contentQueries!==null&&(n.flags|=4),(T.hostBindings!==null||T.hostAttrs!==null||T.hostVars!==0)&&(n.flags|=64);let j=T.type.prototype;!v&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),v=!0),!x&&(j.ngOnChanges||j.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),x=!0),b++}nD(e,n,l)}function nD(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let a=e.data[r];if(n===null||!n.has(a))Sm(0,t,a,r),Sm(1,t,a,r),Mm(t,r,!1);else{let l=n.get(a);Tm(0,t,l,r),Tm(1,t,l,r),Mm(t,r,!0)}}}function Sm(e,t,n,r){let a=e===0?n.inputs:n.outputs;for(let l in a)if(a.hasOwnProperty(l)){let h;e===0?h=t.inputs??={}:h=t.outputs??={},h[l]??=[],h[l].push(r),W1(t,l)}}function Tm(e,t,n,r){let a=e===0?n.inputs:n.outputs;for(let l in a)if(a.hasOwnProperty(l)){let h=a[l],g;e===0?g=t.hostDirectiveInputs??={}:g=t.hostDirectiveOutputs??={},g[h]??=[],g[h].push(r,l),W1(t,h)}}function W1(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function Mm(e,t,n){let{attrs:r,inputs:a,hostDirectiveInputs:l}=e;if(r===null||!n&&a===null||n&&l===null||Ah(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let h=null,g=0;for(;g<r.length;){let E=r[g];if(E===0){g+=4;continue}else if(E===5){g+=2;continue}else if(typeof E=="number")break;if(!n&&a.hasOwnProperty(E)){let v=a[E];for(let x of v)if(x===t){h??=[],h.push(E,r[g+1]);break}}else if(n&&l.hasOwnProperty(E)){let v=l[E];for(let x=0;x<v.length;x+=2)if(v[x]===t){h??=[],h.push(v[x+1],r[g+1]);break}}g+=2}e.initialInputs??=[],e.initialInputs.push(h)}function rD(e,t,n,r,a){e.data[r]=a;let l=a.factory||(a.factory=Br(a.type,!0)),h=new Oi(l,Gn(a),Te);e.blueprint[r]=h,n[r]=h,iD(e,t,r,A1(e,n,a.hostVars,pr),a)}function iD(e,t,n,r,a){let l=a.hostBindings;if(l){let h=e.hostBindingOpCodes;h===null&&(h=e.hostBindingOpCodes=[]);let g=~t.index;oD(h)!=g&&h.push(g),h.push(n,r,l)}}function oD(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function sD(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Gn(t)&&(n[""]=e)}}function aD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function $1(e,t,n,r,a,l,h,g){let E=t.consts,v=_i(E,h),x=Ol(t,e,2,r,v);return l&&Vh(t,n,x,_i(E,g),a),x.mergedAttrs=Ao(x.mergedAttrs,x.attrs),x.attrs!==null&&dh(x,x.attrs,!1),x.mergedAttrs!==null&&dh(x,x.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,x),x}function Y1(e,t){Ch(e,t),Yc(t)&&e.queries.elementEnd(t)}function jh(e){return Z1(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function q1(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function Z1(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Uh(e,t,n){return e[t]=n}function Zr(e,t,n){if(n===pr)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function fh(e,t,n,r){let a=Zr(e,t,n);return Zr(e,t+1,r)||a}function cD(e,t,n,r,a){let l=fh(e,t,n,r);return Zr(e,t+2,a)||l}function lD(e,t,n,r,a,l){let h=fh(e,t,n,r);return fh(e,t+2,a,l)||h}function Wf(e,t,n){return function r(a){let l=Gr(e)?xn(e.index,t):t;Bh(l,5);let h=t[Pt],g=Nm(t,h,n,a),E=r.__ngNextListenerFn__;for(;E;)g=Nm(t,h,E,a)&&g,E=E.__ngNextListenerFn__;return g}}function Nm(e,t,n,r){let a=he(null);try{return We(6,t,n),n(r)!==!1}catch(l){return fI(e,l),!1}finally{We(7,t,n),he(a)}}function uD(e,t,n,r,a,l,h,g){let E=Ts(e),v=!1,x=null;if(!r&&E&&(x=dD(t,n,l,e.index)),x!==null){let b=x.__ngLastListenerFn__||x;b.__ngNextListenerFn__=h,x.__ngLastListenerFn__=h,v=!0}else{let b=Wn(e,n),O=r?r(b):b;Mx(n,O,l,g);let T=a.listen(O,l,g),j=r?W=>r(wn(W[e.index])):e.index;X1(j,t,n,l,g,T,!1)}return v}function dD(e,t,n,r){let a=e.cleanup;if(a!=null)for(let l=0;l<a.length-1;l+=2){let h=a[l];if(h===n&&a[l+1]===r){let g=t[Co],E=a[l+2];return g&&g.length>E?g[E]:null}typeof h=="string"&&(l+=2)}return null}function X1(e,t,n,r,a,l,h){let g=t.firstCreatePass?q0(t):null,E=Y0(n),v=E.length;E.push(a,l),g&&g.push(r,e,v,(v+1)*(h?-1:1))}function Rm(e,t,n,r,a,l){let h=t[n],g=t[xe],v=g.data[n].outputs[r],b=h[v].subscribe(l);X1(e.index,g,t,a,l,b,!0)}var hh=Symbol("BINDING");var ml=class extends Gs{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Hr(t);return new bo(n,this.ngModule)}};function fD(e){return Object.keys(e).map(t=>{let[n,r,a]=e[t],l={propName:n,templateName:t,isSignal:(r&Tl.SignalBased)!==0};return a&&(l.transform=a),l})}function hD(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function pD(e,t,n){let r=t instanceof gt?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new uh(n,r):n}function gD(e){let t=e.get(Fi,null);if(t===null)throw new Q(407,!1);let n=e.get(G1,null),r=e.get(jr,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function mD(e,t){let n=(e.selectors[0][0]||"div").toLowerCase();return w1(t,n,n==="svg"?U0:n==="math"?H0:null)}var bo=class extends Fl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=fD(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=hD(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Wx(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,a,l,h){We(22);let g=he(null);try{let E=this.componentDef,v=yD(r,E,h,l),x=pD(E,a||this.ngModule,t),b=gD(x),O=b.rendererFactory.createRenderer(null,E),T=r?nI(O,r,E.encapsulation,x):mD(E,O),j=h?.some(Om)||l?.some(U=>typeof U!="function"&&U.bindings.some(Om)),W=_h(null,v,null,512|D1(E),null,null,b,O,x,null,m1(T,x,!0));W[en]=T,nl(W);let H=null;try{let U=$1(en,v,W,"#host",()=>v.directiveRegistry,!0,0);T&&(I1(O,T,U),Mo(T,W)),Ml(v,W,U),Dh(v,U,W),Y1(v,U),n!==void 0&&vD(U,this.ngContentSelectors,n),H=xn(U.index,W),W[Pt]=H[Pt],Rh(v,W,null)}catch(U){throw H!==null&&th(H),th(W),U}finally{We(23),rl()}return new yl(this.componentType,W,!!j)}finally{he(g)}}};function yD(e,t,n,r){let a=e?["ng-version","20.0.6"]:$x(t.selectors[0]),l=null,h=null,g=0;if(n)for(let x of n)g+=x[hh].requiredVars,x.create&&(x.targetIdx=0,(l??=[]).push(x)),x.update&&(x.targetIdx=0,(h??=[]).push(x));if(r)for(let x=0;x<r.length;x++){let b=r[x];if(typeof b!="function")for(let O of b.bindings){g+=O[hh].requiredVars;let T=x+1;O.create&&(O.targetIdx=T,(l??=[]).push(O)),O.update&&(O.targetIdx=T,(h??=[]).push(O))}}let E=[t];if(r)for(let x of r){let b=typeof x=="function"?x:x.type,O=gf(b);E.push(O)}return bh(0,null,ED(l,h),1,g,E,null,null,null,[a],null)}function ED(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function Om(e){let t=e[hh].kind;return t==="input"||t==="twoWay"}var yl=class extends z1{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=qc(n[xe],en),this.location=Al(this._tNode,n),this.instance=xn(this._tNode.index,n)[Pt],this.hostView=this.changeDetectorRef=new qr(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let a=this._rootLView,l=Nh(r,a[xe],a,t,n);this.previousInputValues.set(t,n);let h=xn(r.index,a);Bh(h,1)}get injector(){return new Ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function vD(e,t,n){let r=e.projection=[];for(let a=0;a<t.length;a++){let l=n[a];r.push(l!=null&&l.length?Array.from(l):null)}}var ki=(()=>{class e{static __NG_ELEMENT_ID__=CD}return e})();function CD(){let e=Ht();return xD(e,je())}var wD=ki,Q1=class extends wD{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Al(this._hostTNode,this._hostLView)}get injector(){return new Ri(this._hostTNode,this._hostLView)}get parentInjector(){let t=wh(this._hostTNode,this._hostLView);if(Jm(t)){let n=dl(t,this._hostLView),r=ul(t),a=n[xe].data[r+8];return new Ri(a,n)}else return new Ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Fm(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-tn}createEmbeddedView(t,n,r){let a,l;typeof r=="number"?a=r:r!=null&&(a=r.index,l=r.injector);let h=_m(this._lContainer,t.ssrId),g=t.createEmbeddedViewImpl(n||{},l,h);return this.insertImpl(g,a,Dm(this._hostTNode,h)),g}createComponent(t,n,r,a,l,h,g){let E=t&&!nx(t),v;if(E)v=n;else{let H=n||{};v=H.index,r=H.injector,a=H.projectableNodes,l=H.environmentInjector||H.ngModuleRef,h=H.directives,g=H.bindings}let x=E?t:new bo(Hr(t)),b=r||this.parentInjector;if(!l&&x.ngModule==null){let U=(E?b:this.parentInjector).get(gt,null);U&&(l=U)}let O=Hr(x.componentType??{}),T=_m(this._lContainer,O?.id??null),j=T?.firstChild??null,W=x.create(b,a,j,l,h,g);return this.insertImpl(W.hostView,v,Dm(this._hostTNode,T)),W}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let a=t._lView;if(G0(a)){let g=this.indexOf(t);if(g!==-1)this.detach(g);else{let E=a[Mt],v=new Q1(E,E[vn],E[Mt]);v.detach(v.indexOf(t))}}let l=this._adjustIndex(n),h=this._lContainer;return GI(h,a,l,r),t.attachToViewContainerRef(),df($f(h),l,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Fm(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=ch(this._lContainer,n);r&&(ws($f(this._lContainer),n),M1(r[xe],r))}detach(t){let n=this._adjustIndex(t,-1),r=ch(this._lContainer,n);return r&&ws($f(this._lContainer),n)!=null?new qr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Fm(e){return e[_s]}function $f(e){return e[_s]||(e[_s]=[])}function xD(e,t){let n,r=t[e.index];return Ln(r)?n=r:(n=U1(r,t,null,e),t[e.index]=n,Sh(t,n)),DD(n,t,e,r),new Q1(n,e,t)}function ID(e,t){let n=e[rt],r=n.createComment(""),a=Wn(t,e),l=n.parentNode(a);return gl(n,l,r,n.nextSibling(a),!1),r}var DD=_D,AD=()=>!1;function bD(e,t,n){return AD(e,t,n)}function _D(e,t,n,r){if(e[zr])return;let a;n.type&8?a=wn(r):a=ID(t,n),e[zr]=a}var Pm=new Set;function Pl(e){Pm.has(e)||(Pm.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var Pi=class{},Ll=class{};var El=class extends Pi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ml(this);constructor(t,n,r,a=!0){super(),this.ngModuleType=t,this._parent=n;let l=pf(t);this._bootstrapComponents=v1(l.bootstrap),this._r3Injector=Pf(t,n,[{provide:Pi,useValue:this},{provide:Gs,useValue:this.componentFactoryResolver},...r],Jt(t),new Set(["environment"])),a&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},vl=class extends Ll{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new El(this.moduleType,t,[])}};var Us=class extends Pi{injector;componentFactoryResolver=new ml(this);instance=null;constructor(t){super();let n=new vi([...t.providers,{provide:Pi,useValue:this},{provide:Gs,useValue:this.componentFactoryResolver}],t.parent||Is(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Ws(e,t,n=null){return new Us({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var SD=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=mf(!1,n.type),a=r.length>0?Ws([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,a)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=te({token:e,providedIn:"environment",factory:()=>new e(se(gt))})}return e})();function $s(e){return So(()=>{let t=K1(e),n=ve($({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===xh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?a=>a.get(SD).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||fr.Emulated,styles:e.styles||cn,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Pl("NgStandalone"),J1(n);let r=e.dependencies;return n.directiveDefs=Lm(r,!1),n.pipeDefs=Lm(r,!0),n.id=OD(n),n})}function TD(e){return Hr(e)||gf(e)}function MD(e){return e!==null}function qn(e){return So(()=>({type:e.type,bootstrap:e.bootstrap||cn,declarations:e.declarations||cn,imports:e.imports||cn,exports:e.exports||cn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function ND(e,t){if(e==null)return Ur;let n={};for(let r in e)if(e.hasOwnProperty(r)){let a=e[r],l,h,g,E;Array.isArray(a)?(g=a[0],l=a[1],h=a[2]??l,E=a[3]||null):(l=a,h=a,g=Tl.None,E=null),n[l]=[r,g,E],t[l]=h}return n}function RD(e){if(e==null)return Ur;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Nt(e){return So(()=>{let t=K1(e);return J1(t),t})}function Ys(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function K1(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Ur,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||cn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:ND(e.inputs,t),outputs:RD(e.outputs),debugInfo:null}}function J1(e){e.features?.forEach(t=>t(e))}function Lm(e,t){if(!e)return null;let n=t?O0:TD;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(MD)}function OD(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let l of r.join("|"))t=Math.imul(31,t)+l.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function FD(e){return Object.getPrototypeOf(e.prototype).constructor}function gr(e){let t=FD(e.type),n=!0,r=[e];for(;t;){let a;if(Gn(e))a=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Q(903,!1);a=t.\u0275dir}if(a){if(n){r.push(a);let h=e;h.inputs=Yf(e.inputs),h.declaredInputs=Yf(e.declaredInputs),h.outputs=Yf(e.outputs);let g=a.hostBindings;g&&VD(e,g);let E=a.viewQuery,v=a.contentQueries;if(E&&kD(e,E),v&&BD(e,v),PD(e,a),_0(e.outputs,a.outputs),Gn(a)&&a.data.animation){let x=e.data;x.animation=(x.animation||[]).concat(a.data.animation)}}let l=a.features;if(l)for(let h=0;h<l.length;h++){let g=l[h];g&&g.ngInherit&&g(e),g===gr&&(n=!1)}}t=Object.getPrototypeOf(t)}LD(r)}function PD(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function LD(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let a=e[r];a.hostVars=t+=a.hostVars,a.hostAttrs=Ao(a.hostAttrs,n=Ao(n,a.hostAttrs))}}function Yf(e){return e===Ur?{}:e===cn?[]:e}function kD(e,t){let n=e.viewQuery;n?e.viewQuery=(r,a)=>{t(r,a),n(r,a)}:e.viewQuery=t}function BD(e,t){let n=e.contentQueries;n?e.contentQueries=(r,a,l)=>{t(r,a,l),n(r,a,l)}:e.contentQueries=t}function VD(e,t){let n=e.hostBindings;n?e.hostBindings=(r,a)=>{t(r,a),n(r,a)}:e.hostBindings=t}function jD(e,t,n,r,a,l,h,g,E){let v=t.consts,x=Ol(t,e,4,h||null,g||null);Qc()&&Vh(t,n,x,_i(v,E),Mh),x.mergedAttrs=Ao(x.mergedAttrs,x.attrs),Ch(t,x);let b=x.tView=bh(2,x,r,a,l,t.directiveRegistry,t.pipeRegistry,null,t.schemas,v,null);return t.queries!==null&&(t.queries.template(t,x),b.queries=t.queries.embeddedTView(x)),x}function UD(e,t,n,r,a,l,h,g,E,v,x){let b=n+en,O=t.firstCreatePass?jD(b,t,e,r,a,l,h,g,v):t.data[b];E&&(O.flags|=E),Wr(O,!1);let T=HD(t,e,O,n);Os()&&Nl(t,e,T,O),Mo(T,e);let j=U1(T,e,T,O);return e[b]=j,Sh(e,j),bD(j,O,e),Ts(O)&&Ml(t,e,O),v!=null&&Th(e,O,x),O}function un(e,t,n,r,a,l,h,g){let E=je(),v=Lt(),x=_i(v.consts,l);return UD(E,v,e,t,n,r,a,x,void 0,h,g),un}var HD=zD;function zD(e,t,n,r){return Fs(!0),t[rt].createComment("")}var Hh=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(Hh||{}),qs=new K(""),ey=!1,ph=class extends ht{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,V0()&&(this.destroyRef=B(Yr,{optional:!0})??void 0,this.pendingTasks=B(dr,{optional:!0})??void 0)}emit(t){let n=he(null);try{super.next(t)}finally{he(n)}}subscribe(t,n,r){let a=t,l=n||(()=>null),h=r;if(t&&typeof t=="object"){let E=t;a=E.next?.bind(E),l=E.error?.bind(E),h=E.complete?.bind(E)}this.__isAsync&&(l=this.wrapInTimeout(l),a&&(a=this.wrapInTimeout(a)),h&&(h=this.wrapInTimeout(h)));let g=super.subscribe({next:a,error:l,complete:h});return t instanceof ot&&t.add(g),g}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},mt=ph;function ty(e){let t,n;function r(){e=ks;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function km(e){return queueMicrotask(()=>e()),()=>{e=ks}}var zh="isAngularZone",Cl=zh+"_ID",GD=0,ct=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new mt(!1);onMicrotaskEmpty=new mt(!1);onStable=new mt(!1);onError=new mt(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:a=!1,scheduleInRootZone:l=ey}=t;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!a&&r,h.shouldCoalesceRunChangeDetection=a,h.callbackScheduled=!1,h.scheduleInRootZone=l,YD(h)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zh)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Q(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,a){let l=this._inner,h=l.scheduleEventTask("NgZoneEvent: "+a,t,WD,ks,ks);try{return l.runTask(h,n,r)}finally{l.cancelTask(h)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},WD={};function Gh(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function $D(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){ty(()=>{e.callbackScheduled=!1,gh(e),e.isCheckStableRunning=!0,Gh(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),gh(e)}function YD(e){let t=()=>{$D(e)},n=GD++;e._inner=e._inner.fork({name:"angular",properties:{[zh]:!0,[Cl]:n,[Cl+n]:!0},onInvokeTask:(r,a,l,h,g,E)=>{if(qD(E))return r.invokeTask(l,h,g,E);try{return Bm(e),r.invokeTask(l,h,g,E)}finally{(e.shouldCoalesceEventChangeDetection&&h.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Vm(e)}},onInvoke:(r,a,l,h,g,E,v)=>{try{return Bm(e),r.invoke(l,h,g,E,v)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!ZD(E)&&t(),Vm(e)}},onHasTask:(r,a,l,h)=>{r.hasTask(l,h),a===l&&(h.change=="microTask"?(e._hasPendingMicrotasks=h.microTask,gh(e),Gh(e)):h.change=="macroTask"&&(e.hasPendingMacrotasks=h.macroTask))},onHandleError:(r,a,l,h)=>(r.handleError(l,h),e.runOutsideAngular(()=>e.onError.emit(h)),!1)})}function gh(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Bm(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Vm(e){e._nesting--,Gh(e)}var wl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new mt;onMicrotaskEmpty=new mt;onStable=new mt;onError=new mt;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,a){return t.apply(n,r)}};function qD(e){return ny(e,"__ignore_ng_zone__")}function ZD(e){return ny(e,"__scheduler_tick__")}function ny(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var ry=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=te({token:e,providedIn:"root",factory:()=>new e})}return e})();var Wh=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var $h=new K("");function Kr(e){return!!e&&typeof e.then=="function"}function Yh(e){return!!e&&typeof e.subscribe=="function"}var iy=new K("");var qh=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=B(iy,{optional:!0})??[];injector=B(On);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let a of this.appInits){let l=Ut(this.injector,a);if(Kr(l))n.push(l);else if(Yh(l)){let h=new Promise((g,E)=>{l.subscribe({complete:g,error:E})});n.push(h)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(a=>{this.reject(a)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),kl=new K("");function oy(){xd(()=>{let e="";throw new Q(600,e)})}function sy(e){return e.isBoundToModule}var XD=10;var Bi=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=B(nn);afterRenderManager=B(ry);zonelessEnabled=B(Ps);rootEffectScheduler=B(Uf);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ht;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=B(dr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(pe(n=>!n))}constructor(){B(qs,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:a=>{a&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=B(gt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,a=On.NULL){return this._injector.get(ct).run(()=>{We(10);let h=n instanceof Fl;if(!this._injector.get(qh).done){let j="";throw new Q(405,j)}let E;h?E=n:E=this._injector.get(Gs).resolveComponentFactory(n),this.componentTypes.push(E.componentType);let v=sy(E)?void 0:this._injector.get(Pi),x=r||E.selector,b=E.create(a,[],x,v),O=b.location.nativeElement,T=b.injector.get($h,null);return T?.registerApplication(O),b.onDestroy(()=>{this.detachView(b.hostView),Vs(this.components,b),T?.unregisterApplication(O)}),this._loadComponent(b),We(11,b),b})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){We(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Hh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Q(101,!1);let n=he(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,he(n),this.afterTick.next(),We(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Fi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<XD;)We(14),this.synchronizeOnce(),We(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:a}of this.allViews){if(!r&&!Ms(a))continue;let l=r&&!this.zonelessEnabled?0:1;kh(a,l),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ms(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Vs(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(a){this.internalErrorHandler(a)}this.components.push(n),this._injector.get(kl,[]).forEach(a=>a(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Vs(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Q(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Vs(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function tt(e,t,n){let r=je(),a=el();if(Zr(r,a,t)){let l=Lt(),h=Ff();S1(h,r,e,t,r[rt],n)}return tt}function jm(e,t,n,r,a){Nh(t,e,n,a?"class":"style",r)}function lt(e,t,n,r){let a=je(),l=Lt(),h=en+e,g=a[rt],E=l.firstCreatePass?$1(h,l,a,t,Mh,Qc(),n,r):l.data[h],v=QD(l,a,E,g,t,e);a[h]=v;let x=Ts(E);return Wr(E,!0),I1(g,v,E),!Fh(E)&&Os()&&Nl(l,a,v,E),(Z0()===0||x)&&Mo(v,a),X0(),x&&(Ml(l,a,E),Dh(l,E,a)),r!==null&&Th(a,E),lt}function ut(){let e=Ht();Kc()?_f():(e=e.parent,Wr(e,!1));let t=e;J0(t)&&em(),Q0();let n=Lt();return n.firstCreatePass&&Y1(n,t),t.classesWithoutHost!=null&&cx(t)&&jm(n,t,je(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&lx(t)&&jm(n,t,je(),t.stylesWithoutHost,!1),ut}function mr(e,t,n,r){return lt(e,t,n,r),ut(),mr}var QD=(e,t,n,r,a,l)=>(Fs(!0),w1(r,a,fm()));function KD(e,t,n,r,a){let l=t.consts,h=_i(l,r),g=Ol(t,e,8,"ng-container",h);h!==null&&dh(g,h,!0);let E=_i(l,a);return Qc()&&Vh(t,n,g,E,Mh),g.mergedAttrs=Ao(g.mergedAttrs,g.attrs),t.queries!==null&&t.queries.elementStart(t,g),g}function Vi(e,t,n){let r=je(),a=Lt(),l=e+en,h=a.firstCreatePass?KD(l,a,r,t,n):a.data[l];Wr(h,!0);let g=JD(a,r,h,e);return r[l]=g,Os()&&Nl(a,r,g,h),Mo(g,r),Ts(h)&&(Ml(a,r,h),Dh(a,h,r)),n!=null&&Th(r,h),Vi}function ji(){let e=Ht(),t=Lt();return Kc()?_f():(e=e.parent,Wr(e,!1)),t.firstCreatePass&&(Ch(t,e),Yc(e)&&t.queries.elementEnd(e)),ji}var JD=(e,t,n,r)=>(Fs(!0),Zx(t[rt],""));function Zs(){return je()}var Xs="en-US";var eA=Xs;function ay(e){typeof e=="string"&&(eA=e.toLowerCase().replace(/_/g,"-"))}function Zn(e,t,n){let r=je(),a=Lt(),l=Ht();return cy(a,r,r[rt],l,e,t,n),Zn}function cy(e,t,n,r,a,l,h){let g=!0,E=null;if((r.type&3||h)&&(E??=Wf(r,t,l),uD(r,e,t,h,n,a,l,E)&&(g=!1)),g){let v=r.outputs?.[a],x=r.hostDirectiveOutputs?.[a];if(x&&x.length)for(let b=0;b<x.length;b+=2){let O=x[b],T=x[b+1];E??=Wf(r,t,l),Rm(r,t,O,T,a,E)}if(v&&v.length)for(let b of v)E??=Wf(r,t,l),Rm(r,t,b,a,a,E)}}function dn(e=1){return dm(e)}function ol(e,t){return e<<17|t<<2}function Li(e){return e>>17&32767}function tA(e){return(e&2)==2}function nA(e,t){return e&131071|t<<17}function mh(e){return e|2}function _o(e){return(e&131068)>>2}function qf(e,t){return e&-131069|t<<2}function rA(e){return(e&1)===1}function yh(e){return e|1}function iA(e,t,n,r,a,l){let h=l?t.classBindings:t.styleBindings,g=Li(h),E=_o(h);e[r]=n;let v=!1,x;if(Array.isArray(n)){let b=n;x=b[1],(x===null||vo(b,x)>0)&&(v=!0)}else x=n;if(a)if(E!==0){let O=Li(e[g+1]);e[r+1]=ol(O,g),O!==0&&(e[O+1]=qf(e[O+1],r)),e[g+1]=nA(e[g+1],r)}else e[r+1]=ol(g,0),g!==0&&(e[g+1]=qf(e[g+1],r)),g=r;else e[r+1]=ol(E,0),g===0?g=r:e[E+1]=qf(e[E+1],r),E=r;v&&(e[r+1]=mh(e[r+1])),Um(e,x,r,!0),Um(e,x,r,!1),oA(t,x,e,r,l),h=ol(g,E),l?t.classBindings=h:t.styleBindings=h}function oA(e,t,n,r,a){let l=a?e.residualClasses:e.residualStyles;l!=null&&typeof t=="string"&&vo(l,t)>=0&&(n[r+1]=yh(n[r+1]))}function Um(e,t,n,r){let a=e[n+1],l=t===null,h=r?Li(a):_o(a),g=!1;for(;h!==0&&(g===!1||l);){let E=e[h],v=e[h+1];sA(E,t)&&(g=!0,e[h+1]=r?yh(v):mh(v)),h=r?Li(v):_o(v)}g&&(e[n+1]=r?mh(a):yh(a))}function sA(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?vo(e,t)>=0:!1}function Bl(e,t){return aA(e,t,null,!0),Bl}function aA(e,t,n,r){let a=je(),l=Lt(),h=rm(2);if(l.firstUpdatePass&&lA(l,e,h,r),t!==pr&&Zr(a,h,t)){let g=l.data[Mi()];pA(l,g,a,a[rt],e,a[h+1]=gA(t,n),r,h)}}function cA(e,t){return t>=e.expandoStartIndex}function lA(e,t,n,r){let a=e.data;if(a[n+1]===null){let l=a[Mi()],h=cA(e,n);mA(l,r)&&t===null&&!h&&(t=!1),t=uA(a,l,t,r),iA(a,l,t,n,h,r)}}function uA(e,t,n,r){let a=am(e),l=r?t.residualClasses:t.residualStyles;if(a===null)(r?t.classBindings:t.styleBindings)===0&&(n=Zf(null,e,t,n,r),n=Hs(n,t.attrs,r),l=null);else{let h=t.directiveStylingLast;if(h===-1||e[h]!==a)if(n=Zf(a,e,t,n,r),l===null){let E=dA(e,t,r);E!==void 0&&Array.isArray(E)&&(E=Zf(null,e,t,E[1],r),E=Hs(E,t.attrs,r),fA(e,t,r,E))}else l=hA(e,t,r)}return l!==void 0&&(r?t.residualClasses=l:t.residualStyles=l),n}function dA(e,t,n){let r=n?t.classBindings:t.styleBindings;if(_o(r)!==0)return e[Li(r)]}function fA(e,t,n,r){let a=n?t.classBindings:t.styleBindings;e[Li(a)]=r}function hA(e,t,n){let r,a=t.directiveEnd;for(let l=1+t.directiveStylingLast;l<a;l++){let h=e[l].hostAttrs;r=Hs(r,h,n)}return Hs(r,t.attrs,n)}function Zf(e,t,n,r,a){let l=null,h=n.directiveEnd,g=n.directiveStylingLast;for(g===-1?g=n.directiveStart:g++;g<h&&(l=t[g],r=Hs(r,l.hostAttrs,a),l!==e);)g++;return e!==null&&(n.directiveStylingLast=g),r}function Hs(e,t,n){let r=n?1:2,a=-1;if(t!==null)for(let l=0;l<t.length;l++){let h=t[l];typeof h=="number"?a=h:a===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),R0(e,h,n?!0:t[++l]))}return e===void 0?null:e}function pA(e,t,n,r,a,l,h,g){if(!(t.type&3))return;let E=e.data,v=E[g+1],x=rA(v)?Hm(E,t,n,a,_o(v),h):void 0;if(!xl(x)){xl(l)||tA(v)&&(l=Hm(E,null,n,a,g,h));let b=wf(Mi(),n);NI(r,h,b,a,l)}}function Hm(e,t,n,r,a,l){let h=t===null,g;for(;a>0;){let E=e[a],v=Array.isArray(E),x=v?E[1]:E,b=x===null,O=n[a+1];O===pr&&(O=b?cn:void 0);let T=b?Gc(O,r):x===r?O:void 0;if(v&&!xl(T)&&(T=Gc(E,r)),xl(T)&&(g=T,h))return g;let j=e[a+1];a=h?Li(j):_o(j)}if(t!==null){let E=l?t.residualClasses:t.residualStyles;E!=null&&(g=Gc(E,r))}return g}function xl(e){return e!==void 0}function gA(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Jt(E1(e)))),e}function mA(e,t){return(e.flags&(t?8:16))!==0}function fn(e,t=""){let n=je(),r=Lt(),a=e+en,l=r.firstCreatePass?Ol(r,a,1,t,null):r.data[a],h=yA(r,n,l,t,e);n[a]=h,Os()&&Nl(r,n,h,l),Wr(l,!1)}var yA=(e,t,n,r,a)=>(Fs(!0),Yx(t[rt],r));function EA(e,t,n,r=""){return Zr(e,el(),n)?t+af(n)+r:pr}function Qs(e){return yr("",e),Qs}function yr(e,t,n){let r=je(),a=EA(r,e,t,n);return a!==pr&&vA(r,Mi(),a),yr}function vA(e,t,n){let r=wf(t,e);qx(e[rt],r,n)}function Vl(e,t,n){Bf(t)&&(t=t());let r=je(),a=el();if(Zr(r,a,t)){let l=Lt(),h=Ff();S1(h,r,e,t,r[rt],n)}return Vl}function Zh(e,t){let n=Bf(e);return n&&e.set(t),n}function jl(e,t){let n=je(),r=Lt(),a=Ht();return cy(r,n,n[rt],a,e,t),jl}function CA(e,t,n){let r=Lt();if(r.firstCreatePass){let a=Gn(e);Eh(n,r.data,r.blueprint,a,!0),Eh(t,r.data,r.blueprint,a,!1)}}function Eh(e,t,n,r,a){if(e=Tt(e),Array.isArray(e))for(let l=0;l<e.length;l++)Eh(e[l],t,n,r,a);else{let l=Lt(),h=je(),g=Ht(),E=Ei(e)?e:Tt(e.provide),v=Ef(e),x=g.providerIndexes&1048575,b=g.directiveStart,O=g.providerIndexes>>20;if(Ei(e)||!e.multi){let T=new Oi(v,a,Te),j=Qf(E,t,a?x:x+O,b);j===-1?(Jf(hl(g,h),l,E),Xf(l,e,t.length),t.push(E),g.directiveStart++,g.directiveEnd++,a&&(g.providerIndexes+=1048576),n.push(T),h.push(T)):(n[j]=T,h[j]=T)}else{let T=Qf(E,t,x+O,b),j=Qf(E,t,x,x+O),W=T>=0&&n[T],H=j>=0&&n[j];if(a&&!H||!a&&!W){Jf(hl(g,h),l,E);let U=IA(a?xA:wA,n.length,a,r,v);!a&&H&&(n[j].providerFactory=U),Xf(l,e,t.length,0),t.push(E),g.directiveStart++,g.directiveEnd++,a&&(g.providerIndexes+=1048576),n.push(U),h.push(U)}else{let U=ly(n[a?j:T],v,!a&&r);Xf(l,e,T>-1?T:j,U)}!a&&r&&H&&n[j].componentProviders++}}}function Xf(e,t,n,r){let a=Ei(t),l=B0(t);if(a||l){let E=(l?Tt(t.useClass):t).prototype.ngOnDestroy;if(E){let v=e.destroyHooks||(e.destroyHooks=[]);if(!a&&t.multi){let x=v.indexOf(n);x===-1?v.push(n,[r,E]):v[x+1].push(r,E)}else v.push(n,E)}}}function ly(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Qf(e,t,n,r){for(let a=n;a<r;a++)if(t[a]===e)return a;return-1}function wA(e,t,n,r){return vh(this.multi,[])}function xA(e,t,n,r){let a=this.multi,l;if(this.providerFactory){let h=this.providerFactory.componentProviders,g=pl(n,n[xe],this.providerFactory.index,r);l=g.slice(0,h),vh(a,l);for(let E=h;E<g.length;E++)l.push(g[E])}else l=[],vh(a,l);return l}function vh(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function IA(e,t,n,r,a){let l=new Oi(e,n,Te);return l.multi=[],l.index=t,l.componentProviders=0,ly(l,a,r&&!n),l}function Ro(e,t=[]){return n=>{n.providersResolver=(r,a)=>CA(r,a?a(e):e,t)}}function Ks(e,t,n,r,a,l){return AA(je(),Jc(),e,t,n,r,a,l)}function Ul(e,t,n,r,a,l,h){return bA(je(),Jc(),e,t,n,r,a,l,h)}function Xh(e,t){let n=e[t];return n===pr?void 0:n}function DA(e,t,n,r,a,l){let h=t+n;return Zr(e,h,a)?Uh(e,h+1,l?r.call(l,a):r(a)):Xh(e,h+1)}function AA(e,t,n,r,a,l,h,g){let E=t+n;return cD(e,E,a,l,h)?Uh(e,E+3,g?r.call(g,a,l,h):r(a,l,h)):Xh(e,E+3)}function bA(e,t,n,r,a,l,h,g,E){let v=t+n;return lD(e,v,a,l,h,g)?Uh(e,v+4,E?r.call(E,a,l,h,g):r(a,l,h,g)):Xh(e,v+4)}function Jr(e,t){let n=Lt(),r,a=e+en;n.firstCreatePass?(r=_A(t,n.pipeRegistry),n.data[a]=r,r.onDestroy&&(n.destroyHooks??=[]).push(a,r.onDestroy)):r=n.data[a];let l=r.factory||(r.factory=Br(r.type,!0)),h,g=jt(Te);try{let E=fl(!1),v=l();return fl(E),xf(n,je(),a,v),v}finally{jt(g)}}function _A(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function ei(e,t,n){let r=e+en,a=je(),l=z0(a,r);return SA(a,r)?DA(a,Jc(),t,l.transform,n,l):l.transform(n)}function SA(e,t){return e[xe].data[t].pure}var Il=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Qh=(()=>{class e{compileModuleSync(n){return new vl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),a=pf(n),l=v1(a.declarations).reduce((h,g)=>{let E=Hr(g);return E&&h.push(new bo(E)),h},[]);return new Il(r,l)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var TA=(()=>{class e{zone=B(ct);changeDetectionScheduler=B(jr);applicationRef=B(Bi);applicationErrorHandler=B(nn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),uy=new K("",{factory:()=>!1});function Kh({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new ct(ve($({},ep()),{scheduleInRootZone:n})),[{provide:ct,useFactory:e},{provide:cr,multi:!0,useFactory:()=>{let r=B(TA,{optional:!0});return()=>r.initialize()}},{provide:cr,multi:!0,useFactory:()=>{let r=B(MA);return()=>{r.initialize()}}},t===!0?{provide:Vf,useValue:!0}:[],{provide:jf,useValue:n??ey},{provide:nn,useFactory:()=>{let r=B(ct),a=B(gt),l;return h=>{r.runOutsideAngular(()=>{a.destroyed&&!l?setTimeout(()=>{throw h}):(l??=a.get(Hn),l.handleError(h))})}}}]}function Jh(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=Kh({ngZoneFactory:()=>{let a=ep(e);return a.scheduleInRootZone=n,a.shouldCoalesceEventChangeDetection&&Pl("NgZone_CoalesceEvent"),new ct(a)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return lr([{provide:uy,useValue:!0},{provide:Ps,useValue:!1},r])}function ep(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var MA=(()=>{class e{subscription=new ot;initialized=!1;zone=B(ct);pendingTasks=B(dr);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ct.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ct.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var dy=(()=>{class e{applicationErrorHandler=B(nn);appRef=B(Bi);taskService=B(dr);ngZone=B(ct);zonelessEnabled=B(Ps);tracing=B(qs,{optional:!0});disableScheduling=B(Vf,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ot;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Cl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(jf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof wl||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let a=this.useMicrotaskScheduler?km:ty;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>a(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>a(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Cl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,km(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function NA(){return typeof $localize<"u"&&$localize.locale||Xs}var Hl=new K("",{providedIn:"root",factory:()=>B(Hl,{optional:!0,skipSelf:!0})||NA()});function Xn(e){return I0(e)}function Js(e,t){return uc(e,t?.equal)}var fy=class{[Ft];constructor(t){this[Ft]=t}destroy(){this[Ft].destroy()}};var my=Symbol("InputSignalNode#UNSET"),ZA=ve($({},dc),{transformFn:void 0,applyValueToInputSignal(e,t){so(e,t)}});function yy(e,t){let n=Object.create(ZA);n.value=e,n.transformFn=t?.transform;function r(){if(io(n),n.value===my){let a=null;throw new Q(-950,a)}return n.value}return r[Ft]=n,r}var XA=new K("");XA.__NG_ELEMENT_ID__=e=>{let t=Ht();if(t===null)throw new Q(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new Q(204,!1)};function hy(e,t){return yy(e,t)}function QA(e){return yy(my,e)}var Ey=(hy.required=QA,hy);var tp=new K(""),KA=new K("");function ea(e){return!e.moduleRef}function JA(e){let t=ea(e)?e.r3Injector:e.moduleRef.injector,n=t.get(ct);return n.run(()=>{ea(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(nn),a;if(n.runOutsideAngular(()=>{a=n.onError.subscribe({next:r})}),ea(e)){let l=()=>t.destroy(),h=e.platformInjector.get(tp);h.add(l),t.onDestroy(()=>{a.unsubscribe(),h.delete(l)})}else{let l=()=>e.moduleRef.destroy(),h=e.platformInjector.get(tp);h.add(l),e.moduleRef.onDestroy(()=>{Vs(e.allPlatformModules,e.moduleRef),a.unsubscribe(),h.delete(l)})}return tb(r,n,()=>{let l=t.get(qh);return l.runInitializers(),l.donePromise.then(()=>{let h=t.get(Hl,Xs);if(ay(h||Xs),!t.get(KA,!0))return ea(e)?t.get(Bi):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(ea(e)){let E=t.get(Bi);return e.rootComponent!==void 0&&E.bootstrap(e.rootComponent),E}else return eb?.(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}var eb;function tb(e,t,n){try{let r=n();return Kr(r)?r.catch(a=>{throw t.runOutsideAngular(()=>e(a)),a}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var zl=null;function nb(e=[],t){return On.create({name:t,providers:[{provide:xs,useValue:"platform"},{provide:tp,useValue:new Set([()=>zl=null])},...e]})}function rb(e=[]){if(zl)return zl;let t=nb(e);return zl=t,oy(),ib(t),t}function ib(e){let t=e.get(_l,null);Ut(e,()=>{t?.forEach(n=>n())})}var ta=(()=>{class e{static __NG_ELEMENT_ID__=ob}return e})();function ob(e){return sb(Ht(),je(),(e&16)===16)}function sb(e,t,n){if(Gr(e)&&!n){let r=xn(e.index,t);return new qr(r,r)}else if(e.type&175){let r=t[Cn];return new qr(r,t)}return null}var np=class{constructor(){}supports(t){return jh(t)}create(t){return new rp(t)}},ab=(e,t)=>t,rp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||ab}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,a=0,l=null;for(;n||r;){let h=!r||n&&n.currentIndex<py(r,a,l)?n:r,g=py(h,a,l),E=h.currentIndex;if(h===r)a--,r=r._nextRemoved;else if(n=n._next,h.previousIndex==null)a++;else{l||(l=[]);let v=g-a,x=E-a;if(v!=x){for(let O=0;O<v;O++){let T=O<l.length?l[O]:l[O]=0,j=T+O;x<=j&&j<v&&(l[O]=T+1)}let b=h.previousIndex;l[b]=x-v}}g!==E&&t(h,g,E)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!jh(t))throw new Q(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,a,l,h;if(Array.isArray(t)){this.length=t.length;for(let g=0;g<this.length;g++)l=t[g],h=this._trackByFn(g,l),n===null||!Object.is(n.trackById,h)?(n=this._mismatch(n,l,h,g),r=!0):(r&&(n=this._verifyReinsertion(n,l,h,g)),Object.is(n.item,l)||this._addIdentityChange(n,l)),n=n._next}else a=0,q1(t,g=>{h=this._trackByFn(a,g),n===null||!Object.is(n.trackById,h)?(n=this._mismatch(n,g,h,a),r=!0):(r&&(n=this._verifyReinsertion(n,g,h,a)),Object.is(n.item,g)||this._addIdentityChange(n,g)),n=n._next,a++}),this.length=a;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,a){let l;return t===null?l=this._itTail:(l=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,l,a)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,a),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,l,a)):t=this._addAfter(new ip(n,r),l,a)),t}_verifyReinsertion(t,n,r,a){let l=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return l!==null?t=this._reinsertAfter(l,t._prev,a):t.currentIndex!=a&&(t.currentIndex=a,this._addToMoves(t,a)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let a=t._prevRemoved,l=t._nextRemoved;return a===null?this._removalsHead=l:a._nextRemoved=l,l===null?this._removalsTail=a:l._prevRemoved=a,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let a=n===null?this._itHead:n._next;return t._next=a,t._prev=n,a===null?this._itTail=t:a._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Gl),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Gl),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},ip=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},op=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Gl=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new op,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,a=this.map.get(r);return a?a.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function py(e,t,n){let r=e.previousIndex;if(r===null)return r;let a=0;return n&&r<n.length&&(a=n[r]),r+t+a}function gy(){return new sp([new np])}var sp=(()=>{class e{factories;static \u0275prov=te({token:e,providedIn:"root",factory:gy});constructor(n){this.factories=n}static create(n,r){if(r!=null){let a=r.factories.slice();n=n.concat(a)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||gy()),deps:[[e,new Ym,new $m]]}}find(n){let r=this.factories.find(a=>a.supports(n));if(r!=null)return r;throw new Q(901,!1)}}return e})();function vy(e){We(8);try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,a=rb(r),l=[Kh({}),{provide:jr,useExisting:dy},pm,...n||[]],h=new Us({providers:l,parent:a,debugName:"",runEnvironmentInitializers:!1});return JA({r3Injector:h.injector,platformInjector:a,rootComponent:t})}catch(t){return Promise.reject(t)}finally{We(9)}}function ap(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var xy=null;function In(){return xy}function cp(e){xy??=e}var na=class{},lp=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>B(Iy),providedIn:"platform"})}return e})();var Iy=(()=>{class e extends lp{_location;_history;_doc=B(at);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return In().getBaseHref(this._doc)}onPopState(n){let r=In().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=In().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,a){this._history.pushState(n,r,a)}replaceState(n,r,a){this._history.replaceState(n,r,a)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Dy(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function Cy(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function ti(e){return e&&e[0]!=="?"?`?${e}`:e}var Wl=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>B(by),providedIn:"root"})}return e})(),Ay=new K(""),by=(()=>{class e extends Wl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B(at).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Dy(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ti(this._platformLocation.search),a=this._platformLocation.hash;return a&&n?`${r}${a}`:r}pushState(n,r,a,l){let h=this.prepareExternalUrl(a+ti(l));this._platformLocation.pushState(n,r,h)}replaceState(n,r,a,l){let h=this.prepareExternalUrl(a+ti(l));this._platformLocation.replaceState(n,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(se(lp),se(Ay,8))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Oo=(()=>{class e{_subject=new ht;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=ub(Cy(wy(r))),this._locationStrategy.onPopState(a=>{this._subject.next({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ti(r))}normalize(n){return e.stripTrailingSlash(lb(this._basePath,wy(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",a=null){this._locationStrategy.pushState(a,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ti(r)),a)}replaceState(n,r="",a=null){this._locationStrategy.replaceState(a,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ti(r)),a)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(a=>a(n,r))}subscribe(n,r,a){return this._subject.subscribe({next:n,error:r??void 0,complete:a??void 0})}static normalizeQueryParams=ti;static joinWithSlash=Dy;static stripTrailingSlash=Cy;static \u0275fac=function(r){return new(r||e)(se(Wl))};static \u0275prov=te({token:e,factory:()=>cb(),providedIn:"root"})}return e})();function cb(){return new Oo(se(Wl))}function lb(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function wy(e){return e.replace(/\/index.html$/,"")}function ub(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var up=/\s+/,_y=[],dp=(()=>{class e{_ngEl;_renderer;initialClasses=_y;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(up):_y}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(up):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let a=this.stateMap.get(n);a!==void 0?(a.enabled!==r&&(a.changed=!0,a.enabled=r),a.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],a=n[1];a.changed?(this._toggleClass(r,a.enabled),a.changed=!1):a.touched||(a.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),a.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(up).forEach(a=>{r?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}static \u0275fac=function(r){return new(r||e)(Te(hr),Te(Qr))};static \u0275dir=Nt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();var $l=class{$implicit;ngForOf;index;count;constructor(t,n,r,a){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=a}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ql=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,a){this._viewContainer=n,this._template=r,this._differs=a}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((a,l,h)=>{if(a.previousIndex==null)r.createEmbeddedView(this._template,new $l(a.item,this._ngForOf,-1,-1),h===null?void 0:h);else if(h==null)r.remove(l===null?void 0:l);else if(l!==null){let g=r.get(l);r.move(g,h),Sy(g,a)}});for(let a=0,l=r.length;a<l;a++){let g=r.get(a).context;g.index=a,g.count=l,g.ngForOf=this._ngForOf}n.forEachIdentityChange(a=>{let l=r.get(a.currentIndex);Sy(l,a)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(Te(ki),Te(zs),Te(sp))};static \u0275dir=Nt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function Sy(e,t){e.context.$implicit=t.item}var fp=(()=>{class e{_viewContainer;_context=new Yl;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Ty(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Ty(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(Te(ki),Te(zs))};static \u0275dir=Nt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),Yl=class{$implicit=null;ngIf=null};function Ty(e,t){if(e&&!e.createEmbeddedView)throw new Q(2020,!1)}function db(e,t){return new Q(2100,!1)}var fb=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,hp=(()=>{class e{transform(n){if(n==null)return null;if(typeof n!="string")throw db(e,n);return n.replace(fb,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||e)};static \u0275pipe=Ys({name:"titlecase",type:e,pure:!0})}return e})();var Zl=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=qn({type:e});static \u0275inj=Fn({})}return e})();function ra(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[a,l]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(a.trim()===t)return decodeURIComponent(l)}return null}var Ui=class{};var My="browser",hb="server";function Ny(e){return e===hb}var Kl=new K(""),yp=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(a=>{a.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,a,l){return this._findPluginFor(r).addEventListener(n,r,a,l)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(l=>l.supports(n)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(se(Kl),se(ct))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),ia=class{_doc;constructor(t){this._doc=t}manager},Xl="ng-app-id";function Ry(e){for(let t of e)t.remove()}function Oy(e,t){let n=t.createElement("style");return n.textContent=e,n}function gb(e,t,n,r){let a=e.head?.querySelectorAll(`style[${Xl}="${t}"],link[${Xl}="${t}"]`);if(a)for(let l of a)l.removeAttribute(Xl),l instanceof HTMLLinkElement?r.set(l.href.slice(l.href.lastIndexOf("/")+1),{usage:0,elements:[l]}):l.textContent&&n.set(l.textContent,{usage:0,elements:[l]})}function gp(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var Ep=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,a,l={}){this.doc=n,this.appId=r,this.nonce=a,this.isServer=Ny(l),gb(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let a of n)this.addUsage(a,this.inline,Oy);r?.forEach(a=>this.addUsage(a,this.external,gp))}removeStyles(n,r){for(let a of n)this.removeUsage(a,this.inline);r?.forEach(a=>this.removeUsage(a,this.external))}addUsage(n,r,a){let l=r.get(n);l?l.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(h=>this.addElement(h,a(n,this.doc)))})}removeUsage(n,r){let a=r.get(n);a&&(a.usage--,a.usage<=0&&(Ry(a.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Ry(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:a}]of this.inline)a.push(this.addElement(n,Oy(r,this.doc)));for(let[r,{elements:a}]of this.external)a.push(this.addElement(n,gp(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Xl,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(se(at),se(bl),se(Sl,8),se(No))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),pp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},vp=/%COMP%/g;var Py="%COMP%",mb=`_nghost-${Py}`,yb=`_ngcontent-${Py}`,Eb=!0,vb=new K("",{providedIn:"root",factory:()=>Eb});function Cb(e){return yb.replace(vp,e)}function wb(e){return mb.replace(vp,e)}function Ly(e,t){return t.map(n=>n.replace(vp,e))}var Cp=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,a,l,h,g,E,v=null,x=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=a,this.removeStylesOnCompDestroy=l,this.doc=h,this.platformId=g,this.ngZone=E,this.nonce=v,this.tracingService=x,this.platformIsServer=!1,this.defaultRenderer=new oa(n,h,E,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let a=this.getOrCreateRenderer(n,r);return a instanceof Ql?a.applyToHost(n):a instanceof sa&&a.applyStyles(),a}getOrCreateRenderer(n,r){let a=this.rendererByCompId,l=a.get(r.id);if(!l){let h=this.doc,g=this.ngZone,E=this.eventManager,v=this.sharedStylesHost,x=this.removeStylesOnCompDestroy,b=this.platformIsServer,O=this.tracingService;switch(r.encapsulation){case fr.Emulated:l=new Ql(E,v,r,this.appId,x,h,g,b,O);break;case fr.ShadowDom:return new mp(E,v,n,r,h,g,this.nonce,b,O);default:l=new sa(E,v,r,x,h,g,b,O);break}a.set(r.id,l)}return l}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(se(yp),se(Ep),se(bl),se(vb),se(at),se(No),se(ct),se(Sl),se(qs,8))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),oa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,a,l){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=a,this.tracingService=l}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(pp[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Fy(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Fy(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,a){if(a){n=a+":"+n;let l=pp[a];l?t.setAttributeNS(l,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let a=pp[r];a?t.removeAttributeNS(a,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,a){a&(Yn.DashCase|Yn.Important)?t.style.setProperty(n,r,a&Yn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Yn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,a){if(typeof t=="string"&&(t=In().getGlobalEventTarget(this.doc,t),!t))throw new Q(5102,!1);let l=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(l=this.tracingService.wrapEventListener(t,n,l)),this.eventManager.addEventListener(t,n,l,a)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function Fy(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var mp=class extends oa{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,a,l,h,g,E,v){super(t,l,h,E,v),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let x=a.styles;x=Ly(a.id,x);for(let O of x){let T=document.createElement("style");g&&T.setAttribute("nonce",g),T.textContent=O,this.shadowRoot.appendChild(T)}let b=a.getExternalStyles?.();if(b)for(let O of b){let T=gp(O,l);g&&T.setAttribute("nonce",g),this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},sa=class extends oa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,a,l,h,g,E,v){super(t,l,h,g,E),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=a;let x=r.styles;this.styles=v?Ly(v,x):x,this.styleUrls=r.getExternalStyles?.(v)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ql=class extends sa{contentAttr;hostAttr;constructor(t,n,r,a,l,h,g,E,v){let x=a+"-"+r.id;super(t,n,r,l,h,g,E,v,x),this.contentAttr=Cb(x),this.hostAttr=wb(x)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var Jl=class e extends na{supportsDOMEvents=!0;static makeCurrent(){cp(new e)}onAndCancel(t,n,r,a){return t.addEventListener(n,r,a),()=>{t.removeEventListener(n,r,a)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=xb();return n==null?null:Ib(n)}resetBaseElement(){aa=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ra(document.cookie,t)}},aa=null;function xb(){return aa=aa||document.head.querySelector("base"),aa?aa.getAttribute("href"):null}function Ib(e){return new URL(e,document.baseURI).pathname}var Db=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),By=(()=>{class e extends ia{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,a,l){return n.addEventListener(r,a,l),()=>this.removeEventListener(n,r,a,l)}removeEventListener(n,r,a,l){return n.removeEventListener(r,a,l)}static \u0275fac=function(r){return new(r||e)(se(at))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),ky=["alt","control","meta","shift"],Ab={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bb={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Vy=(()=>{class e extends ia{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,a,l){let h=e.parseEventName(r),g=e.eventCallback(h.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>In().onAndCancel(n,h.domEventName,g,l))}static parseEventName(n){let r=n.toLowerCase().split("."),a=r.shift();if(r.length===0||!(a==="keydown"||a==="keyup"))return null;let l=e._normalizeKey(r.pop()),h="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),h="code."),ky.forEach(v=>{let x=r.indexOf(v);x>-1&&(r.splice(x,1),h+=v+".")}),h+=l,r.length!=0||l.length===0)return null;let E={};return E.domEventName=a,E.fullKey=h,E}static matchEventFullKeyCode(n,r){let a=Ab[n.key]||n.key,l="";return r.indexOf("code.")>-1&&(a=n.code,l="code."),a==null||!a?!1:(a=a.toLowerCase(),a===" "?a="space":a==="."&&(a="dot"),ky.forEach(h=>{if(h!==a){let g=bb[h];g(n)&&(l+=h+".")}}),l+=a,l===r)}static eventCallback(n,r,a){return l=>{e.matchEventFullKeyCode(l,n)&&a.runGuarded(()=>r(l))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(se(at))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})();function wp(e,t){return vy($({rootComponent:e},_b(t)))}function _b(e){return{appProviders:[...Rb,...e?.providers??[]],platformProviders:Nb}}function Sb(){Jl.makeCurrent()}function Tb(){return new Hn}function Mb(){return Ih(document),document}var Nb=[{provide:No,useValue:My},{provide:_l,useValue:Sb,multi:!0},{provide:at,useFactory:Mb}];var Rb=[{provide:xs,useValue:"root"},{provide:Hn,useFactory:Tb},{provide:Kl,useClass:By,multi:!0,deps:[at]},{provide:Kl,useClass:Vy,multi:!0,deps:[at]},Cp,Ep,yp,{provide:Fi,useExisting:Cp},{provide:Ui,useClass:Db},[]];var Po=class{},ca=class{},ni=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let a=n.slice(0,r),l=n.slice(r+1).trim();this.addHeaderEntry(a,l)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let a=(t.op==="a"?this.headers.get(n):void 0)||[];a.push(...r),this.headers.set(n,a);break;case"d":let l=t.value;if(!l)this.headers.delete(n),this.normalizedNames.delete(n);else{let h=this.headers.get(n);if(!h)return;h=h.filter(g=>l.indexOf(g)===-1),h.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,h)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(l=>l.toString()),a=t.toLowerCase();this.headers.set(a,r),this.maybeSetNormalizedName(t,a)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var tu=class{encodeKey(t){return jy(t)}encodeValue(t){return jy(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function Ob(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(a=>{let l=a.indexOf("="),[h,g]=l==-1?[t.decodeKey(a),""]:[t.decodeKey(a.slice(0,l)),t.decodeValue(a.slice(l+1))],E=n.get(h)||[];E.push(g),n.set(h,E)}),n}var Fb=/%(\d[a-f0-9])/gi,Pb={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function jy(e){return encodeURIComponent(e).replace(Fb,(t,n)=>Pb[n]??t)}function eu(e){return`${e}`}var vr=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new tu,t.fromString){if(t.fromObject)throw new Q(2805,!1);this.map=Ob(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],a=Array.isArray(r)?r.map(eu):[eu(r)];this.map.set(n,a)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let a=t[r];Array.isArray(a)?a.forEach(l=>{n.push({param:r,value:l,op:"a"})}):n.push({param:r,value:a,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(eu(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],a=r.indexOf(eu(t.value));a!==-1&&r.splice(a,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var nu=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Lb(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Uy(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Hy(e){return typeof Blob<"u"&&e instanceof Blob}function zy(e){return typeof FormData<"u"&&e instanceof FormData}function kb(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Gy="Content-Type",Wy="Accept",Yy="X-Request-URL",qy="text/plain",Zy="application/json",Bb=`${Zy}, ${qy}, */*`,Fo=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,n,r,a){this.url=n,this.method=t.toUpperCase();let l;if(Lb(this.method)||a?(this.body=r!==void 0?r:null,l=a):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,this.keepalive=!!l.keepalive,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params),this.transferCache=l.transferCache),this.headers??=new ni,this.context??=new nu,!this.params)this.params=new vr,this.urlWithParams=n;else{let h=this.params.toString();if(h.length===0)this.urlWithParams=n;else{let g=n.indexOf("?"),E=g===-1?"?":g<n.length-1?"&":"";this.urlWithParams=n+E+h}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Uy(this.body)||Hy(this.body)||zy(this.body)||kb(this.body)?this.body:this.body instanceof vr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||zy(this.body)?null:Hy(this.body)?this.body.type||null:Uy(this.body)?null:typeof this.body=="string"?qy:this.body instanceof vr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Zy:null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,a=t.responseType||this.responseType,l=t.keepalive??this.keepalive,h=t.transferCache??this.transferCache,g=t.body!==void 0?t.body:this.body,E=t.withCredentials??this.withCredentials,v=t.reportProgress??this.reportProgress,x=t.headers||this.headers,b=t.params||this.params,O=t.context??this.context;return t.setHeaders!==void 0&&(x=Object.keys(t.setHeaders).reduce((T,j)=>T.set(j,t.setHeaders[j]),x)),t.setParams&&(b=Object.keys(t.setParams).reduce((T,j)=>T.set(j,t.setParams[j]),b)),new e(n,r,g,{params:b,headers:x,context:O,reportProgress:v,responseType:a,withCredentials:E,transferCache:h,keepalive:l})}},Hi=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Hi||{}),Lo=class{headers;status;statusText;url;ok;type;constructor(t,n=200,r="OK"){this.headers=t.headers||new ni,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},ru=class e extends Lo{constructor(t={}){super(t)}type=Hi.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},la=class e extends Lo{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Hi.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ua=class extends Lo{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Vb=200,jb=204;function xp(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache,keepalive:e.keepalive}}var ou=(()=>{class e{handler;constructor(n){this.handler=n}request(n,r,a={}){let l;if(n instanceof Fo)l=n;else{let E;a.headers instanceof ni?E=a.headers:E=new ni(a.headers);let v;a.params&&(a.params instanceof vr?v=a.params:v=new vr({fromObject:a.params})),l=new Fo(n,r,a.body!==void 0?a.body:null,{headers:E,context:a.context,params:v,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials,transferCache:a.transferCache,keepalive:a.keepalive})}let h=ae(l).pipe(Pr(E=>this.handler.handle(E)));if(n instanceof Fo||a.observe==="events")return h;let g=h.pipe(Qt(E=>E instanceof la));switch(a.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return g.pipe(pe(E=>{if(E.body!==null&&!(E.body instanceof ArrayBuffer))throw new Q(2806,!1);return E.body}));case"blob":return g.pipe(pe(E=>{if(E.body!==null&&!(E.body instanceof Blob))throw new Q(2807,!1);return E.body}));case"text":return g.pipe(pe(E=>{if(E.body!==null&&typeof E.body!="string")throw new Q(2808,!1);return E.body}));case"json":default:return g.pipe(pe(E=>E.body))}case"response":return g;default:throw new Q(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new vr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,a={}){return this.request("PATCH",n,xp(a,r))}post(n,r,a={}){return this.request("POST",n,xp(a,r))}put(n,r,a={}){return this.request("PUT",n,xp(a,r))}static \u0275fac=function(r){return new(r||e)(se(Po))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})();var Ub=new K("");function Xy(e,t){return t(e)}function Hb(e,t){return(n,r)=>t.intercept(n,{handle:a=>e(a,r)})}function zb(e,t,n){return(r,a)=>Ut(n,()=>t(r,l=>e(l,a)))}var Qy=new K(""),Dp=new K(""),Ky=new K(""),Ap=new K("",{providedIn:"root",factory:()=>!0});function Gb(){let e=null;return(t,n)=>{e===null&&(e=(B(Qy,{optional:!0})??[]).reduceRight(Hb,Xy));let r=B(Ls);if(B(Ap)){let l=r.add();return e(t,n).pipe(kr(l))}else return e(t,n)}}var iu=(()=>{class e extends Po{backend;injector;chain=null;pendingTasks=B(Ls);contributeToStability=B(Ap);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Dp),...this.injector.get(Ky,[])]));this.chain=r.reduceRight((a,l)=>zb(a,l,this.injector),Xy)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,a=>this.backend.handle(a)).pipe(kr(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(se(ca),se(gt))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})();var Wb=/^\)\]\}',?\n/,$b=RegExp(`^${Yy}:`,"m");function Yb(e){return"responseURL"in e&&e.responseURL?e.responseURL:$b.test(e.getAllResponseHeaders())?e.getResponseHeader(Yy):null}var Ip=(()=>{class e{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new Q(-2800,!1);n.keepalive;let r=this.xhrFactory;return ae(null).pipe(Kt(()=>new Ie(l=>{let h=r.build();if(h.open(n.method,n.urlWithParams),n.withCredentials&&(h.withCredentials=!0),n.headers.forEach((W,H)=>h.setRequestHeader(W,H.join(","))),n.headers.has(Wy)||h.setRequestHeader(Wy,Bb),!n.headers.has(Gy)){let W=n.detectContentTypeHeader();W!==null&&h.setRequestHeader(Gy,W)}if(n.responseType){let W=n.responseType.toLowerCase();h.responseType=W!=="json"?W:"text"}let g=n.serializeBody(),E=null,v=()=>{if(E!==null)return E;let W=h.statusText||"OK",H=new ni(h.getAllResponseHeaders()),U=Yb(h)||n.url;return E=new ru({headers:H,status:h.status,statusText:W,url:U}),E},x=()=>{let{headers:W,status:H,statusText:U,url:ye}=v(),ke=null;H!==jb&&(ke=typeof h.response>"u"?h.responseText:h.response),H===0&&(H=ke?Vb:0);let Ce=H>=200&&H<300;if(n.responseType==="json"&&typeof ke=="string"){let z=ke;ke=ke.replace(Wb,"");try{ke=ke!==""?JSON.parse(ke):null}catch(_e){ke=z,Ce&&(Ce=!1,ke={error:_e,text:ke})}}Ce?(l.next(new la({body:ke,headers:W,status:H,statusText:U,url:ye||void 0})),l.complete()):l.error(new ua({error:ke,headers:W,status:H,statusText:U,url:ye||void 0}))},b=W=>{let{url:H}=v(),U=new ua({error:W,status:h.status||0,statusText:h.statusText||"Unknown Error",url:H||void 0});l.error(U)},O=!1,T=W=>{O||(l.next(v()),O=!0);let H={type:Hi.DownloadProgress,loaded:W.loaded};W.lengthComputable&&(H.total=W.total),n.responseType==="text"&&h.responseText&&(H.partialText=h.responseText),l.next(H)},j=W=>{let H={type:Hi.UploadProgress,loaded:W.loaded};W.lengthComputable&&(H.total=W.total),l.next(H)};return h.addEventListener("load",x),h.addEventListener("error",b),h.addEventListener("timeout",b),h.addEventListener("abort",b),n.reportProgress&&(h.addEventListener("progress",T),g!==null&&h.upload&&h.upload.addEventListener("progress",j)),h.send(g),l.next({type:Hi.Sent}),()=>{h.removeEventListener("error",b),h.removeEventListener("abort",b),h.removeEventListener("load",x),h.removeEventListener("timeout",b),n.reportProgress&&(h.removeEventListener("progress",T),g!==null&&h.upload&&h.upload.removeEventListener("progress",j)),h.readyState!==h.DONE&&h.abort()}})))}static \u0275fac=function(r){return new(r||e)(se(Ui))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),Jy=new K(""),qb="XSRF-TOKEN",Zb=new K("",{providedIn:"root",factory:()=>qb}),Xb="X-XSRF-TOKEN",Qb=new K("",{providedIn:"root",factory:()=>Xb}),da=class{},Kb=(()=>{class e{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=ra(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||e)(se(at),se(Zb))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})();function Jb(e,t){let n=e.url.toLowerCase();if(!B(Jy)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=B(da).getToken(),a=B(Qb);return r!=null&&!e.headers.has(a)&&(e=e.clone({headers:e.headers.set(a,r)})),t(e)}var bp=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(bp||{});function e_(e,t){return{\u0275kind:e,\u0275providers:t}}function eE(...e){let t=[ou,Ip,iu,{provide:Po,useExisting:iu},{provide:ca,useFactory:()=>B(Ub,{optional:!0})??B(Ip)},{provide:Dp,useValue:Jb,multi:!0},{provide:Jy,useValue:!0},{provide:da,useClass:Kb}];for(let n of e)t.push(...n.\u0275providers);return lr(t)}var $y=new K("");function tE(){return e_(bp.LegacyInterceptors,[{provide:$y,useFactory:Gb},{provide:Dp,useExisting:$y,multi:!0}])}var _p=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=qn({type:e});static \u0275inj=Fn({providers:[eE(tE())]})}return e})();var nE=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(se(at))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var fe="primary",ba=Symbol("RouteTitle"),Rp=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Wi(e){return new Rp(e)}function uE(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let a={};for(let l=0;l<r.length;l++){let h=r[l],g=e[l];if(h[0]===":")a[h.substring(1)]=g;else if(h!==g.path)return null}return{consumed:e.slice(0,r.length),posParams:a}}function r_(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Qn(e[n],t[n]))return!1;return!0}function Qn(e,t){let n=e?Op(e):void 0,r=t?Op(t):void 0;if(!n||!r||n.length!=r.length)return!1;let a;for(let l=0;l<n.length;l++)if(a=n[l],!dE(e[a],t[a]))return!1;return!0}function Op(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function dE(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((a,l)=>r[l]===a)}else return e===t}function fE(e){return e.length>0?e[e.length-1]:null}function xr(e){return Fd(e)?e:Kr(e)?et(Promise.resolve(e)):ae(e)}var i_={exact:pE,subset:gE},hE={exact:o_,subset:s_,ignored:()=>!0};function rE(e,t,n){return i_[n.paths](e.root,t.root,n.matrixParams)&&hE[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function o_(e,t){return Qn(e,t)}function pE(e,t,n){if(!zi(e.segments,t.segments)||!cu(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!pE(e.children[r],t.children[r],n))return!1;return!0}function s_(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>dE(e[n],t[n]))}function gE(e,t,n){return mE(e,t,t.segments,n)}function mE(e,t,n,r){if(e.segments.length>n.length){let a=e.segments.slice(0,n.length);return!(!zi(a,n)||t.hasChildren()||!cu(a,n,r))}else if(e.segments.length===n.length){if(!zi(e.segments,n)||!cu(e.segments,n,r))return!1;for(let a in t.children)if(!e.children[a]||!gE(e.children[a],t.children[a],r))return!1;return!0}else{let a=n.slice(0,e.segments.length),l=n.slice(e.segments.length);return!zi(e.segments,a)||!cu(e.segments,a,r)||!e.children[fe]?!1:mE(e.children[fe],t,l,r)}}function cu(e,t,n){return t.every((r,a)=>hE[n](e[a].parameters,r.parameters))}var Jn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Le([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Wi(this.queryParams),this._queryParamMap}toString(){return l_.serialize(this)}},Le=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lu(this)}},ri=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Wi(this.parameters),this._parameterMap}toString(){return EE(this)}};function a_(e,t){return zi(e,t)&&e.every((n,r)=>Qn(n.parameters,t[r].parameters))}function zi(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function c_(e,t){let n=[];return Object.entries(e.children).forEach(([r,a])=>{r===fe&&(n=n.concat(t(a,r)))}),Object.entries(e.children).forEach(([r,a])=>{r!==fe&&(n=n.concat(t(a,r)))}),n}var _a=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>new $i,providedIn:"root"})}return e})(),$i=class{parse(t){let n=new Pp(t);return new Jn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${fa(t.root,!0)}`,r=f_(t.queryParams),a=typeof t.fragment=="string"?`#${u_(t.fragment)}`:"";return`${n}${r}${a}`}},l_=new $i;function lu(e){return e.segments.map(t=>EE(t)).join("/")}function fa(e,t){if(!e.hasChildren())return lu(e);if(t){let n=e.children[fe]?fa(e.children[fe],!1):"",r=[];return Object.entries(e.children).forEach(([a,l])=>{a!==fe&&r.push(`${a}:${fa(l,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=c_(e,(r,a)=>a===fe?[fa(e.children[fe],!1)]:[`${a}:${fa(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[fe]!=null?`${lu(e)}/${n[0]}`:`${lu(e)}/(${n.join("//")})`}}function yE(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function su(e){return yE(e).replace(/%3B/gi,";")}function u_(e){return encodeURI(e)}function Fp(e){return yE(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function uu(e){return decodeURIComponent(e)}function iE(e){return uu(e.replace(/\+/g,"%20"))}function EE(e){return`${Fp(e.path)}${d_(e.parameters)}`}function d_(e){return Object.entries(e).map(([t,n])=>`;${Fp(t)}=${Fp(n)}`).join("")}function f_(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(a=>`${su(n)}=${su(a)}`).join("&"):`${su(n)}=${su(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var h_=/^[^\/()?;#]+/;function Sp(e){let t=e.match(h_);return t?t[0]:""}var p_=/^[^\/()?;=#]+/;function g_(e){let t=e.match(p_);return t?t[0]:""}var m_=/^[^=?&#]+/;function y_(e){let t=e.match(m_);return t?t[0]:""}var E_=/^[^&#]+/;function v_(e){let t=e.match(E_);return t?t[0]:""}var Pp=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[fe]=new Le(t,n)),r}parseSegment(){let t=Sp(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(t),new ri(uu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=g_(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=Sp(this.remaining);a&&(r=a,this.capture(r))}t[uu(n)]=uu(r)}parseQueryParam(t){let n=y_(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let h=v_(this.remaining);h&&(r=h,this.capture(r))}let a=iE(n),l=iE(r);if(t.hasOwnProperty(a)){let h=t[a];Array.isArray(h)||(h=[h],t[a]=h),h.push(l)}else t[a]=l}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Sp(this.remaining),a=this.remaining[r.length];if(a!=="/"&&a!==")"&&a!==";")throw new Q(4010,!1);let l;r.indexOf(":")>-1?(l=r.slice(0,r.indexOf(":")),this.capture(l),this.capture(":")):t&&(l=fe);let h=this.parseChildren();n[l]=Object.keys(h).length===1?h[fe]:new Le([],h),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Q(4011,!1)}};function vE(e){return e.segments.length>0?new Le([],{[fe]:e}):e}function CE(e){let t={};for(let[r,a]of Object.entries(e.children)){let l=CE(a);if(r===fe&&l.segments.length===0&&l.hasChildren())for(let[h,g]of Object.entries(l.children))t[h]=g;else(l.segments.length>0||l.hasChildren())&&(t[r]=l)}let n=new Le(e.segments,t);return C_(n)}function C_(e){if(e.numberOfChildren===1&&e.children[fe]){let t=e.children[fe];return new Le(e.segments.concat(t.segments),t.children)}return e}function Uo(e){return e instanceof Jn}function wE(e,t,n=null,r=null){let a=xE(e);return IE(a,t,n,r)}function xE(e){let t;function n(l){let h={};for(let E of l.children){let v=n(E);h[E.outlet]=v}let g=new Le(l.url,h);return l===e&&(t=g),g}let r=n(e.root),a=vE(r);return t??a}function IE(e,t,n,r){let a=e;for(;a.parent;)a=a.parent;if(t.length===0)return Tp(a,a,a,n,r);let l=w_(t);if(l.toRoot())return Tp(a,a,new Le([],{}),n,r);let h=x_(l,a,e),g=h.processChildren?pa(h.segmentGroup,h.index,l.commands):AE(h.segmentGroup,h.index,l.commands);return Tp(a,h.segmentGroup,g,n,r)}function du(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ya(e){return typeof e=="object"&&e!=null&&e.outlets}function Tp(e,t,n,r,a){let l={};r&&Object.entries(r).forEach(([E,v])=>{l[E]=Array.isArray(v)?v.map(x=>`${x}`):`${v}`});let h;e===t?h=n:h=DE(e,t,n);let g=vE(CE(h));return new Jn(g,l,a)}function DE(e,t,n){let r={};return Object.entries(e.children).forEach(([a,l])=>{l===t?r[a]=n:r[a]=DE(l,t,n)}),new Le(e.segments,r)}var fu=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&du(r[0]))throw new Q(4003,!1);let a=r.find(ya);if(a&&a!==fE(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function w_(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new fu(!0,0,e);let t=0,n=!1,r=e.reduce((a,l,h)=>{if(typeof l=="object"&&l!=null){if(l.outlets){let g={};return Object.entries(l.outlets).forEach(([E,v])=>{g[E]=typeof v=="string"?v.split("/"):v}),[...a,{outlets:g}]}if(l.segmentPath)return[...a,l.segmentPath]}return typeof l!="string"?[...a,l]:h===0?(l.split("/").forEach((g,E)=>{E==0&&g==="."||(E==0&&g===""?n=!0:g===".."?t++:g!=""&&a.push(g))}),a):[...a,l]},[]);return new fu(n,t,r)}var Vo=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function x_(e,t,n){if(e.isAbsolute)return new Vo(t,!0,0);if(!n)return new Vo(t,!1,NaN);if(n.parent===null)return new Vo(n,!0,0);let r=du(e.commands[0])?0:1,a=n.segments.length-1+r;return I_(n,a,e.numberOfDoubleDots)}function I_(e,t,n){let r=e,a=t,l=n;for(;l>a;){if(l-=a,r=r.parent,!r)throw new Q(4005,!1);a=r.segments.length}return new Vo(r,!1,a-l)}function D_(e){return ya(e[0])?e[0].outlets:{[fe]:e}}function AE(e,t,n){if(e??=new Le([],{}),e.segments.length===0&&e.hasChildren())return pa(e,t,n);let r=A_(e,t,n),a=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let l=new Le(e.segments.slice(0,r.pathIndex),{});return l.children[fe]=new Le(e.segments.slice(r.pathIndex),e.children),pa(l,0,a)}else return r.match&&a.length===0?new Le(e.segments,{}):r.match&&!e.hasChildren()?Lp(e,t,n):r.match?pa(e,0,a):Lp(e,t,n)}function pa(e,t,n){if(n.length===0)return new Le(e.segments,{});{let r=D_(n),a={};if(Object.keys(r).some(l=>l!==fe)&&e.children[fe]&&e.numberOfChildren===1&&e.children[fe].segments.length===0){let l=pa(e.children[fe],t,n);return new Le(e.segments,l.children)}return Object.entries(r).forEach(([l,h])=>{typeof h=="string"&&(h=[h]),h!==null&&(a[l]=AE(e.children[l],t,h))}),Object.entries(e.children).forEach(([l,h])=>{r[l]===void 0&&(a[l]=h)}),new Le(e.segments,a)}}function A_(e,t,n){let r=0,a=t,l={match:!1,pathIndex:0,commandIndex:0};for(;a<e.segments.length;){if(r>=n.length)return l;let h=e.segments[a],g=n[r];if(ya(g))break;let E=`${g}`,v=r<n.length-1?n[r+1]:null;if(a>0&&E===void 0)break;if(E&&v&&typeof v=="object"&&v.outlets===void 0){if(!sE(E,v,h))return l;r+=2}else{if(!sE(E,{},h))return l;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}function Lp(e,t,n){let r=e.segments.slice(0,t),a=0;for(;a<n.length;){let l=n[a];if(ya(l)){let E=b_(l.outlets);return new Le(r,E)}if(a===0&&du(n[0])){let E=e.segments[t];r.push(new ri(E.path,oE(n[0]))),a++;continue}let h=ya(l)?l.outlets[fe]:`${l}`,g=a<n.length-1?n[a+1]:null;h&&g&&du(g)?(r.push(new ri(h,oE(g))),a+=2):(r.push(new ri(h,{})),a++)}return new Le(r,{})}function b_(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Lp(new Le([],{}),0,r))}),t}function oE(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function sE(e,t,n){return e==n.path&&Qn(t,n.parameters)}var ga="imperative",xt=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(xt||{}),pn=class{id;url;constructor(t,n){this.id=t,this.url=n}},Yi=class extends pn{type=xt.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",a=null){super(t,n),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Cr=class extends pn{urlAfterRedirects;type=xt.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e}(zt||{}),Ea=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Ea||{}),Kn=class extends pn{reason;code;type=xt.NavigationCancel;constructor(t,n,r,a){super(t,n),this.reason=r,this.code=a}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wr=class extends pn{reason;code;type=xt.NavigationSkipped;constructor(t,n,r,a){super(t,n),this.reason=r,this.code=a}},Ho=class extends pn{error;target;type=xt.NavigationError;constructor(t,n,r,a){super(t,n),this.error=r,this.target=a}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},va=class extends pn{urlAfterRedirects;state;type=xt.RoutesRecognized;constructor(t,n,r,a){super(t,n),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hu=class extends pn{urlAfterRedirects;state;type=xt.GuardsCheckStart;constructor(t,n,r,a){super(t,n),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pu=class extends pn{urlAfterRedirects;state;shouldActivate;type=xt.GuardsCheckEnd;constructor(t,n,r,a,l){super(t,n),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},gu=class extends pn{urlAfterRedirects;state;type=xt.ResolveStart;constructor(t,n,r,a){super(t,n),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mu=class extends pn{urlAfterRedirects;state;type=xt.ResolveEnd;constructor(t,n,r,a){super(t,n),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yu=class{route;type=xt.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Eu=class{route;type=xt.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},vu=class{snapshot;type=xt.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cu=class{snapshot;type=xt.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wu=class{snapshot;type=xt.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xu=class{snapshot;type=xt.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ca=class{},zo=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function __(e){return!(e instanceof Ca)&&!(e instanceof zo)}function S_(e,t){return e.providers&&!e._injector&&(e._injector=Ws(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Bn(e){return e.outlet||fe}function T_(e,t){let n=e.filter(r=>Bn(r)===t);return n.push(...e.filter(r=>Bn(r)!==t)),n}function Sa(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Iu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Sa(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new $o(this.rootInjector)}},$o=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let a=this.getOrCreateContext(n);a.outlet=r,this.contexts.set(n,a)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Iu(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(se(gt))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Du=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=kp(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=kp(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Bp(t,this._root);return n.length<2?[]:n[n.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return Bp(t,this._root).map(n=>n.value)}};function kp(e,t){if(e===t.value)return t;for(let n of t.children){let r=kp(e,n);if(r)return r}return null}function Bp(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Bp(e,n);if(r.length)return r.unshift(t),r}return[]}var hn=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Bo(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var wa=class extends Du{snapshot;constructor(t,n){super(t),this.snapshot=n,$p(this,t)}toString(){return this.snapshot.toString()}};function bE(e){let t=M_(e),n=new St([new ri("",{})]),r=new St({}),a=new St({}),l=new St({}),h=new St(""),g=new ii(n,r,l,h,a,fe,e,t.root);return g.snapshot=t.root,new wa(new hn(g,[]),t)}function M_(e){let t={},n={},r={},a="",l=new Gi([],t,r,a,n,fe,e,null,{});return new xa("",new hn(l,[]))}var ii=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,a,l,h,g,E){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=a,this.dataSubject=l,this.outlet=h,this.component=g,this._futureSnapshot=E,this.title=this.dataSubject?.pipe(pe(v=>v[ba]))??ae(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=a,this.data=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(t=>Wi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(t=>Wi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Au(e,t,n="emptyOnly"){let r,{routeConfig:a}=e;return t!==null&&(n==="always"||a?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:$($({},t.params),e.params),data:$($({},t.data),e.data),resolve:$($($($({},e.data),t.data),a?.data),e._resolvedData)}:r={params:$({},e.params),data:$({},e.data),resolve:$($({},e.data),e._resolvedData??{})},a&&SE(a)&&(r.resolve[ba]=a.title),r}var Gi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ba]}constructor(t,n,r,a,l,h,g,E,v){this.url=t,this.params=n,this.queryParams=r,this.fragment=a,this.data=l,this.outlet=h,this.component=g,this.routeConfig=E,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Wi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Wi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},xa=class extends Du{url;constructor(t,n){super(n),this.url=t,$p(this,n)}toString(){return _E(this._root)}};function $p(e,t){t.value._routerState=e,t.children.forEach(n=>$p(e,n))}function _E(e){let t=e.children.length>0?` { ${e.children.map(_E).join(", ")} } `:"";return`${e.value}${t}`}function Mp(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Qn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Qn(t.params,n.params)||e.paramsSubject.next(n.params),r_(t.url,n.url)||e.urlSubject.next(n.url),Qn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Vp(e,t){let n=Qn(e.params,t.params)&&a_(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Vp(e.parent,t.parent))}function SE(e){return typeof e.title=="string"||e.title===null}var TE=new K(""),Ta=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=fe;activateEvents=new mt;deactivateEvents=new mt;attachEvents=new mt;detachEvents=new mt;routerOutletData=Ey(void 0);parentContexts=B($o);location=B(ki);changeDetector=B(ta);inputBinder=B(Tu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:a}=n.name;if(r)return;this.isTrackedInParentContexts(a)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(a)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=n;let a=this.location,h=n.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,E=new jp(n,g,a.injector,this.routerOutletData);this.activated=a.createComponent(h,{index:a.length,injector:E,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Nt({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[To]})}return e})(),jp=class{route;childContexts;parent;outletData;constructor(t,n,r,a){this.route=t,this.childContexts=n,this.parent=r,this.outletData=a}get(t,n){return t===ii?this.route:t===$o?this.childContexts:t===TE?this.outletData:this.parent.get(t,n)}},Tu=new K("");var Yp=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=$s({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,a){r&1&&mr(0,"router-outlet")},dependencies:[Ta],encapsulation:2})}return e})();function qp(e){let t=e.children&&e.children.map(qp),n=t?ve($({},e),{children:t}):$({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==fe&&(n.component=Yp),n}function N_(e,t,n){let r=Ia(e,t._root,n?n._root:void 0);return new wa(r,t)}function Ia(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let a=R_(e,t,n);return new hn(r,a)}else{if(e.shouldAttach(t.value)){let l=e.retrieve(t.value);if(l!==null){let h=l.route;return h.value._futureSnapshot=t.value,h.children=t.children.map(g=>Ia(e,g)),h}}let r=O_(t.value),a=t.children.map(l=>Ia(e,l));return new hn(r,a)}}function R_(e,t,n){return t.children.map(r=>{for(let a of n.children)if(e.shouldReuseRoute(r.value,a.value.snapshot))return Ia(e,r,a);return Ia(e,r)})}function O_(e){return new ii(new St(e.url),new St(e.params),new St(e.queryParams),new St(e.fragment),new St(e.data),e.outlet,e.component,e)}var Go=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},ME="ngNavigationCancelingError";function bu(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Uo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,a=NE(!1,zt.Redirect);return a.url=n,a.navigationBehaviorOptions=r,a}function NE(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[ME]=!0,n.cancellationCode=t,n}function F_(e){return RE(e)&&Uo(e.url)}function RE(e){return!!e&&e[ME]}var P_=(e,t,n,r)=>pe(a=>(new Up(t,a.targetRouterState,a.currentRouterState,n,r).activate(e),a)),Up=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,a,l){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=a,this.inputBindingEnabled=l}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Mp(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let a=Bo(n);t.children.forEach(l=>{let h=l.value.outlet;this.deactivateRoutes(l,a[h],r),delete a[h]}),Object.values(a).forEach(l=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(t,n,r){let a=t.value,l=n?n.value:null;if(a===l)if(a.component){let h=r.getContext(a.outlet);h&&this.deactivateChildRoutes(t,n,h.children)}else this.deactivateChildRoutes(t,n,r);else l&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),a=r&&t.value.component?r.children:n,l=Bo(t);for(let h of Object.values(l))this.deactivateRouteAndItsChildren(h,a);if(r&&r.outlet){let h=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:h,route:t,contexts:g})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),a=r&&t.value.component?r.children:n,l=Bo(t);for(let h of Object.values(l))this.deactivateRouteAndItsChildren(h,a);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let a=Bo(n);t.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],r),this.forwardEvent(new xu(l.value.snapshot))}),t.children.length&&this.forwardEvent(new Cu(t.value.snapshot))}activateRoutes(t,n,r){let a=t.value,l=n?n.value:null;if(Mp(a),a===l)if(a.component){let h=r.getOrCreateContext(a.outlet);this.activateChildRoutes(t,n,h.children)}else this.activateChildRoutes(t,n,r);else if(a.component){let h=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){let g=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(g.contexts),h.attachRef=g.componentRef,h.route=g.route.value,h.outlet&&h.outlet.attach(g.componentRef,g.route.value),Mp(g.route.value),this.activateChildRoutes(t,null,h.children)}else h.attachRef=null,h.route=a,h.outlet&&h.outlet.activateWith(a,h.injector),this.activateChildRoutes(t,null,h.children)}else this.activateChildRoutes(t,null,r)}},_u=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},jo=class{component;route;constructor(t,n){this.component=t,this.route=n}};function L_(e,t,n){let r=e._root,a=t?t._root:null;return ha(r,a,n,[r.value])}function k_(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Yo(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!ef(e)?e:t.get(e):r}function ha(e,t,n,r,a={canDeactivateChecks:[],canActivateChecks:[]}){let l=Bo(t);return e.children.forEach(h=>{B_(h,l[h.value.outlet],n,r.concat([h.value]),a),delete l[h.value.outlet]}),Object.entries(l).forEach(([h,g])=>ma(g,n.getContext(h),a)),a}function B_(e,t,n,r,a={canDeactivateChecks:[],canActivateChecks:[]}){let l=e.value,h=t?t.value:null,g=n?n.getContext(e.value.outlet):null;if(h&&l.routeConfig===h.routeConfig){let E=V_(h,l,l.routeConfig.runGuardsAndResolvers);E?a.canActivateChecks.push(new _u(r)):(l.data=h.data,l._resolvedData=h._resolvedData),l.component?ha(e,t,g?g.children:null,r,a):ha(e,t,n,r,a),E&&g&&g.outlet&&g.outlet.isActivated&&a.canDeactivateChecks.push(new jo(g.outlet.component,h))}else h&&ma(t,g,a),a.canActivateChecks.push(new _u(r)),l.component?ha(e,null,g?g.children:null,r,a):ha(e,null,n,r,a);return a}function V_(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!zi(e.url,t.url);case"pathParamsOrQueryParamsChange":return!zi(e.url,t.url)||!Qn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vp(e,t)||!Qn(e.queryParams,t.queryParams);case"paramsChange":default:return!Vp(e,t)}}function ma(e,t,n){let r=Bo(e),a=e.value;Object.entries(r).forEach(([l,h])=>{a.component?t?ma(h,t.children.getContext(l),n):ma(h,null,n):ma(h,t,n)}),a.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new jo(t.outlet.component,a)):n.canDeactivateChecks.push(new jo(null,a)):n.canDeactivateChecks.push(new jo(null,a))}function Ma(e){return typeof e=="function"}function j_(e){return typeof e=="boolean"}function U_(e){return e&&Ma(e.canLoad)}function H_(e){return e&&Ma(e.canActivate)}function z_(e){return e&&Ma(e.canActivateChild)}function G_(e){return e&&Ma(e.canDeactivate)}function W_(e){return e&&Ma(e.canMatch)}function OE(e){return e instanceof rr||e?.name==="EmptyError"}var au=Symbol("INITIAL_VALUE");function Wo(){return Kt(e=>Oc(e.map(t=>t.pipe(ir(1),Bd(au)))).pipe(pe(t=>{for(let n of t)if(n!==!0){if(n===au)return au;if(n===!1||$_(n))return n}return!0}),Qt(t=>t!==au),ir(1)))}function $_(e){return Uo(e)||e instanceof Go}function Y_(e,t){return pt(n=>{let{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:h}}=n;return h.length===0&&l.length===0?ae(ve($({},n),{guardsResult:!0})):q_(h,r,a,e).pipe(pt(g=>g&&j_(g)?Z_(r,l,e,t):ae(g)),pe(g=>ve($({},n),{guardsResult:g})))})}function q_(e,t,n,r){return et(e).pipe(pt(a=>eS(a.component,a.route,n,t,r)),or(a=>a!==!0,!0))}function Z_(e,t,n,r){return et(t).pipe(Pr(a=>mo(Q_(a.route.parent,r),X_(a.route,r),J_(e,a.path,n),K_(e,a.route,n))),or(a=>a!==!0,!0))}function X_(e,t){return e!==null&&t&&t(new wu(e)),ae(!0)}function Q_(e,t){return e!==null&&t&&t(new vu(e)),ae(!0)}function K_(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return ae(!0);let a=r.map(l=>ms(()=>{let h=Sa(t)??n,g=Yo(l,h),E=H_(g)?g.canActivate(t,e):Ut(h,()=>g(t,e));return xr(E).pipe(or())}));return ae(a).pipe(Wo())}function J_(e,t,n){let r=t[t.length-1],l=t.slice(0,t.length-1).reverse().map(h=>k_(h)).filter(h=>h!==null).map(h=>ms(()=>{let g=h.guards.map(E=>{let v=Sa(h.node)??n,x=Yo(E,v),b=z_(x)?x.canActivateChild(r,e):Ut(v,()=>x(r,e));return xr(b).pipe(or())});return ae(g).pipe(Wo())}));return ae(l).pipe(Wo())}function eS(e,t,n,r,a){let l=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!l||l.length===0)return ae(!0);let h=l.map(g=>{let E=Sa(t)??a,v=Yo(g,E),x=G_(v)?v.canDeactivate(e,t,n,r):Ut(E,()=>v(e,t,n,r));return xr(x).pipe(or())});return ae(h).pipe(Wo())}function tS(e,t,n,r){let a=t.canLoad;if(a===void 0||a.length===0)return ae(!0);let l=a.map(h=>{let g=Yo(h,e),E=U_(g)?g.canLoad(t,n):Ut(e,()=>g(t,n));return xr(E)});return ae(l).pipe(Wo(),FE(r))}function FE(e){return Md(wt(t=>{if(typeof t!="boolean")throw bu(e,t)}),pe(t=>t===!0))}function nS(e,t,n,r){let a=t.canMatch;if(!a||a.length===0)return ae(!0);let l=a.map(h=>{let g=Yo(h,e),E=W_(g)?g.canMatch(t,n):Ut(e,()=>g(t,n));return xr(E)});return ae(l).pipe(Wo(),FE(r))}var Da=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Aa=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function ko(e){return go(new Da(e))}function rS(e){return go(new Q(4e3,!1))}function iS(e){return go(NE(!1,zt.GuardRejected))}var Hp=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],a=n.root;for(;;){if(r=r.concat(a.segments),a.numberOfChildren===0)return ae(r);if(a.numberOfChildren>1||!a.children[fe])return rS(`${t.redirectTo}`);a=a.children[fe]}}applyRedirectCommands(t,n,r,a,l){return oS(n,a,l).pipe(pe(h=>{if(h instanceof Jn)throw new Aa(h);let g=this.applyRedirectCreateUrlTree(h,this.urlSerializer.parse(h),t,r);if(h[0]==="/")throw new Aa(g);return g}))}applyRedirectCreateUrlTree(t,n,r,a){let l=this.createSegmentGroup(t,n.root,r,a);return new Jn(l,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([a,l])=>{if(typeof l=="string"&&l[0]===":"){let g=l.substring(1);r[a]=n[g]}else r[a]=l}),r}createSegmentGroup(t,n,r,a){let l=this.createSegments(t,n.segments,r,a),h={};return Object.entries(n.children).forEach(([g,E])=>{h[g]=this.createSegmentGroup(t,E,r,a)}),new Le(l,h)}createSegments(t,n,r,a){return n.map(l=>l.path[0]===":"?this.findPosParam(t,l,a):this.findOrReturn(l,r))}findPosParam(t,n,r){let a=r[n.path.substring(1)];if(!a)throw new Q(4001,!1);return a}findOrReturn(t,n){let r=0;for(let a of n){if(a.path===t.path)return n.splice(r),a;r++}return t}};function oS(e,t,n){if(typeof e=="string")return ae(e);let r=e,{queryParams:a,fragment:l,routeConfig:h,url:g,outlet:E,params:v,data:x,title:b}=t;return xr(Ut(n,()=>r({params:v,data:x,queryParams:a,fragment:l,routeConfig:h,url:g,outlet:E,title:b})))}var zp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sS(e,t,n,r,a){let l=PE(e,t,n);return l.matched?(r=S_(t,r),nS(r,t,n,a).pipe(pe(h=>h===!0?l:$({},zp)))):ae(l)}function PE(e,t,n){if(t.path==="**")return aS(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?$({},zp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let a=(t.matcher||uE)(n,e,t);if(!a)return $({},zp);let l={};Object.entries(a.posParams??{}).forEach(([g,E])=>{l[g]=E.path});let h=a.consumed.length>0?$($({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:n.slice(a.consumed.length),parameters:h,positionalParamSegments:a.posParams??{}}}function aS(e){return{matched:!0,parameters:e.length>0?fE(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function aE(e,t,n,r){return n.length>0&&uS(e,n,r)?{segmentGroup:new Le(t,lS(r,new Le(n,e.children))),slicedSegments:[]}:n.length===0&&dS(e,n,r)?{segmentGroup:new Le(e.segments,cS(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Le(e.segments,e.children),slicedSegments:n}}function cS(e,t,n,r){let a={};for(let l of n)if(Mu(e,t,l)&&!r[Bn(l)]){let h=new Le([],{});a[Bn(l)]=h}return $($({},r),a)}function lS(e,t){let n={};n[fe]=t;for(let r of e)if(r.path===""&&Bn(r)!==fe){let a=new Le([],{});n[Bn(r)]=a}return n}function uS(e,t,n){return n.some(r=>Mu(e,t,r)&&Bn(r)!==fe)}function dS(e,t,n){return n.some(r=>Mu(e,t,r))}function Mu(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function fS(e,t,n){return t.length===0&&!e.children[n]}var Gp=class{};function hS(e,t,n,r,a,l,h="emptyOnly"){return new Wp(e,t,n,r,a,h,l).recognize()}var pS=31,Wp=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,a,l,h,g){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=a,this.urlTree=l,this.paramsInheritanceStrategy=h,this.urlSerializer=g,this.applyRedirects=new Hp(this.urlSerializer,this.urlTree)}noMatchError(t){return new Q(4002,`'${t.segmentGroup}'`)}recognize(){let t=aE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(pe(({children:n,rootSnapshot:r})=>{let a=new hn(r,n),l=new xa("",a),h=wE(r,[],this.urlTree.queryParams,this.urlTree.fragment);return h.queryParams=this.urlTree.queryParams,l.url=this.urlSerializer.serialize(h),{state:l,tree:h}}))}match(t){let n=new Gi([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,fe,n).pipe(pe(r=>({children:r,rootSnapshot:n})),Fr(r=>{if(r instanceof Aa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Da?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,a,l){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,l):this.processSegment(t,n,r,r.segments,a,!0,l).pipe(pe(h=>h instanceof hn?[h]:[]))}processChildren(t,n,r,a){let l=[];for(let h of Object.keys(r.children))h==="primary"?l.unshift(h):l.push(h);return et(l).pipe(Pr(h=>{let g=r.children[h],E=T_(n,h);return this.processSegmentGroup(t,E,g,h,a)}),kd((h,g)=>(h.push(...g),h)),Lr(null),Ld(),pt(h=>{if(h===null)return ko(r);let g=LE(h);return gS(g),ae(g)}))}processSegment(t,n,r,a,l,h,g){return et(n).pipe(Pr(E=>this.processSegmentAgainstRoute(E._injector??t,n,E,r,a,l,h,g).pipe(Fr(v=>{if(v instanceof Da)return ae(null);throw v}))),or(E=>!!E),Fr(E=>{if(OE(E))return fS(r,a,l)?ae(new Gp):ko(r);throw E}))}processSegmentAgainstRoute(t,n,r,a,l,h,g,E){return Bn(r)!==h&&(h===fe||!Mu(a,l,r))?ko(a):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,a,r,l,h,E):this.allowRedirects&&g?this.expandSegmentAgainstRouteUsingRedirect(t,a,n,r,l,h,E):ko(a)}expandSegmentAgainstRouteUsingRedirect(t,n,r,a,l,h,g){let{matched:E,parameters:v,consumedSegments:x,positionalParamSegments:b,remainingSegments:O}=PE(n,a,l);if(!E)return ko(n);typeof a.redirectTo=="string"&&a.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>pS&&(this.allowRedirects=!1));let T=new Gi(l,v,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,cE(a),Bn(a),a.component??a._loadedComponent??null,a,lE(a)),j=Au(T,g,this.paramsInheritanceStrategy);return T.params=Object.freeze(j.params),T.data=Object.freeze(j.data),this.applyRedirects.applyRedirectCommands(x,a.redirectTo,b,T,t).pipe(Kt(H=>this.applyRedirects.lineralizeSegments(a,H)),pt(H=>this.processSegment(t,r,n,H.concat(O),h,!1,g)))}matchSegmentAgainstRoute(t,n,r,a,l,h){let g=sS(n,r,a,t,this.urlSerializer);return r.path==="**"&&(n.children={}),g.pipe(Kt(E=>E.matched?(t=r._injector??t,this.getChildConfig(t,r,a).pipe(Kt(({routes:v})=>{let x=r._loadedInjector??t,{parameters:b,consumedSegments:O,remainingSegments:T}=E,j=new Gi(O,b,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,cE(r),Bn(r),r.component??r._loadedComponent??null,r,lE(r)),W=Au(j,h,this.paramsInheritanceStrategy);j.params=Object.freeze(W.params),j.data=Object.freeze(W.data);let{segmentGroup:H,slicedSegments:U}=aE(n,O,T,v);if(U.length===0&&H.hasChildren())return this.processChildren(x,v,H,j).pipe(pe(ke=>new hn(j,ke)));if(v.length===0&&U.length===0)return ae(new hn(j,[]));let ye=Bn(r)===l;return this.processSegment(x,v,H,U,ye?fe:l,!0,j).pipe(pe(ke=>new hn(j,ke instanceof hn?[ke]:[])))}))):ko(n)))}getChildConfig(t,n,r){return n.children?ae({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?ae({routes:n._loadedRoutes,injector:n._loadedInjector}):tS(t,n,r,this.urlSerializer).pipe(pt(a=>a?this.configLoader.loadChildren(t,n).pipe(wt(l=>{n._loadedRoutes=l.routes,n._loadedInjector=l.injector})):iS(n))):ae({routes:[],injector:t})}};function gS(e){e.sort((t,n)=>t.value.outlet===fe?-1:n.value.outlet===fe?1:t.value.outlet.localeCompare(n.value.outlet))}function mS(e){let t=e.value.routeConfig;return t&&t.path===""}function LE(e){let t=[],n=new Set;for(let r of e){if(!mS(r)){t.push(r);continue}let a=t.find(l=>r.value.routeConfig===l.value.routeConfig);a!==void 0?(a.children.push(...r.children),n.add(a)):t.push(r)}for(let r of n){let a=LE(r.children);t.push(new hn(r.value,a))}return t.filter(r=>!n.has(r))}function cE(e){return e.data||{}}function lE(e){return e.resolve||{}}function yS(e,t,n,r,a,l){return pt(h=>hS(e,t,n,r,h.extractedUrl,a,l).pipe(pe(({state:g,tree:E})=>ve($({},h),{targetSnapshot:g,urlAfterRedirects:E}))))}function ES(e,t){return pt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:a}}=n;if(!a.length)return ae(n);let l=new Set(a.map(E=>E.route)),h=new Set;for(let E of l)if(!h.has(E))for(let v of kE(E))h.add(v);let g=0;return et(h).pipe(Pr(E=>l.has(E)?vS(E,r,e,t):(E.data=Au(E,E.parent,e).resolve,ae(void 0))),wt(()=>g++),yo(1),pt(E=>g===h.size?ae(n):Zt))})}function kE(e){let t=e.children.map(n=>kE(n)).flat();return[e,...t]}function vS(e,t,n,r){let a=e.routeConfig,l=e._resolve;return a?.title!==void 0&&!SE(a)&&(l[ba]=a.title),ms(()=>(e.data=Au(e,e.parent,n).resolve,CS(l,e,t,r).pipe(pe(h=>(e._resolvedData=h,e.data=$($({},e.data),h),null)))))}function CS(e,t,n,r){let a=Op(e);if(a.length===0)return ae({});let l={};return et(a).pipe(pt(h=>wS(e[h],t,n,r).pipe(or(),wt(g=>{if(g instanceof Go)throw bu(new $i,g);l[h]=g}))),yo(1),pe(()=>l),Fr(h=>OE(h)?Zt:go(h)))}function wS(e,t,n,r){let a=Sa(t)??r,l=Yo(e,a),h=l.resolve?l.resolve(t,n):Ut(a,()=>l(t,n));return xr(h)}function Np(e){return Kt(t=>{let n=e(t);return n?et(n).pipe(pe(()=>t)):ae(t)})}var Zp=(()=>{class e{buildTitle(n){let r,a=n.root;for(;a!==void 0;)r=this.getResolvedTitleForRoute(a)??r,a=a.children.find(l=>l.outlet===fe);return r}getResolvedTitleForRoute(n){return n.data[ba]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>B(BE),providedIn:"root"})}return e})(),BE=(()=>{class e extends Zp{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(se(nE))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Na=new K("",{providedIn:"root",factory:()=>({})}),Ra=new K(""),VE=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=B(Qh);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ae(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=xr(n.loadComponent()).pipe(pe(UE),wt(l=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=l}),kr(()=>{this.componentLoaders.delete(n)})),a=new po(r,()=>new ht).pipe(ho());return this.componentLoaders.set(n,a),a}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ae({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let l=jE(r,this.compiler,n,this.onLoadEndListener).pipe(kr(()=>{this.childrenLoaders.delete(r)})),h=new po(l,()=>new ht).pipe(ho());return this.childrenLoaders.set(r,h),h}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function jE(e,t,n,r){return xr(e.loadChildren()).pipe(pe(UE),pt(a=>a instanceof Ll||Array.isArray(a)?ae(a):et(t.compileModuleAsync(a))),pe(a=>{r&&r(e);let l,h,g=!1;return Array.isArray(a)?(h=a,g=!0):(l=a.create(n).injector,h=l.get(Ra,[],{optional:!0,self:!0}).flat()),{routes:h.map(qp),injector:l}}))}function xS(e){return e&&typeof e=="object"&&"default"in e}function UE(e){return xS(e)?e.default:e}var Nu=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>B(IS),providedIn:"root"})}return e})(),IS=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),HE=new K("");var zE=new K(""),GE=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ht;transitionAbortWithErrorSubject=new ht;configLoader=B(VE);environmentInjector=B(gt);destroyRef=B(Yr);urlSerializer=B(_a);rootContexts=B($o);location=B(Oo);inputBindingEnabled=B(Tu,{optional:!0})!==null;titleStrategy=B(Zp);options=B(Na,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=B(Nu);createViewTransition=B(HE,{optional:!0});navigationErrorHandler=B(zE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ae(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=a=>this.events.next(new yu(a)),r=a=>this.events.next(new Eu(a));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ve($({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new St(null),this.transitions.pipe(Qt(r=>r!==null),Kt(r=>{let a=!1;return ae(r).pipe(Kt(l=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),Zt;this.currentTransition=r,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ve($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>l.abortController.abort()};let h=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=l.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!h&&g!=="reload"){let E="";return this.events.next(new wr(l.id,this.urlSerializer.serialize(l.rawUrl),E,Ea.IgnoredSameUrlNavigation)),l.resolve(!1),Zt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ae(l).pipe(Kt(E=>(this.events.next(new Yi(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),E.id!==this.navigationId?Zt:Promise.resolve(E))),yS(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),wt(E=>{r.targetSnapshot=E.targetSnapshot,r.urlAfterRedirects=E.urlAfterRedirects,this.currentNavigation=ve($({},this.currentNavigation),{finalUrl:E.urlAfterRedirects});let v=new va(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(v)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:E,extractedUrl:v,source:x,restoredState:b,extras:O}=l,T=new Yi(E,this.urlSerializer.serialize(v),x,b);this.events.next(T);let j=bE(this.rootComponentType).snapshot;return this.currentTransition=r=ve($({},l),{targetSnapshot:j,urlAfterRedirects:v,extras:ve($({},O),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,ae(r)}else{let E="";return this.events.next(new wr(l.id,this.urlSerializer.serialize(l.extractedUrl),E,Ea.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Zt}}),wt(l=>{let h=new hu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),pe(l=>(this.currentTransition=r=ve($({},l),{guards:L_(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),r)),Y_(this.environmentInjector,l=>this.events.next(l)),wt(l=>{if(r.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw bu(this.urlSerializer,l.guardsResult);let h=new pu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Qt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",zt.GuardRejected),!1)),Np(l=>{if(l.guards.canActivateChecks.length!==0)return ae(l).pipe(wt(h=>{let g=new gu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}),Kt(h=>{let g=!1;return ae(h).pipe(ES(this.paramsInheritanceStrategy,this.environmentInjector),wt({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(h,"",zt.NoDataFromResolver)}}))}),wt(h=>{let g=new mu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}))}),Np(l=>{let h=g=>{let E=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(g.routeConfig).pipe(wt(v=>{g.component=v}),pe(()=>{})));for(let v of g.children)E.push(...h(v));return E};return Oc(h(l.targetSnapshot.root)).pipe(Lr(null),ir(1))}),Np(()=>this.afterPreactivation()),Kt(()=>{let{currentSnapshot:l,targetSnapshot:h}=r,g=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return g?et(g).pipe(pe(()=>r)):ae(r)}),pe(l=>{let h=N_(n.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=r=ve($({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,r}),wt(()=>{this.events.next(new Ca)}),P_(this.rootContexts,n.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ir(1),Pc(new Ie(l=>{let h=r.abortController.signal,g=()=>l.next();return h.addEventListener("abort",g),()=>h.removeEventListener("abort",g)}).pipe(Qt(()=>!a&&!r.targetRouterState),wt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",zt.Aborted)}))),wt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Cr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Pc(this.transitionAbortWithErrorSubject.pipe(wt(l=>{throw l}))),kr(()=>{a||this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Fr(l=>{if(this.destroyed)return r.resolve(!1),Zt;if(a=!0,RE(l))this.events.next(new Kn(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode)),F_(l)?this.events.next(new zo(l.url,l.navigationBehaviorOptions)):r.resolve(!1);else{let h=new Ho(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);try{let g=Ut(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(g instanceof Go){let{message:E,cancellationCode:v}=bu(this.urlSerializer,g);this.events.next(new Kn(r.id,this.urlSerializer.serialize(r.extractedUrl),E,v)),this.events.next(new zo(g.redirectTo,g.navigationBehaviorOptions))}else throw this.events.next(h),l}catch(g){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(g)}}return Zt}))}))}cancelNavigationTransition(n,r,a){let l=new Kn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,a);this.events.next(l),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function DS(e){return e!==ga}var WE=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>B(AS),providedIn:"root"})}return e})(),Su=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},AS=(()=>{class e extends Su{static \u0275fac=(()=>{let n;return function(a){return(n||(n=Xr(e)))(a||e)}})();static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),$E=(()=>{class e{urlSerializer=B(_a);options=B(Na,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=B(Oo);urlHandlingStrategy=B(Nu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Jn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:a}){let l=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,h=a??l;return h instanceof Jn?this.urlSerializer.serialize(h):h}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:a}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,a),this.routerState=n):this.rawUrlTree=a}routerState=bE(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>B(bS),providedIn:"root"})}return e})(),bS=(()=>{class e extends $E{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Yi?this.updateStateMemento():n instanceof wr?this.commitTransition(r):n instanceof va?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ca?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Kn&&n.code!==zt.SupersededByNewNavigation&&n.code!==zt.Redirect?this.restoreHistory(r):n instanceof Ho?this.restoreHistory(r,!0):n instanceof Cr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:a}){let{replaceUrl:l,state:h}=r;if(this.location.isCurrentPathEqualTo(n)||l){let g=this.browserPageId,E=$($({},h),this.generateNgRouterState(a,g));this.location.replaceState(n,"",E)}else{let g=$($({},h),this.generateNgRouterState(a,this.browserPageId+1));this.location.go(n,"",g)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let a=this.browserPageId,l=this.currentPageId-a;l!==0?this.location.historyGo(l):this.getCurrentUrlTree()===n.finalUrl&&l===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(a){return(n||(n=Xr(e)))(a||e)}})();static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Xp(e,t){e.events.pipe(Qt(n=>n instanceof Cr||n instanceof Kn||n instanceof Ho||n instanceof wr),pe(n=>n instanceof Cr||n instanceof wr?0:(n instanceof Kn?n.code===zt.Redirect||n.code===zt.SupersededByNewNavigation:!1)?2:1),Qt(n=>n!==2),ir(1)).subscribe(()=>{t()})}var _S={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ru=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=B(Wh);stateManager=B($E);options=B(Na,{optional:!0})||{};pendingTasks=B(dr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=B(GE);urlSerializer=B(_a);location=B(Oo);urlHandlingStrategy=B(Nu);injector=B(gt);_events=new ht;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=B(WE);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=B(Ra,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!B(Tu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ot;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let a=this.navigationTransitions.currentTransition,l=this.navigationTransitions.currentNavigation;if(a!==null&&l!==null){if(this.stateManager.handleRouterEvent(r,l),r instanceof Kn&&r.code!==zt.Redirect&&r.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Cr)this.navigated=!0;else if(r instanceof zo){let h=r.navigationBehaviorOptions,g=this.urlHandlingStrategy.merge(r.url,a.currentRawUrl),E=$({browserUrl:a.extras.browserUrl,info:a.extras.info,skipLocationChange:a.extras.skipLocationChange,replaceUrl:a.extras.replaceUrl||this.urlUpdateStrategy==="eager"||DS(a.source)},h);this.scheduleNavigation(g,ga,null,E,{resolve:a.resolve,reject:a.reject,promise:a.promise})}}__(r)&&this._events.next(r)}catch(a){this.navigationTransitions.transitionAbortWithErrorSubject.next(a)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ga,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,a)=>{this.navigateToSyncWithBrowser(n,a,r)})}navigateToSyncWithBrowser(n,r,a){let l={replaceUrl:!0},h=a?.navigationId?a:null;if(a){let E=$({},a);delete E.navigationId,delete E.\u0275routerPageId,Object.keys(E).length!==0&&(l.state=E)}let g=this.parseUrl(n);this.scheduleNavigation(g,r,h,l).catch(E=>{this.injector.get(nn)(E)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(qp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:a,queryParams:l,fragment:h,queryParamsHandling:g,preserveFragment:E}=r,v=E?this.currentUrlTree.fragment:h,x=null;switch(g??this.options.defaultQueryParamsHandling){case"merge":x=$($({},this.currentUrlTree.queryParams),l);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=l||null}x!==null&&(x=this.removeEmptyProps(x));let b;try{let O=a?a.snapshot:this.routerState.snapshot.root;b=xE(O)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),b=this.currentUrlTree.root}return IE(b,n,x,v??null)}navigateByUrl(n,r={skipLocationChange:!1}){let a=Uo(n)?n:this.parseUrl(n),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,ga,null,r)}navigate(n,r={skipLocationChange:!1}){return TS(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let a;if(r===!0?a=$({},_S):r===!1?a=$({},SS):a=r,Uo(n))return rE(this.currentUrlTree,n,a);let l=this.parseUrl(n);return rE(this.currentUrlTree,l,a)}removeEmptyProps(n){return Object.entries(n).reduce((r,[a,l])=>(l!=null&&(r[a]=l),r),{})}scheduleNavigation(n,r,a,l,h){if(this.disposed)return Promise.resolve(!1);let g,E,v;h?(g=h.resolve,E=h.reject,v=h.promise):v=new Promise((b,O)=>{g=b,E=O});let x=this.pendingTasks.add();return Xp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(x))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:l,resolve:g,reject:E,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(b=>Promise.reject(b))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function TS(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new Q(4008,!1)}var NS=new K("");function Qp(e,...t){return lr([{provide:Ra,multi:!0,useValue:e},[],{provide:ii,useFactory:RS,deps:[Ru]},{provide:kl,multi:!0,useFactory:OS},t.map(n=>n.\u0275providers)])}function RS(e){return e.routerState.root}function OS(){let e=B(On);return t=>{let n=e.get(Bi);if(t!==n.components[0])return;let r=e.get(Ru),a=e.get(FS);e.get(PS)===1&&r.initialNavigation(),e.get(LS,null,{optional:!0})?.setUpPreloading(),e.get(NS,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),a.closed||(a.next(),a.complete(),a.unsubscribe())}}var FS=new K("",{factory:()=>new ht}),PS=new K("",{providedIn:"root",factory:()=>1});var LS=new K("");var YE=[];var qE={providers:[Lf(),Jh({eventCoalescing:!0}),Qp(YE)]};var Z=function(e){return e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",e}(Z||{}),ZE=new Map([[Z.QR_CODE,"QR_CODE"],[Z.AZTEC,"AZTEC"],[Z.CODABAR,"CODABAR"],[Z.CODE_39,"CODE_39"],[Z.CODE_93,"CODE_93"],[Z.CODE_128,"CODE_128"],[Z.DATA_MATRIX,"DATA_MATRIX"],[Z.MAXICODE,"MAXICODE"],[Z.ITF,"ITF"],[Z.EAN_13,"EAN_13"],[Z.EAN_8,"EAN_8"],[Z.PDF_417,"PDF_417"],[Z.RSS_14,"RSS_14"],[Z.RSS_EXPANDED,"RSS_EXPANDED"],[Z.UPC_A,"UPC_A"],[Z.UPC_E,"UPC_E"],[Z.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function XE(e){return Object.values(Z).includes(e)}var er=function(e){return e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",e}(er||{}),rn=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[er.SCAN_TYPE_CAMERA,er.SCAN_TYPE_FILE],e}();var Ou=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!ZE.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,ZE.get(t))},e}();var Kp=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}();var QE=function(e){return e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",e}(QE||{}),Fu=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:QE.UNKWOWN_ERROR}},e}();var Pu=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Dn(e){return typeof e>"u"||e===null}function KE(e,t,n){return e>n?n:e<t?t:e}var oi=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}();var Me=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}();var Jp=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}();var eg=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),h=Object.keys(t),g=0,E=h;g<E.length;g++){var v=E[g];if(l.has(v))return n.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},e}();var Ve=$C(ev());var tg=function(){function e(t,n,r){if(this.formatMap=new Map([[Z.QR_CODE,Ve.BarcodeFormat.QR_CODE],[Z.AZTEC,Ve.BarcodeFormat.AZTEC],[Z.CODABAR,Ve.BarcodeFormat.CODABAR],[Z.CODE_39,Ve.BarcodeFormat.CODE_39],[Z.CODE_93,Ve.BarcodeFormat.CODE_93],[Z.CODE_128,Ve.BarcodeFormat.CODE_128],[Z.DATA_MATRIX,Ve.BarcodeFormat.DATA_MATRIX],[Z.MAXICODE,Ve.BarcodeFormat.MAXICODE],[Z.ITF,Ve.BarcodeFormat.ITF],[Z.EAN_13,Ve.BarcodeFormat.EAN_13],[Z.EAN_8,Ve.BarcodeFormat.EAN_8],[Z.PDF_417,Ve.BarcodeFormat.PDF_417],[Z.RSS_14,Ve.BarcodeFormat.RSS_14],[Z.RSS_EXPANDED,Ve.BarcodeFormat.RSS_EXPANDED],[Z.UPC_A,Ve.BarcodeFormat.UPC_A],[Z.UPC_E,Ve.BarcodeFormat.UPC_E],[Z.UPC_EAN_EXTENSION,Ve.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Ve)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var a=this.createZXingFormats(t),l=new Map;l.set(Ve.DecodeHintType.POSSIBLE_FORMATS,a),l.set(Ve.DecodeHintType.TRY_HARDER,!1),this.hints=l}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,a){try{r(n.decode(t))}catch(l){a(l)}})},e.prototype.decode=function(t){var n=new Ve.MultiFormatReader(this.verbose,this.hints),r=new Ve.HTMLCanvasElementLuminanceSource(t),a=new Ve.BinaryBitmap(new Ve.HybridBinarizer(r)),l=n.decode(a);return{text:l.text,format:Ou.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,a){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,a=t;r<a.length;r++){var l=a[r];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}();var BS=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(x){try{v(r.next(x))}catch(b){h(b)}}function E(x){try{v(r.throw(x))}catch(b){h(b)}}function v(x){x.done?l(x.value):a(x.value).then(g,E)}v((r=r.apply(e,t||[])).next())})},VS=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(v){return function(x){return E([v,x])}}function E(v){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,v[0]&&(n=0)),n;)try{if(r=1,a&&(l=v[0]&2?a.return:v[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,v[1])).done)return l;switch(a=0,l&&(v=[v[0]&2,l.value]),v[0]){case 0:case 1:l=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,a=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(v[0]===6||v[0]===2)){n=0;continue}if(v[0]===3&&(!l||v[1]>l[0]&&v[1]<l[3])){n.label=v[1];break}if(v[0]===6&&n.label<l[1]){n.label=l[1],l=v;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(v);break}l[2]&&n.ops.pop(),n.trys.pop();continue}v=t.call(e,n)}catch(x){v=[6,x],a=0}finally{r=l=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},ng=function(){function e(t,n,r){if(this.formatMap=new Map([[Z.QR_CODE,"qr_code"],[Z.AZTEC,"aztec"],[Z.CODABAR,"codabar"],[Z.CODE_39,"code_39"],[Z.CODE_93,"code_93"],[Z.CODE_128,"code_128"],[Z.DATA_MATRIX,"data_matrix"],[Z.ITF,"itf"],[Z.EAN_13,"ean_13"],[Z.EAN_8,"ean_8"],[Z.PDF_417,"pdf417"],[Z.UPC_A,"upc_a"],[Z.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return BS(this,void 0,void 0,function(){var n,r;return VS(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:Ou.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,a=0,l=t;a<l.length;a++){var h=l[a],g=h.boundingBox.width*h.boundingBox.height;g>r&&(r=g,n=h)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,a=t;r<a.length;r++){var l=a[r];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,a){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}();var tv=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(x){try{v(r.next(x))}catch(b){h(b)}}function E(x){try{v(r.throw(x))}catch(b){h(b)}}function v(x){x.done?l(x.value):a(x.value).then(g,E)}v((r=r.apply(e,t||[])).next())})},nv=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(v){return function(x){return E([v,x])}}function E(v){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,v[0]&&(n=0)),n;)try{if(r=1,a&&(l=v[0]&2?a.return:v[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,v[1])).done)return l;switch(a=0,l&&(v=[v[0]&2,l.value]),v[0]){case 0:case 1:l=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,a=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(v[0]===6||v[0]===2)){n=0;continue}if(v[0]===3&&(!l||v[1]>l[0]&&v[1]<l[3])){n.label=v[1];break}if(v[0]===6&&n.label<l[1]){n.label=l[1],l=v;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(v);break}l[2]&&n.ops.pop(),n.trys.pop();continue}v=t.call(e,n)}catch(x){v=[6,x],a=0}finally{r=l=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},rv=function(){function e(t,n,r,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&ng.isSupported()?(this.primaryDecoder=new ng(t,r,a),this.secondaryDecoder=new tg(t,r,a)):this.primaryDecoder=new tg(t,r,a)}return e.prototype.decodeAsync=function(t){return tv(this,void 0,void 0,function(){var n;return nv(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return tv(this,void 0,void 0,function(){var n,r;return nv(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(r=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var a=r[n];t+=a}var l=t/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}();var rg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ku=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(x){try{v(r.next(x))}catch(b){h(b)}}function E(x){try{v(r.throw(x))}catch(b){h(b)}}function v(x){x.done?l(x.value):a(x.value).then(g,E)}v((r=r.apply(e,t||[])).next())})},Bu=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(v){return function(x){return E([v,x])}}function E(v){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,v[0]&&(n=0)),n;)try{if(r=1,a&&(l=v[0]&2?a.return:v[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,v[1])).done)return l;switch(a=0,l&&(v=[v[0]&2,l.value]),v[0]){case 0:case 1:l=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,a=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(v[0]===6||v[0]===2)){n=0;continue}if(v[0]===3&&(!l||v[1]>l[0]&&v[1]<l[3])){n.label=v[1];break}if(v[0]===6&&n.label<l[1]){n.label=l[1],l=v;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(v);break}l[2]&&n.ops.pop(),n.trys.pop();continue}v=t.call(e,n)}catch(x){v=[6,x],a=0}finally{r=l=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},iv=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),jS=function(e){rg(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var a={advanced:[r]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(iv),US=function(e){rg(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(jS),HS=function(e){rg(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(iv),zS=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new US(this.track)},e.prototype.torchFeature=function(){return new HS(this.track)},e}(),GS=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,a),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,a){return ku(this,void 0,void 0,function(){var l,h;return Bu(this,function(g){switch(g.label){case 0:return l=new e(t,n,a),r.aspectRatio?(h={aspectRatio:r.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:g.sent(),g.label=2;case 2:return l.setupSurface(),[2,l]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return ku(this,void 0,void 0,function(){return Bu(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var a=t.mediaStream.getVideoTracks(),l=a.length,h=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++h,h>=l&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new zS(this.getFirstTrackOrFail())},e}(),ov=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return ku(this,void 0,void 0,function(){return Bu(this,function(a){return[2,GS.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return ku(this,void 0,void 0,function(){var n,r;return Bu(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=a.sent(),[2,new e(r)]}})})},e}();var sv=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(x){try{v(r.next(x))}catch(b){h(b)}}function E(x){try{v(r.throw(x))}catch(b){h(b)}}function v(x){x.done?l(x.value):a(x.value).then(g,E)}v((r=r.apply(e,t||[])).next())})},av=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(v){return function(x){return E([v,x])}}function E(v){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,v[0]&&(n=0)),n;)try{if(r=1,a&&(l=v[0]&2?a.return:v[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,v[1])).done)return l;switch(a=0,l&&(v=[v[0]&2,l.value]),v[0]){case 0:case 1:l=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,a=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(v[0]===6||v[0]===2)){n=0;continue}if(v[0]===3&&(!l||v[1]>l[0]&&v[1]<l[3])){n.label=v[1];break}if(v[0]===6&&n.label<l[1]){n.label=l[1],l=v;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(v);break}l[2]&&n.ops.pop(),n.trys.pop();continue}v=t.call(e,n)}catch(x){v=[6,x],a=0}finally{r=l=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},cv=function(){function e(){}return e.failIfNotSupported=function(){return sv(this,void 0,void 0,function(){return av(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return sv(this,void 0,void 0,function(){return av(this,function(n){return[2,ov.create(t)]})})},e}();var WS=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(x){try{v(r.next(x))}catch(b){h(b)}}function E(x){try{v(r.throw(x))}catch(b){h(b)}}function v(x){x.done?l(x.value):a(x.value).then(g,E)}v((r=r.apply(e,t||[])).next())})},$S=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(v){return function(x){return E([v,x])}}function E(v){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,v[0]&&(n=0)),n;)try{if(r=1,a&&(l=v[0]&2?a.return:v[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,v[1])).done)return l;switch(a=0,l&&(v=[v[0]&2,l.value]),v[0]){case 0:case 1:l=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,a=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(v[0]===6||v[0]===2)){n=0;continue}if(v[0]===3&&(!l||v[1]>l[0]&&v[1]<l[3])){n.label=v[1];break}if(v[0]===6&&n.label<l[1]){n.label=l[1],l=v;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(v);break}l[2]&&n.ops.pop(),n.trys.pop();continue}v=t.call(e,n)}catch(x){v=[6,x],a=0}finally{r=l=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},lv=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=oi.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=oi.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return WS(this,void 0,void 0,function(){var t,n,r,a,l,h,g;return $S(this,function(E){switch(E.label){case 0:return t=function(v){for(var x=v.getVideoTracks(),b=0,O=x;b<O.length;b++){var T=O[b];T.enabled=!1,T.stop(),v.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=E.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=E.sent(),a=[],l=0,h=r;l<h.length;l++)g=h[l],g.kind==="videoinput"&&a.push({id:g.deviceId,label:g.label});return t(n),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(l){for(var h=[],g=0,E=l;g<E.length;g++){var v=E[g];v.kind==="video"&&h.push({id:v.id,label:v.label})}t(h)},a=MediaStreamTrack;a.getSources(r)})},e}();var Qe=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED",e}(Qe||{}),YS=function(){function e(){this.state=Qe.NOT_STARTED,this.onGoingTransactionNewState=Qe.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Qe.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Qe.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Qe.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Qe.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Qe.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Qe.UNKNOWN:throw"Transition from unknown is not allowed";case Qe.NOT_STARTED:this.failIfNewStateIs(t,[Qe.PAUSED]);break;case Qe.SCANNING:break;case Qe.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,a=n;r<a.length;r++){var l=a[r];if(t===l)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),qS=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Qe.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Qe.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Qe.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Qe.PAUSED},e}();var uv=function(){function e(){}return e.create=function(){return new qS(new YS)},e}();var ZS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gn=function(e){ZS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(rn),XS=function(){function e(t,n){this.logger=n,this.fps=gn.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=gn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?eg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Dn(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),qi=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r,a;typeof n=="boolean"?this.verbose=n===!0:n&&(a=n,this.verbose=a.verbose===!0,r=a.experimentalFeatures),this.logger=new Pu(this.verbose),this.qrcode=new rv(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=uv.create()}return e.prototype.start=function(t,n,r,a){var l=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;a?h=a:h=this.verbose?this.logger.log:function(){};var g=XS.create(n,this.logger);this.clearElement();var E=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?E=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=E,x=document.getElementById(this.elementId),b=x.clientWidth?x.clientWidth:gn.DEFAULT_WIDTH;x.style.position="relative",this.shouldScan=!0,this.element=x;var O=this,T=this.stateManagerProxy.startTransition(Qe.SCANNING);return new Promise(function(j,W){var H=v?g.videoConstraints:O.createVideoConstraints(t);if(!H){T.cancel(),W("videoConstraints should be defined");return}var U={};(!v||g.aspectRatio)&&(U.aspectRatio=g.aspectRatio);var ye={onRenderSurfaceReady:function(ke,Ce){O.setupUi(ke,Ce,g),O.isScanning=!0,O.foreverScan(g,r,h)}};cv.failIfNotSupported().then(function(ke){ke.create(H).then(function(Ce){return Ce.render(l.element,U,ye).then(function(z){O.renderedCamera=z,T.execute(),j(null)}).catch(function(z){T.cancel(),W(z)})}).catch(function(Ce){T.cancel(),W(oi.errorGettingUserMedia(Ce))})}).catch(function(ke){T.cancel(),W(oi.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Qe.PAUSED),this.showPausedState(),(Dn(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Qe.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Qe.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var l=document.getElementById(gn.SHADED_REGION_ELEMENT_ID);l&&t.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),r(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Dn(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var h=new Image;h.onload=function(){var g=h.width,E=h.height,v=document.getElementById(r.elementId),x=v.clientWidth?v.clientWidth:gn.DEFAULT_WIDTH,b=Math.max(v.clientHeight?v.clientHeight:E,gn.FILE_SCAN_MIN_HEIGHT),O=r.computeCanvasDrawConfig(g,E,x,b);if(n){var T=r.createCanvasElement(x,b,"qr-canvas-visible");T.style.display="inline-block",v.appendChild(T);var j=T.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=x,j.canvas.height=b,j.drawImage(h,0,0,g,E,O.x,O.y,O.width,O.height)}var W=gn.FILE_SCAN_HIDDEN_CANVAS_PADDING,H=Math.max(h.width,O.width),U=Math.max(h.height,O.height),ye=H+2*W,ke=U+2*W,Ce=r.createCanvasElement(ye,ke);v.appendChild(Ce);var z=Ce.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=ye,z.canvas.height=ke,z.drawImage(h,0,0,g,E,W,W,H,U);try{r.qrcode.decodeRobustlyAsync(Ce).then(function(_e){a(Kp.createFromQrcodeResult(_e))}).catch(l)}catch(_e){l("QR code parse error, error = ".concat(_e))}},h.onerror=l,h.onabort=l,h.onstalled=l,h.onsuspend=l,h.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return lv.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!eg.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Z.QR_CODE,Z.AZTEC,Z.CODABAR,Z.CODE_39,Z.CODE_93,Z.CODE_128,Z.DATA_MATRIX,Z.MAXICODE,Z.ITF,Z.EAN_13,Z.EAN_8,Z.PDF_417,Z.RSS_14,Z.RSS_EXPANDED,Z.UPC_A,Z.UPC_E,Z.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],a=0,l=t.formatsToSupport;a<l.length;a++){var h=l[a];XE(h)?r.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Dn(t))return!0;if(!Dn(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Dn(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Dn(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var a=this,l=r.qrbox;this.validateQrboxConfig(l);var h=this.toQrdimensions(t,n,l),g=function(v){if(v<gn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(gn.MIN_QR_BOX_SIZE,"px.")},E=function(v){return v>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=t),v};g(h.width),g(h.height),h.width=E(h.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var a=Dn(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(t,n,a);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=r.isShadedBoxEnabled()&&l.height<=n,g={x:0,y:0,width:t,height:n},E=h?this.getShadedRegionBounds(t,n,l):g,v=this.createCanvasElement(E.width,E.height),x={willReadFrequently:!0},b=v.getContext("2d",x);b.canvas.width=E.width,b.canvas.height=E.height,this.element.append(v),h&&this.possiblyInsertShadingElement(this.element,t,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=E,this.context=b,this.canvasElement=v},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=oi.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,Kp.createFromQrcodeResult(a)),r.possiblyUpdateShaders(!0),!0}).catch(function(a){r.possiblyUpdateShaders(!1);var l=oi.codeParseError(a);return n(l,Fu.createFrom(l)),!1})},e.prototype.foreverScan=function(t,n,r){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),h=l.videoWidth/l.clientWidth,g=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var E=this.qrRegion.width*h,v=this.qrRegion.height*g,x=this.qrRegion.x*h,b=this.qrRegion.y*g;this.context.drawImage(l,x,b,E,v,0,0,this.qrRegion.width,this.qrRegion.height);var O=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,n,r)},a.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(T){!T&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,r).finally(function(){O()})):O()}).catch(function(T){a.logger.logError("Error happend while scanning context",T),O()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",a={user:!0,environment:!0},l="exact",h=function(j){if(j in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(j,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var E=Object.keys(t)[0];if(E!==n&&E!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(E===n){var v=t.facingMode;if(typeof v=="string"){if(h(v))return{facingMode:v}}else if(typeof v=="object")if(l in v){if(h(v["".concat(l)]))return{facingMode:{exact:v["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var x=typeof v;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var b=t.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(l in b)return{deviceId:{exact:b["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var O=typeof b;throw"Invalid type of 'deviceId' = ".concat(O)}}}var T=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},e.prototype.computeCanvasDrawConfig=function(t,n,r,a){if(t<=r&&n<=a){var l=(r-t)/2,h=(a-n)/2;return{x:l,y:h,width:t,height:n}}else{var g=t,E=n;return t>r&&(n=r/t*n,t=r),n>a&&(t=a/n*t,n=a),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(E)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?gn.BORDER_SHADER_MATCH_COLOR:gn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var a=t,l=n,h=document.createElement("canvas");return h.style.width="".concat(a,"px"),h.style.height="".concat(l,"px"),h.style.display="none",h.id=Dn(r)?"qr-canvas":r,h},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,a){if(!(n-a.width<1||r-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var h=(n-a.width)/2,g=(r-a.height)/2;if(l.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(gn.SHADED_REGION_ELEMENT_ID),n-a.width<11||r-a.height<11)this.hasBorderShaders=!1;else{var E=5,v=40;this.insertShaderBorders(l,v,E,-E,null,0,!0),this.insertShaderBorders(l,v,E,-E,null,0,!1),this.insertShaderBorders(l,v,E,null,-E,0,!0),this.insertShaderBorders(l,v,E,null,-E,0,!1),this.insertShaderBorders(l,E,v+E,-E,null,-E,!0),this.insertShaderBorders(l,E,v+E,null,-E,-E,!0),this.insertShaderBorders(l,E,v+E,-E,null,-E,!1),this.insertShaderBorders(l,E,v+E,null,-E,-E,!1),this.hasBorderShaders=!0}t.append(l)}},e.prototype.insertShaderBorders=function(t,n,r,a,l,h,g){var E=document.createElement("div");E.style.position="absolute",E.style.backgroundColor=gn.BORDER_SHADER_DEFAULT_COLOR,E.style.width="".concat(n,"px"),E.style.height="".concat(r,"px"),a!==null&&(E.style.top="".concat(a,"px")),l!==null&&(E.style.bottom="".concat(l,"px")),g?E.style.left="".concat(h,"px"):E.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(E),t.appendChild(E)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}();var ig="data:image/svg+xml;base64,",dv=ig+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",fv=ig+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",og=ig+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",hv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=";var pv=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),gv=function(){function e(){this.data=pv.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=pv.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}();var QS=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Jp.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(a);var l=document.createElement("a");l.innerText=Jp.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),KS=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=og,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=hv,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=og,this.infoIcon.style.opacity="0.6")},e}(),mv=function(){function e(){var t=this;this.infoDiv=new QS,this.infoIcon=new KS(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}();var JS=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(x){try{v(r.next(x))}catch(b){h(b)}}function E(x){try{v(r.throw(x))}catch(b){h(b)}}function v(x){x.done?l(x.value):a(x.value).then(g,E)}v((r=r.apply(e,t||[])).next())})},e2=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(v){return function(x){return E([v,x])}}function E(v){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,v[0]&&(n=0)),n;)try{if(r=1,a&&(l=v[0]&2?a.return:v[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,v[1])).done)return l;switch(a=0,l&&(v=[v[0]&2,l.value]),v[0]){case 0:case 1:l=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,a=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(v[0]===6||v[0]===2)){n=0;continue}if(v[0]===3&&(!l||v[1]>l[0]&&v[1]<l[3])){n.label=v[1];break}if(v[0]===6&&n.label<l[1]){n.label=l[1],l=v;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(v);break}l[2]&&n.ops.pop(),n.trys.pop();continue}v=t.call(e,n)}catch(x){v=[6,x],a=0}finally{r=l=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},sg=function(){function e(){}return e.hasPermissions=function(){return JS(this,void 0,void 0,function(){var t,n,r,a;return e2(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=l.sent(),n=0,r=t;n<r.length;n++)if(a=r[n],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},e}();var Ir=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(t){return t===er.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===er.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return rn.DEFAULT_SUPPORTED_SCAN_TYPE;var n=rn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,a=t;r<a.length;r++){var l=a[r];if(!rn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return t},e}();var It=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}();var on=function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add(It.ALL_ELEMENT_CLASS),t==="button"&&r.setAttribute("type","button"),r},e}();var Ev=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(x){try{v(r.next(x))}catch(b){h(b)}}function E(x){try{v(r.throw(x))}catch(b){h(b)}}function v(x){x.done?l(x.value):a(x.value).then(g,E)}v((r=r.apply(e,t||[])).next())})},vv=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(v){return function(x){return E([v,x])}}function E(v){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,v[0]&&(n=0)),n;)try{if(r=1,a&&(l=v[0]&2?a.return:v[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,v[1])).done)return l;switch(a=0,l&&(v=[v[0]&2,l.value]),v[0]){case 0:case 1:l=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,a=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(v[0]===6||v[0]===2)){n=0;continue}if(v[0]===3&&(!l||v[1]>l[0]&&v[1]<l[3])){n.label=v[1];break}if(v[0]===6&&n.label<l[1]){n.label=l[1],l=v;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(v);break}l[2]&&n.ops.pop(),n.trys.pop();continue}v=t.call(e,n)}catch(x){v=[6,x],a=0}finally{r=l=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},yv=function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return Ev(this,void 0,void 0,function(){var t,n;return vv(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?Me.torchOffButton():Me.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?Me.torchOnFailedMessage():Me.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),Cv=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=on.createElement("button",It.TORCH_BUTTON_ID),this.torchController=new yv(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=Me.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var a=this;this.torchButton.addEventListener("click",function(l){return Ev(r,void 0,void 0,function(){return vv(this,function(h){switch(h.label){case 0:return[4,a.torchController.flipState()];case 1:return h.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove(It.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add(It.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove(It.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add(It.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new yv(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Me.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,a){var l=new e(n,a);return l.render(t,r),l},e}();var wv=function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=on.createElement("button",It.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(g){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=on.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(g){if(!(g==null||g.target==null)){var E=g.target;if(!(E.files&&E.files.length===0)){var v=E.files,x=v[0],b=x.name;l.setImageNameToButton(b),r(x)}}});var h=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(h),this.fileBasedScanRegion.addEventListener("dragenter",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(g){g.stopPropagation(),g.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var E=g.dataTransfer;if(E){var v=E.files;if(!v||v.length===0)return;for(var x=!1,b=0;b<v.length;++b){var O=v.item(b);if(O){var T=/image.*/;if(O.type.match(T)){x=!0;var j=O.name;l.setImageNameToButton(j),r(O),h.innerText=Me.dragAndDropMessage();break}}}x||(h.innerText=Me.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Me.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var r=t.substring(0,8),a=t.length,l=t.substring(a-8,a);t="".concat(r,"....").concat(l)}var h=Me.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=h},e.prototype.setInitialValueToButton=function(){var t=Me.fileSelectionChooseImage()+" - "+Me.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){var a=new e(t,n,r);return a},e}();var xv=function(){function e(t){this.selectElement=on.createElement("select",It.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var a=Me.selectCamera();n.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var l=1,h=0,g=this.cameras;h<g.length;h++){var E=g[h],v=E.id,x=E.label==null?v:E.label;(!x||x==="")&&(x=[Me.anonymousCameraPrefix(),l++].join(" "));var b=document.createElement("option");b.value=v,b.innerText=x,this.options.push(b),this.selectElement.appendChild(b)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++){var a=r[n];if(a.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}();var Iv=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=on.createElement("input",It.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Me.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Me.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,a){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();var An=function(e){return e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",e}(An||{});function t2(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function n2(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var r2=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Ir(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Pu(this.verbose),this.persistedDataManager=new gv,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,h){if(t)t(l,h);else{if(r.lastMatchFound===l)return;r.lastMatchFound=l,r.setHeaderMessage(Me.lastMatch(l),An.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,h){n&&n(l,h)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new qi(this.getScanRegionId(),n2(this.config,this.verbose))},e.prototype.pause=function(t){(Dn(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,a){if(!t.html5Qrcode){r();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(l){if(!t.html5Qrcode){r();return}t.html5Qrcode.clear(),n(),r()}).catch(function(l){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",l),a(l)}):(t.html5Qrcode.clear(),n(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=rn.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!rn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=rn.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=rn.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:rn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:rn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:rn.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),Ir.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),l=this.getDashboardId();a.id=l,a.style.width="100%",t.appendChild(a),this.setupInitialDashboard(a)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var r=new mv;r.renderInto(n);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",n.appendChild(a)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage(Me.cameraPermissionRequesting());var l=function(){r||a.createPermissionButton(t,n)};qi.getCameras().then(function(h){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),h&&h.length>0?(t.removeChild(n),a.renderCameraSelection(h)):(a.setHeaderMessage(Me.noCameraFound(),An.STATUS_WARNING),l())}).catch(function(h){a.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:l(),a.setHeaderMessage(h,An.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,a=on.createElement("button",this.getCameraPermissionButtonId());a.innerText=Me.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,r.createCameraListUi(t,n,a)}),n.appendChild(a)},e.prototype.createPermissionsUi=function(t,n){var r=this;if(Ir.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){sg.hasPermissions().then(function(a){a?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(a){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Ir.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var a=document.createElement("div");a.style.textAlign="center",r.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,a),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=Ir.isFileScanType(this.currentScanType),r=this,a=function(l){if(!r.html5Qrcode)throw"html5Qrcode not defined";Ir.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Me.loadingImage()),r.html5Qrcode.scanFileV2(l,!0).then(function(h){r.resetHeaderMessage(),r.qrCodeSuccessCallback(h.decodedText,h)}).catch(function(h){r.setHeaderMessage(h,An.STATUS_WARNING),r.qrCodeErrorCallback(h,Fu.createFrom(h))}))};this.fileSelectionUi=wv.create(t,n,a)},e.prototype.renderCameraSelection=function(t){var n=this,r=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var l=Iv.create(a,!1),h=function(W){var H=W.zoomFeature();if(H.isSupported()){l.setOnCameraZoomValueChangeCallback(function(ye){H.apply(ye)});var U=1;n.config.defaultZoomValueIfSupported&&(U=n.config.defaultZoomValueIfSupported),U=KE(U,H.min(),H.max()),l.setValues(H.min(),H.max(),U,H.step()),l.show()}},g=xv.create(a,t),E=document.createElement("span"),v=on.createElement("button",It.CAMERA_START_BUTTON_ID);v.innerText=Me.scanButtonStartScanningText(),E.appendChild(v);var x=on.createElement("button",It.CAMERA_STOP_BUTTON_ID);x.innerText=Me.scanButtonStopScanningText(),x.style.display="none",x.disabled=!0,E.appendChild(x);var b,O=function(W){if(!W.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(W.torchFeature()):b=Cv.create(E,W.torchFeature(),{display:"none",marginLeft:"5px"},function(H){r.setHeaderMessage(H,An.STATUS_WARNING)}),b.show()};a.appendChild(E);var T=function(W){W||(v.style.display="none"),v.innerText=Me.scanButtonStartScanningText(),v.style.opacity="1",v.disabled=!1,W&&(v.style.display="inline-block")};if(v.addEventListener("click",function(W){v.innerText=Me.scanButtonScanningStarting(),g.disable(),v.disabled=!0,v.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var H=g.getValue();r.persistedDataManager.setLastUsedCameraId(H),r.html5Qrcode.start(H,t2(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(U){x.disabled=!1,x.style.display="inline-block",T(!1);var ye=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&O(ye),n.config.showZoomSliderIfSupported===!0&&h(ye)}).catch(function(U){r.showHideScanTypeSwapLink(!0),g.enable(),T(!0),r.setHeaderMessage(U,An.STATUS_WARNING)})}),g.hasSingleItem()&&v.click(),x.addEventListener("click",function(W){if(!r.html5Qrcode)throw"html5Qrcode not defined";x.disabled=!0,r.html5Qrcode.stop().then(function(H){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),g.enable(),v.disabled=!1,x.style.display="none",v.style.display="inline-block",b&&(b.reset(),b.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(H){x.disabled=!1,r.setHeaderMessage(H,An.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var j=r.persistedDataManager.getLastUsedCameraId();g.hasValue(j)?(g.setValue(j),v.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=Me.textIfCameraScanSelected(),r=Me.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var h=on.createElement("span",this.getDashboardSectionSwapLinkId());h.style.textDecoration="underline",h.style.cursor="pointer",h.innerText=Ir.isCameraScanType(this.currentScanType)?n:r,h.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Ir.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),h.innerText=r,t.currentScanType=er.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),h.innerText=n,t.currentScanType=er.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),l.appendChild(h),a.appendChild(l)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){sg.hasPermissions().then(function(r){if(r){var a=document.getElementById(n.getCameraPermissionButtonId());if(!a)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=An.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case An.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case An.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case An.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=dv,this.cameraScanImage.alt=Me.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=fv,this.fileScanImage.alt=Me.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return It.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return It.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();var Rv=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(Te(Qr),Te(hr))};static \u0275dir=Nt({type:e})}return e})(),dg=(()=>{class e extends Rv{static \u0275fac=(()=>{let n;return function(a){return(n||(n=Xr(e)))(a||e)}})();static \u0275dir=Nt({type:e,features:[gr]})}return e})(),zu=new K("");var i2={provide:zu,useExisting:ar(()=>Ov),multi:!0};function o2(){let e=In()?In().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var s2=new K(""),Ov=(()=>{class e extends Rv{_compositionMode;_composing=!1;constructor(n,r,a){super(n,r),this._compositionMode=a,this._compositionMode==null&&(this._compositionMode=!o2())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(Te(Qr),Te(hr),Te(s2,8))};static \u0275dir=Nt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,a){r&1&&Zn("input",function(h){return a._handleInput(h.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(h){return a._compositionEnd(h.target.value)})},standalone:!1,features:[Ro([i2]),gr]})}return e})();var a2=new K(""),c2=new K("");function Fv(e){return e!=null}function Pv(e){return Kr(e)?et(e):e}function Lv(e){let t={};return e.forEach(n=>{t=n!=null?$($({},t),n):t}),Object.keys(t).length===0?null:t}function kv(e,t){return t.map(n=>n(e))}function l2(e){return!e.validate}function Bv(e){return e.map(t=>l2(t)?t:n=>t.validate(n))}function u2(e){if(!e)return null;let t=e.filter(Fv);return t.length==0?null:function(n){return Lv(kv(n,t))}}function Vv(e){return e!=null?u2(Bv(e)):null}function d2(e){if(!e)return null;let t=e.filter(Fv);return t.length==0?null:function(n){let r=kv(n,t).map(Pv);return Pd(r).pipe(pe(Lv))}}function jv(e){return e!=null?d2(Bv(e)):null}function Dv(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function f2(e){return e._rawValidators}function h2(e){return e._rawAsyncValidators}function ag(e){return e?Array.isArray(e)?e:[e]:[]}function ju(e,t){return Array.isArray(e)?e.includes(t):e===t}function Av(e,t){let n=ag(t);return ag(e).forEach(a=>{ju(n,a)||n.push(a)}),n}function bv(e,t){return ag(t).filter(n=>!ju(e,n))}var Uu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Vv(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=jv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},cg=class extends Uu{name;get formDirective(){return null}get path(){return null}},ka=class extends Uu{_parent=null;name=null;valueAccessor=null},lg=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},p2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$j=ve($({},p2),{"[class.ng-submitted]":"isSubmitted"}),Uv=(()=>{class e extends lg{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(Te(ka,2))};static \u0275dir=Nt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,a){r&2&&Bl("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},standalone:!1,features:[gr]})}return e})();var Oa="VALID",Vu="INVALID",qo="PENDING",Fa="DISABLED",Xo=class{},Hu=class extends Xo{value;source;constructor(t,n){super(),this.value=t,this.source=n}},Pa=class extends Xo{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},La=class extends Xo{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},Zo=class extends Xo{status;source;constructor(t,n){super(),this.status=t,this.source=n}};function g2(e){return(Gu(e)?e.validators:e)||null}function m2(e){return Array.isArray(e)?Vv(e):e||null}function y2(e,t){return(Gu(t)?t.asyncValidators:e)||null}function E2(e){return Array.isArray(e)?jv(e):e||null}function Gu(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var ug=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Xn(this.statusReactive)}set status(t){Xn(()=>this.statusReactive.set(t))}_status=Js(()=>this.statusReactive());statusReactive=Ni(void 0);get valid(){return this.status===Oa}get invalid(){return this.status===Vu}get pending(){return this.status==qo}get disabled(){return this.status===Fa}get enabled(){return this.status!==Fa}errors;get pristine(){return Xn(this.pristineReactive)}set pristine(t){Xn(()=>this.pristineReactive.set(t))}_pristine=Js(()=>this.pristineReactive());pristineReactive=Ni(!0);get dirty(){return!this.pristine}get touched(){return Xn(this.touchedReactive)}set touched(t){Xn(()=>this.touchedReactive.set(t))}_touched=Js(()=>this.touchedReactive());touchedReactive=Ni(!1);get untouched(){return!this.touched}_events=new ht;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Av(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Av(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(bv(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(bv(t,this._rawAsyncValidators))}hasValidator(t){return ju(this._rawValidators,t)}hasAsyncValidator(t){return ju(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ve($({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new La(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(a=>{a.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new La(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ve($({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Pa(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(a=>{a.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new Pa(!0,r))}markAsPending(t={}){this.status=qo;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Zo(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ve($({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Fa,this.errors=null,this._forEachChild(a=>{a.disable(ve($({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Hu(this.value,r)),this._events.next(new Zo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ve($({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(a=>a(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Oa,this._forEachChild(r=>{r.enable(ve($({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ve($({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oa||this.status===qo)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Hu(this.value,n)),this._events.next(new Zo(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ve($({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fa:Oa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=qo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=Pv(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(a=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(a,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,a)=>r&&r._find(a),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Zo(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new mt,this.statusChanges=new mt}_calculateStatus(){return this._allControlsDisabled()?Fa:this.errors?Vu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qo)?qo:this._anyControlsHaveStatus(Vu)?Vu:Oa}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),a=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),a&&this._events.next(new Pa(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new La(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Gu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=m2(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=E2(this._rawAsyncValidators)}};var Hv=new K("",{providedIn:"root",factory:()=>fg}),fg="always";function v2(e,t){return[...t.path,e]}function C2(e,t,n=fg){x2(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),I2(e,t),A2(e,t),D2(e,t),w2(e,t)}function _v(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function w2(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function x2(e,t){let n=f2(e);t.validator!==null?e.setValidators(Dv(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=h2(e);t.asyncValidator!==null?e.setAsyncValidators(Dv(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let a=()=>e.updateValueAndValidity();_v(t._rawValidators,a),_v(t._rawAsyncValidators,a)}function I2(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&zv(e,t)})}function D2(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&zv(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function zv(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function A2(e,t){let n=(r,a)=>{t.valueAccessor.writeValue(r),a&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function b2(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function _2(e){return Object.getPrototypeOf(e.constructor)===dg}function S2(e,t){if(!t)return null;Array.isArray(t);let n,r,a;return t.forEach(l=>{l.constructor===Ov?n=l:_2(l)?r=l:a=l}),a||r||n||null}function Sv(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Tv(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var T2=class extends ug{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(g2(n),y2(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Tv(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Sv(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Sv(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Tv(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var M2={provide:ka,useExisting:ar(()=>hg)},Mv=Promise.resolve(),hg=(()=>{class e extends ka{_changeDetectorRef;callSetDisabledState;control=new T2;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new mt;constructor(n,r,a,l,h,g){super(),this._changeDetectorRef=h,this.callSetDisabledState=g,this._parent=n,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=S2(this,l)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),b2(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){C2(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Mv.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,a=r!==0&&ap(r);Mv.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?v2(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(Te(cg,9),Te(a2,10),Te(c2,10),Te(zu,10),Te(ta,8),Te(Hv,8))};static \u0275dir=Nt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ro([M2]),gr,To]})}return e})();var N2={provide:zu,useExisting:ar(()=>Wu),multi:!0};function Gv(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function R2(e){return e.split(":")[0]}var Wu=(()=>{class e extends dg{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r=this._getOptionId(n),a=Gv(r,n);this.setProperty("value",a)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=R2(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(a){return(n||(n=Xr(e)))(a||e)}})();static \u0275dir=Nt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,a){r&1&&Zn("change",function(h){return a.onChange(h.target.value)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ro([N2]),gr]})}return e})(),Wv=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,a){this._element=n,this._renderer=r,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Gv(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(Te(hr),Te(Qr),Te(Wu,9))};static \u0275dir=Nt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),O2={provide:zu,useExisting:ar(()=>$v),multi:!0};function Nv(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function F2(e){return e.split(":")[0]}var $v=(()=>{class e extends dg{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let a=n.map(l=>this._getOptionId(l));r=(l,h)=>{l._setSelected(a.indexOf(h.toString())>-1)}}else r=(a,l)=>{a._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let a=[],l=r.selectedOptions;if(l!==void 0){let h=l;for(let g=0;g<h.length;g++){let E=h[g],v=this._getOptionValue(E.value);a.push(v)}}else{let h=r.options;for(let g=0;g<h.length;g++){let E=h[g];if(E.selected){let v=this._getOptionValue(E.value);a.push(v)}}}this.value=a,n(a)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=F2(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(a){return(n||(n=Xr(e)))(a||e)}})();static \u0275dir=Nt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,a){r&1&&Zn("change",function(h){return a.onChange(h.target)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ro([O2]),gr]})}return e})(),Yv=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,a){this._element=n,this._renderer=r,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(Nv(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(Nv(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(Te(hr),Te(Qr),Te($v,9))};static \u0275dir=Nt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var P2=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=qn({type:e});static \u0275inj=Fn({})}return e})();var qv=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Hv,useValue:n.callSetDisabledState??fg}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=qn({type:e});static \u0275inj=Fn({imports:[P2]})}return e})();var k2=(e,t,n)=>({"sweetener-chip":!0,"sweetener-green":e,"sweetener-yellow":t,"sweetener-red":n}),Zv=(e,t,n,r)=>({sweetener:e,"sweetener-green":t,"sweetener-yellow":n,"sweetener-red":r}),Xv=(e,t,n)=>({"sweet-dot-green":e,"sweet-dot-yellow":t,"sweet-dot-red":n});function B2(e,t){if(e&1&&(lt(0,"option",11),fn(1),ut()),e&2){let n=t.$implicit;tt("value",n.id),$e(),Qs(n.label||"Camera "+n.id)}}function V2(e,t){if(e&1){let n=Zs();lt(0,"div",7)(1,"label",8),fn(2,"Camera:"),ut(),lt(3,"select",9),jl("ngModelChange",function(a){Si(n);let l=dn(2);return Zh(l.selectedCameraId,a)||(l.selectedCameraId=a),Ti(a)}),Zn("change",function(a){Si(n);let l=dn(2);return Ti(l.onCameraChange(a))}),un(4,B2,2,2,"option",10),ut()()}if(e&2){let n=dn(2);$e(3),Vl("ngModel",n.selectedCameraId),$e(),tt("ngForOf",n.cameras)}}function j2(e,t){if(e&1){let n=Zs();Vi(0),lt(1,"button",5),Zn("click",function(){Si(n);let a=dn();return Ti(a.toggleScanner())}),fn(2," Close Scanner "),ut(),un(3,V2,5,2,"div",6),ji()}if(e&2){let n=dn();$e(3),tt("ngIf",n.cameras&&n.cameras.length>0)}}function U2(e,t){if(e&1){let n=Zs();Vi(0),lt(1,"button",5),Zn("click",function(){Si(n);let a=dn();return Ti(a.toggleScanner())}),fn(2," Scan Barcode "),ut(),ji()}}function H2(e,t){e&1&&mr(0,"div",12)}function z2(e,t){if(e&1&&(lt(0,"span",20),fn(1),Jr(2,"titlecase"),ut()),e&2){let n=t.$implicit;tt("ngClass",Ks(4,k2,(n==null?null:n.rating)==="green",(n==null?null:n.rating)==="yellow",(n==null?null:n.rating)==="red")),$e(),yr(" ",ei(2,2,n==null?null:n.name)," ")}}function G2(e,t){if(e&1&&(lt(0,"div",18),un(1,z2,3,8,"span",19),ut()),e&2){let n=dn(2);$e(),tt("ngForOf",n.food.sweeteners)}}function W2(e,t){if(e&1&&(lt(0,"span",25),fn(1),Jr(2,"titlecase"),ut()),e&2){let n=dn().$implicit;$e(),yr(" ",ei(2,1,n.sweeter.name)," ")}}function $2(e,t){if(e&1&&(lt(0,"span",25),fn(1),Jr(2,"titlecase"),ut()),e&2){let n=dn().$implicit;$e(),yr(" ",ei(2,1,n.sweeter.name)," ")}}function Y2(e,t){if(e&1&&(Vi(0),lt(1,"li",20),mr(2,"span",22),fn(3),Jr(4,"titlecase"),un(5,$2,3,3,"span",23),ut(),ji()),e&2){let n=t.$implicit;$e(),tt("ngClass",Ul(6,Zv,n.sweeter,(n.sweeter==null?null:n.sweeter.rating)==="green",(n.sweeter==null?null:n.sweeter.rating)==="yellow",(n.sweeter==null?null:n.sweeter.rating)==="red")),$e(),tt("ngClass",Ks(11,Xv,(n.sweeter==null?null:n.sweeter.rating)==="green",(n.sweeter==null?null:n.sweeter.rating)==="yellow",(n.sweeter==null?null:n.sweeter.rating)==="red")),$e(),yr(" ",ei(4,4,n.name)," "),$e(2),tt("ngIf",n.sweeter)}}function q2(e,t){if(e&1&&(lt(0,"ul",26),un(1,Y2,6,15,"ng-container",17),ut()),e&2){let n=dn().$implicit;$e(),tt("ngForOf",n.children)}}function Z2(e,t){if(e&1&&(Vi(0),lt(1,"li",21),mr(2,"span",22),fn(3),Jr(4,"titlecase"),un(5,W2,3,3,"span",23)(6,q2,2,1,"ul",24),ut(),ji()),e&2){let n=t.$implicit;$e(),tt("ngClass",Ul(7,Zv,n.sweeter,(n.sweeter==null?null:n.sweeter.rating)==="green",(n.sweeter==null?null:n.sweeter.rating)==="yellow",(n.sweeter==null?null:n.sweeter.rating)==="red")),$e(),tt("ngClass",Ks(12,Xv,(n.sweeter==null?null:n.sweeter.rating)==="green",(n.sweeter==null?null:n.sweeter.rating)==="yellow",(n.sweeter==null?null:n.sweeter.rating)==="red")),$e(),yr(" ",ei(4,5,n.name)," "),$e(2),tt("ngIf",n.sweeter),$e(),tt("ngIf",n.children==null?null:n.children.length)}}function X2(e,t){if(e&1&&(lt(0,"div",13)(1,"h2",14),fn(2),ut(),un(3,G2,2,1,"div",15),lt(4,"ul",16),un(5,Z2,7,16,"ng-container",17),Jr(6,"orderBySweetener"),ut()()),e&2){let n=dn();$e(2),Qs(n.food.description),$e(),tt("ngIf",(n.food.sweeteners==null?null:n.food.sweeteners.length)>0),$e(2),tt("ngForOf",ei(6,3,n.food.ingredients))}}var pg=class e{transform(t){let n=a=>a.sweeter?!0:a.children?a.children.some(l=>n(l)):!1,r=a=>a.map(l=>ve($({},l),{children:l.children?r(l.children):void 0})).sort((l,h)=>{let g=n(l),E=n(h);return g&&!E?-1:!g&&E?1:0});return r(t)}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=Ys({name:"orderBySweetener",type:e,pure:!0})},$u=class e{constructor(t){this.http=t;navigator.permissions.query({name:"camera"}).then(n=>{console.log("Camera permission "+n.state)}).catch(n=>{console.log("Got camera permission error :",n)})}food=null;scannerActive=!1;cameras=[];selectedCameraId=null;html5QrCode=null;sweetenerDict=[{name:"Allulose",aliases:["allulose","d-psicose"],rating:"green"},{name:"Monk Fruit",aliases:["monk fruit","luo han guo","siraitia grosvenorii"],rating:"green"},{name:"Stevia",aliases:["stevia","steviol glycosides"],rating:"green"},{name:"Aspartame",aliases:["aspartame"],rating:"red"},{name:"Sucralose",aliases:["sucralose","Splenda"],rating:"red"},{name:"Saccharin",aliases:["saccharin"],rating:"red"},{name:"Acesulfame Potassium",aliases:["acesulfame potassium","ace-k"],rating:"yellow"},{name:"Neotame",aliases:["neotame"],rating:"red"},{name:"Sugar Alcohol",aliases:["erythritol","xylitol","sorbitol","maltitol","isomalt","mannitol","xylitol"],rating:"green"}];ngOnInit(){}toggleScanner(){this.scannerActive=!this.scannerActive,this.scannerActive?this.startScanner():this.closeScanner()}onCameraChange(t){this.scannerActive&&(this.closeScanner(),setTimeout(()=>this.initScanner(),0))}startScanner(){this.food=null,qi.getCameras().then(t=>{if(this.cameras=t,t.length===0){console.error("No cameras found."),this.scannerActive=!1;return}let n=["back ultra wide","back","rear","primary"],r;for(let a of n){let l=t.find(h=>h.label.toLowerCase().includes(a));if(l){r=l;break}}r?this.selectedCameraId=r.id:this.selectedCameraId=t[0].id,console.log("Available cameras:",t),setTimeout(()=>this.initScanner(),0)})}closeScanner(){this.html5QrCode&&this.html5QrCode.stop().then(()=>{console.log("Scanner stopped.")}).catch(t=>{console.error("Error stopping scanner:",t)})}initScanner(){if(!document.getElementById("reader")){setTimeout(()=>this.initScanner(),100);return}if(this.selectedCameraId===null){console.error("No camera selected."),this.scannerActive=!1;return}this.html5QrCode=new qi("reader"),this.html5QrCode.start(this.selectedCameraId,{fps:10,qrbox:{width:250,height:250}},(n,r)=>{if(n.length<12){console.warn(`Short code detected: ${n}`);return}console.log(`Code matched = ${n}`,r),this.html5QrCode&&this.html5QrCode.stop(),this.scannerActive=!1;let a=n;n.startsWith("0")&&n.length===13&&(a=n.substring(1)),this.lookupFood(a)},n=>{}).catch(n=>{console.error(`Unable to start scanning, error: ${n}`),this.scannerActive=!1})}lookupFood(t){let n=`https://api.nal.usda.gov/fdc/v1/foods/search?query=${encodeURIComponent(t)}&pageSize=10&api_key=DEMO_KEY`;this.http.get(n).subscribe(r=>{console.log("USDA API response:",r),r.totalHits>0&&r.foods[0]?.ingredients?this.setFoodFromUsda(r.foods[0]):this.lookupOpenFoodFacts(t)},r=>{console.error("USDA API error:",r),this.lookupOpenFoodFacts(t)})}lookupOpenFoodFacts(t){let n=`https://world.openfoodfacts.net/api/v2/product/${encodeURIComponent(t)}`;this.http.get(n).subscribe(r=>{console.log("Open Food Facts API response:",r),r&&r.product?this.setFoodFromOpenFoodFacts(r.product):this.food=null},r=>{console.error("Open Food Facts API error:",r),this.food=null})}setFoodFromUsda(t){this.food=t,this.food.ingredients=this.parseIngredients(t.ingredients),this.food.sweeteners=this.getSweetenersFromIngredients(this.food.ingredients)}setFoodFromOpenFoodFacts(t){this.food={description:t.product_name,ingredients:[]},t.ingredients_text&&(this.food.ingredients=this.parseIngredients(t.ingredients_text),this.food.sweeteners=this.getSweetenersFromIngredients(this.food.ingredients))}parseIngredients(t){return(t.match(/(?:[^(,]+(?:\([^)]*\))?)+/g)||[]).map(r=>{let a=r.trim(),l,h=a.match(/^(.*?)\s*\(([^)]+)\)$/);return h&&(a=h[1].trim(),l=this.parseIngredients(h[2])),$({name:a,sweeter:this.findSweetener(a)},l?{children:l}:{})})}findSweetener(t){let n=t.toLowerCase();for(let r of this.sweetenerDict)if(r.aliases.some(a=>n.includes(a)))return r;return null}getSweetenersFromIngredients(t){return this.food.ingredients.map(n=>n.sweeter).filter((n,r,a)=>n!==null&&a.findIndex(l=>l&&n&&l.name===n.name)===r)}static \u0275fac=function(n){return new(n||e)(Te(ou))};static \u0275cmp=$s({type:e,selectors:[["app-root"]],decls:8,vars:4,consts:[[1,"app-main-title"],[2,"text-align","center","margin","2rem 0"],[4,"ngIf"],["id","reader","width","600px",4,"ngIf"],["class","food-card",4,"ngIf"],[1,"scan-btn",3,"click"],["style","margin: 1rem 0;",4,"ngIf"],[2,"margin","1rem 0"],["for","cameraSelect",2,"color","#fff","margin-right","0.5em"],["id","cameraSelect",2,"padding","0.4em 1em","border-radius","6px",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","reader","width","600px"],[1,"food-card"],[1,"food-title"],["class","sweetener-highlight",4,"ngIf"],[1,"ingredient-list"],[4,"ngFor","ngForOf"],[1,"sweetener-highlight"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"ingredient-top",3,"ngClass"],[1,"ingredient-dot",3,"ngClass"],["class","sweet-badge",4,"ngIf"],["class","ingredient-list child-list",4,"ngIf"],[1,"sweet-badge"],[1,"ingredient-list","child-list"]],template:function(n,r){n&1&&(lt(0,"h1",0),fn(1,` Sweet Spotter
`),ut(),lt(2,"div",1),un(3,j2,4,1,"ng-container",2)(4,U2,3,0,"ng-container",2),ut(),un(5,H2,1,0,"div",3)(6,X2,7,5,"div",4),mr(7,"router-outlet")),n&2&&($e(3),tt("ngIf",r.scannerActive),$e(),tt("ngIf",!r.scannerActive),$e(),tt("ngIf",r.scannerActive),$e(),tt("ngIf",!r.scannerActive&&r.food))},dependencies:[Ta,_p,Zl,dp,ql,fp,hp,pg,qv,Wv,Yv,Wu,Uv,hg],styles:["body[_ngcontent-%COMP%], [_nghost-%COMP%]{background:#181824;color:#f3f3fa}.food-card[_ngcontent-%COMP%]{margin:2rem auto;max-width:500px;background:#232336;border-radius:16px;box-shadow:0 4px 24px #0000004d;padding:2rem 2.5rem 1.5rem;text-align:center}.food-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:1.5rem;color:#fff;letter-spacing:1px}.ingredient-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.ingredient-top[_ngcontent-%COMP%]{padding:.7rem .5rem;margin:.3rem 0;border-radius:8px;text-align:left;background:#232336;box-shadow:0 1px 4px #0000001a;transition:background .2s;color:#f3f3fa}.ingredient-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ingredient-top){display:block;background:none;box-shadow:none;margin:.2em 0;padding:.3em 0 .3em .5em;border-radius:0;color:inherit;align-items:flex-start}.sweetener-green[_ngcontent-%COMP%]{background:#1e3a2a!important;color:#7fffbe!important;border-color:#00e676!important}.sweetener-yellow[_ngcontent-%COMP%]{background:#3a321a!important;color:#ffe68f!important;border-color:#ffe600!important}.sweetener-red[_ngcontent-%COMP%]{background:#3a1a2f!important;color:#ff8fcf!important;border-color:#ff5ca7!important}.sweet-dot-green[_ngcontent-%COMP%]{background:#00e676!important}.sweet-dot-yellow[_ngcontent-%COMP%]{background:#ffe600!important}.sweet-dot-red[_ngcontent-%COMP%]{background:#ff5ca7!important}.ingredient-dot[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:12px;background:#44445a}.sweet-label[_ngcontent-%COMP%]{margin-left:auto;background:#ff5ca7;color:#fff;font-size:.85rem;padding:.2rem .7rem;border-radius:12px;font-weight:500;letter-spacing:.5px;box-shadow:0 1px 4px #0000001a}.scan-btn[_ngcontent-%COMP%]{background:#ff5ca7;color:#fff;border:none;border-radius:8px;padding:.8rem 2rem;font-size:1.1rem;font-weight:600;cursor:pointer;box-shadow:0 2px 8px #0000002e;transition:background .2s}.scan-btn[_ngcontent-%COMP%]:hover{background:#e14b8f}.app-main-title[_ngcontent-%COMP%]{text-align:center;margin-top:2rem;color:#ff5ca7;letter-spacing:2px}.sweetener-highlight[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;margin:1.5rem 0 1rem}.sweetener-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.4em 1em;border-radius:999px;font-size:1rem;font-weight:600;background:#232336;color:#fff;box-shadow:0 2px 8px #0000001a;border:2px solid transparent}.sweet-badge[_ngcontent-%COMP%]{display:inline-block;margin-left:.7em;background:#ff5ca7;color:#fff;font-size:.85em;font-weight:600;padding:.18em .85em;border-radius:1em;letter-spacing:.5px;vertical-align:middle}.child-list[_ngcontent-%COMP%]{margin-left:2em;margin-top:.3em;padding-left:1em}"]})};wp($u,qE).catch(e=>console.error(e));
