<h1 class="app-main-title">
  Sweet Spotter
</h1>
<div *ngIf="scannerActive" class="scanner-overlay">
  <button class="close-btn" (click)="closeScanner()">âœ•</button>
  <div id="reader" class="reader-full"></div>
</div>
<div style="text-align:center; margin: 2rem 0;">
  <button (click)="startScanner()" class="scan-btn">Scan Barcode</button>
</div>
<div *ngIf="food" class="food-card">
  <h2 class="food-title">{{ food.description }}</h2>
  <div *ngIf="food.sweeteners?.length > 0" class="sweetener-highlight">
    <span *ngFor="let s of food.sweeteners"
      [ngClass]="{
        'sweetener-chip': true,
        'sweetener-green': s?.rating === 'green',
        'sweetener-yellow': s?.rating === 'yellow',
        'sweetener-red': s?.rating === 'red'
      }">
      {{ s?.name | titlecase }}
    </span>
  </div>  
  <ul class="ingredient-list">
    <li *ngFor="let ingredient of food.ingredients | orderBySweetener"
        [ngClass]="{
          'sweetener': ingredient.sweeter,
          'sweetener-green': ingredient.sweeter?.rating === 'green',
          'sweetener-yellow': ingredient.sweeter?.rating === 'yellow',
          'sweetener-red': ingredient.sweeter?.rating === 'red'
        }">
      <span class="ingredient-dot"
            [ngClass]="{
              'sweet-dot-green': ingredient.sweeter?.rating === 'green',
              'sweet-dot-yellow': ingredient.sweeter?.rating === 'yellow',
              'sweet-dot-red': ingredient.sweeter?.rating === 'red'
            }"></span>
      {{ ingredient.name | titlecase }}
      <span *ngIf="ingredient.sweeter" class="sweet-label">
        {{ ingredient.sweeter.name | titlecase }}
      </span>
    </li>
  </ul>
</div>

<router-outlet />
